# Report

Audit report for **2023-10-party** generated by *Bot-Henry*.

> Note: There is a section for disputed findings below the usual findings sections.

## Summary

### Medium Issues

Total **6 instances** over **2 issues**:

|ID|Issue|Instances|
|:--:|:---|:--:|
| [[M&#x2011;01]](#m01-centralization-risk-for-privileged-functions) | Centralization risk for privileged functions | 5 |
| [[M&#x2011;02]](#m02-use-safetransferfrom-instead-of-transferfrom-to-transfer-nfts) | Use `safeTransferFrom()` instead of `transferFrom()` to transfer NFTs | 1 |

### Low Issues

Total **101 instances** over **31 issues**:

|ID|Issue|Instances|
|:--:|:---|:--:|
| [[L&#x2011;01]](#l01-use-of-txorigin-is-unsafe-in-almost-every-context) | Use of `tx.origin` is unsafe in almost every context | 1 |
| [[L&#x2011;02]](#l02-use-of-ecrecover-is-susceptible-to-signature-malleability) | Use of `ecrecover` is susceptible to signature malleability | 1 |
| [[L&#x2011;03]](#l03-function-can-return-unassigned-variable) | Function can return unassigned variable | 1 |
| [[L&#x2011;04]](#l04-nft-doesnt-handle-hard-forks) | NFT doesn't handle hard forks | 1 |
| [[L&#x2011;05]](#l05-initializers-can-be-front-run) | Initializers can be front-run | 4 |
| [[L&#x2011;06]](#l06-external-call-recipient-can-consume-all-remaining-gas) | External call recipient can consume all remaining gas | 2 |
| [[L&#x2011;07]](#l07-missing-disallow-list-for-erc721) | Missing disallow list for `ERC721` | 1 |
| [[L&#x2011;08]](#l08-missing-zero-address-check-in-constructor) | Missing zero address check in constructor | 2 |
| [[L&#x2011;09]](#l09-missing-zero-address-check-in-initializer) | Missing zero address check in initializer | 4 |
| [[L&#x2011;10]](#l10-nft-does-not-support-hard-forks) | NFT does not support hard forks | 1 |
| [[L&#x2011;11]](#l11-named-return-variable-used-before-assignment) | Named return variable used before assignment | 1 |
| [[L&#x2011;12]](#l12-revert-on-transfer-to-the-zero-address) | Revert on transfer to the zero address | 3 |
| [[L&#x2011;13]](#l13-array-is-pushed-but-not-poped) | Array is `push()`ed but not `pop()`ed | 1 |
| [[L&#x2011;14]](#l14-state-variables-not-limited-to-reasonable-values) | State variables not limited to reasonable values | 3 |
| [[L&#x2011;15]](#l15-tokens-may-be-minted-to-the-zero-address) | Tokens may be minted to the zero address | 1 |
| [[L&#x2011;16]](#l16-tokenuri-does-not-follow-eip-721) | `tokenURI()` does not follow EIP-721 | 1 |
| [[L&#x2011;17]](#l17-consider-implementing-two-step-procedure-for-updating-protocol-addresses) | Consider implementing two-step procedure for updating protocol addresses | 3 |
| [[L&#x2011;18]](#l18-addresstransfer-and-addresssend-should-be-replace-with-addresscall) | address.transfer() and address.send() should be replace with address.call() | 1 |
| [[L&#x2011;19]](#l19-vulnerable-versions-of-packages-are-being-used) | Vulnerable versions of packages are being used | 1 |
| [[L&#x2011;20]](#l20-array-length-is-not-checked-before-access-its-index) | Array length is not checked before access its index | 1 |
| [[L&#x2011;21]](#l21-missing-checks-for-address0-when-setting-address-state-variables) | Missing checks for `address(0)` when setting address state variables | 6 |
| [[L&#x2011;22]](#l22-unsafe-solidity-low-level-call-can-cause-gas-grief-attack) | Unsafe solidity low-level call can cause gas grief attack | 5 |
| [[L&#x2011;23]](#l23-constructor--initialization-function-lacks-parameter-validation) | Constructor / initialization function lacks parameter validation | 13 |
| [[L&#x2011;24]](#l24-governance-functions-should-be-controlled-by-time-locks) | Governance functions should be controlled by time locks | 2 |
| [[L&#x2011;25]](#l25-missing-contract-existence-checks-before-low-level-calls) | Missing contract existence checks before low-level calls | 5 |
| [[L&#x2011;26]](#l26-division-by-zero-not-prevented) | Division by zero not prevented | 3 |
| [[L&#x2011;27]](#l27-external-function-calls-within-loops) | External function calls within loops | 7 |
| [[L&#x2011;28]](#l28-use-safecast-to-downcast-safely) | Use `SafeCast` to downcast safely | 8 |
| [[L&#x2011;29]](#l29-use-descriptive-constant-instead-of-0-as-a-parameter) | Use descriptive constant instead of 0 as a parameter | 9 |
| [[L&#x2011;30]](#l30-code-does-not-follow-the-best-practice-of-check-effects-interaction) | Code does not follow the best practice of check-effects-interaction | 7 |
| [[L&#x2011;31]](#l31-unchecked-blocks-with-subtractions-may-underflow) | `unchecked` blocks with subtractions may underflow | 2 |

### Non Critical Issues

Total **1017 instances** over **93 issues**:

|ID|Issue|Instances|
|:--:|:---|:--:|
| [[N&#x2011;01]](#n01-abiencodepacked-should-be-replaced-with-bytesconcat) | `abi.encodePacked()` should be replaced with `bytes.concat()` | 1 |
| [[N&#x2011;02]](#n02-consider-moving-msgsender-checks-to-modifiers) | Consider moving `msg.sender` checks to `modifier`s | 8 |
| [[N&#x2011;03]](#n03-custom-errors-has-no-error-details) | Custom errors has no error details | 29 |
| [[N&#x2011;04]](#n04-import-declarations-should-import-specific-identifiers-rather-than-the-whole-file) | Import declarations should import specific identifiers, rather than the whole file | 27 |
| [[N&#x2011;05]](#n05-event-should-include-parameters) | Event should include parameters | 4 |
| [[N&#x2011;06]](#n06-too-long-functions-should-be-refactored) | Too long functions should be refactored | 9 |
| [[N&#x2011;07]](#n07-there-is-no-need-to-initialize-variables-with-0) | There is no need to initialize variables with 0 | 4 |
| [[N&#x2011;08]](#n08-natspec-documentation-for-contract-is-missing) | NatSpec documentation for contract is missing | 5 |
| [[N&#x2011;09]](#n09-names-of-privateinternal-state-variables-should-be-prefixed-with-an-underscore) | Names of `private`/`internal` state variables should be prefixed with an underscore | 7 |
| [[N&#x2011;10]](#n10-order-of-functions-does-not-follow-the-solidity-style-guide) | Order of functions does not follow the Solidity Style Guide | 45 |
| [[N&#x2011;11]](#n11-redundant-inheritance-specifier) | Redundant inheritance specifier | 1 |
| [[N&#x2011;12]](#n12-use-of-override-is-unnecessary) | Use of `override` is unnecessary | 1 |
| [[N&#x2011;13]](#n13-unused-internal-functions-can-be-removed) | Unused `internal` functions can be removed | 1 |
| [[N&#x2011;14]](#n14-custom-errors-should-be-used-rather-than-revertrequire) | Custom errors should be used rather than `revert()`/`require()` | 2 |
| [[N&#x2011;15]](#n15-large-numeric-literals-should-use-underscores-for-readability) | Large numeric literals should use underscores for readability | 2 |
| [[N&#x2011;16]](#n16-add-inline-comments-for-unnamed-parameters) | Add inline comments for unnamed parameters | 2 |
| [[N&#x2011;17]](#n17-assembly-blocks-should-have-extensive-comments) | Assembly blocks should have extensive comments | 5 |
| [[N&#x2011;18]](#n18-assertshould-be-replaced-with-require-or-revert) | `assert()` should be replaced with `require()` or `revert()` | 3 |
| [[N&#x2011;19]](#n19-consider-adding-a-blockdeny-list) | Consider adding a block/deny-list | 1 |
| [[N&#x2011;20]](#n20-constantsimmutables-redefined-elsewhere) | Constants/Immutables redefined elsewhere | 4 |
| [[N&#x2011;21]](#n21-do-not-use-literal-numbers-for-array-indexes) | Do not use literal numbers for array indexes | 1 |
| [[N&#x2011;22]](#n22-contract-timekeeping-will-break-earlier-than-the-ethereum-network-itself-will-stop-working) | Contract timekeeping will break earlier than the Ethereum network itself will stop working | 12 |
| [[N&#x2011;23]](#n23-events-should-be-emitted-before-external-calls) | Events should be emitted before external calls | 12 |
| [[N&#x2011;24]](#n24-empty-function-body-without-comments) | Empty function body without comments | 1 |
| [[N&#x2011;25]](#n25-requirerevertstatements-should-have-descriptive-reason-strings) | `require()` / `revert()` statements should have descriptive reason strings | 2 |
| [[N&#x2011;26]](#n26-events-are-emitted-without-the-sender-information) | Events are emitted without the sender information | 15 |
| [[N&#x2011;27]](#n27-event-is-missing-indexed-fields) | Event is missing `indexed` fields | 13 |
| [[N&#x2011;28]](#n28-function-state-mutability-can-be-restricted-to-pure) | Function state mutability can be restricted to pure | 5 |
| [[N&#x2011;29]](#n29-contract-implements-interface-without-extending-the-interface) | Contract implements interface without extending the interface | 1 |
| [[N&#x2011;30]](#n30-imports-could-be-organized-more-systematically) | Imports could be organized more systematically | 8 |
| [[N&#x2011;31]](#n31-lines-are-too-long) | Lines are too long | 2 |
| [[N&#x2011;32]](#n32-magic-numbers-should-be-replaced-with-constants) | Magic numbers should be replaced with constants | 28 |
| [[N&#x2011;33]](#n33-expressions-for-constant-values-should-use-immutable-rather-than-constant) | Expressions for constant values should use `immutable` rather than `constant` | 3 |
| [[N&#x2011;34]](#n34-functions-not-used-internally-could-be-marked-external) | Functions not used internally could be marked external | 8 |
| [[N&#x2011;35]](#n35-contracts-containing-only-utility-functions-should-be-made-into-libraries) | Contracts containing only utility functions should be made into libraries | 3 |
| [[N&#x2011;36]](#n36-contracts-should-have-natspec-author-tags) | Contracts should have NatSpec `@author` tags | 10 |
| [[N&#x2011;37]](#n37-contracts-should-have-notice-tags) | Contracts should have `@notice` tags | 5 |
| [[N&#x2011;38]](#n38-contracts-should-have-natspec-title-tags) | Contracts should have NatSpec `@title` tags | 10 |
| [[N&#x2011;39]](#n39-event-declarations-should-have-natspec-descriptions) | Event declarations should have NatSpec descriptions | 26 |
| [[N&#x2011;40]](#n40-natspec-documentation-for-function-is-missing) | NatSpec documentation for function is missing | 44 |
| [[N&#x2011;41]](#n41-functions-missing-natspec-param-tag) | Functions missing NatSpec `@param` tag | 91 |
| [[N&#x2011;42]](#n42-functions-missing-natspec-return-tag) | Functions missing NatSpec `@return` tag | 34 |
| [[N&#x2011;43]](#n43-state-variables-should-have-natspec-descriptions) | State variables should have NatSpec descriptions | 12 |
| [[N&#x2011;44]](#n44-contract-uses-both-requirerevert-as-well-as-custom-errors) | Contract uses both `require()`/`revert()` as well as custom errors | 1 |
| [[N&#x2011;45]](#n45-functions-and-modifiers-should-be-named-in-mixedcase-style) | Functions and modifiers should be named in mixedCase style | 1 |
| [[N&#x2011;46]](#n46-variable-names-for-immutables-should-use-upper_case_with_underscores) | Variable names for `immutable`s should use UPPER_CASE_WITH_UNDERSCORES | 1 |
| [[N&#x2011;47]](#n47-order-of-contract-layout-does-not-follow-the-solidity-style-guide) | Order of contract layout does not follow the Solidity Style Guide | 14 |
| [[N&#x2011;48]](#n48-missing-zero-address-check-in-functions-with-address-parameters) | Missing zero address check in functions with address parameters | 19 |
| [[N&#x2011;49]](#n49-named-imports-of-parent-contracts-are-missing) | Named imports of parent contracts are missing | 15 |
| [[N&#x2011;50]](#n50-constants-should-be-put-on-the-left-side-of-comparisons) | Constants should be put on the left side of comparisons | 66 |
| [[N&#x2011;51]](#n51-put-all-system-wide-constants-in-one-file) | Put all system-wide constants in one file | 9 |
| [[N&#x2011;52]](#n52-else-block-not-required) | `else`-block not required | 3 |
| [[N&#x2011;53]](#n53-redundant-return-statement-in-a-function-with-named-return-variables) | Redundant return statement in a function with named return variables | 1 |
| [[N&#x2011;54]](#n54-large-multiples-of-ten-should-use-scientific-notation) | Large multiples of ten should use scientific notation | 2 |
| [[N&#x2011;55]](#n55-high-cyclomatic-complexity) | High cyclomatic complexity | 3 |
| [[N&#x2011;56]](#n56-typos) | Typos | 6 |
| [[N&#x2011;57]](#n57-consider-bounding-input-array-length) | Consider bounding input array length | 7 |
| [[N&#x2011;58]](#n58-unnecessary-casting) | Unnecessary casting | 3 |
| [[N&#x2011;59]](#n59-unused-contract-variables) | Unused contract variables | 1 |
| [[N&#x2011;60]](#n60-unused-named-return) | Unused named return | 12 |
| [[N&#x2011;61]](#n61-use-delete-instead-of-assigning-values-to-false) | Use delete instead of assigning values to `false` | 1 |
| [[N&#x2011;62]](#n62-consider-using-delete-rather-than-assigning-zero-to-clear-values) | Consider using `delete` rather than assigning zero to clear values | 5 |
| [[N&#x2011;63]](#n63-use-the-latest-solidity-version) | Use the latest Solidity version | 10 |
| [[N&#x2011;64]](#n64-named-mappings-are-recommended) | Named mappings are recommended | 9 |
| [[N&#x2011;65]](#n65-use-uint256int256-instead-of-uintint) | Use `uint256`/`int256` instead of `uint`/`int` | 1 |
| [[N&#x2011;66]](#n66-using-underscore-at-the-end-of-variable-name) | Using underscore at the end of variable name | 27 |
| [[N&#x2011;67]](#n67-use-a-struct-to-encapsulate-multiple-function-parameters) | Use a struct to encapsulate multiple function parameters | 2 |
| [[N&#x2011;68]](#n68-addresses-shouldnt-be-hard-coded) | Addresses shouldn't be hard-coded | 1 |
| [[N&#x2011;69]](#n69-events-that-mark-critical-parameter-changes-should-contain-both-the-old-and-the-new-value) | Events that mark critical parameter changes should contain both the old and the new value | 1 |
| [[N&#x2011;70]](#n70-contract-variables-should-have-comments) | Contract variables should have comments | 4 |
| [[N&#x2011;71]](#n71-modifier-declarations-should-have-natspec-descriptions) | Modifier declarations should have NatSpec descriptions | 6 |
| [[N&#x2011;72]](#n72-empty-bytes-check-is-missing) | Empty bytes check is missing | 9 |
| [[N&#x2011;73]](#n73-contract-functions-should-use-an-interface) | Contract functions should use an `interface` | 52 |
| [[N&#x2011;74]](#n74-dont-define-functions-with-the-same-name-in-a-contract) | Don't define functions with the same name in a contract | 4 |
| [[N&#x2011;75]](#n75-assembly-block-creates-dirty-bits) | Assembly block creates dirty bits | 2 |
| [[N&#x2011;76]](#n76-multiple-mappings-with-same-keys-can-be-combined-into-a-single-struct-mapping-for-readability) | Multiple mappings with same keys can be combined into a single struct mapping for readability | 2 |
| [[N&#x2011;77]](#n77-control-structures-do-not-follow-the-solidity-style-guide) | Control structures do not follow the Solidity Style Guide | 26 |
| [[N&#x2011;78]](#n78-do-not-cache-constants) | Do not cache constants | 3 |
| [[N&#x2011;79]](#n79-function-state-mutability-can-be-restricted-to-view) | Function state mutability can be restricted to view | 2 |
| [[N&#x2011;80]](#n80-missing-event-for-critical-changes) | Missing event for critical changes | 1 |
| [[N&#x2011;81]](#n81-non-assembly-method-available) | Non-assembly method available | 3 |
| [[N&#x2011;82]](#n82-duplicated-requirerevert-checks-should-be-refactored) | Duplicated `require()`/`revert()` checks should be refactored | 11 |
| [[N&#x2011;83]](#n83-consider-adding-emergency-stop-functionality) | Consider adding emergency-stop functionality | 3 |
| [[N&#x2011;84]](#n84-avoid-the-use-of-sensitive-terms) | Avoid the use of sensitive terms | 1 |
| [[N&#x2011;85]](#n85-enable-ir-based-code-generation) | Enable IR-based code generation | 1 |
| [[N&#x2011;86]](#n86-contracts-should-have-natspec-dev-tags) | Contracts should have NatSpec `@dev` tags | 9 |
| [[N&#x2011;87]](#n87-error-declarations-should-have-natspec-descriptions) | Error declarations should have NatSpec descriptions | 55 |
| [[N&#x2011;88]](#n88-functions-should-have-notice-tags) | Functions should have `@notice` tags | 44 |
| [[N&#x2011;89]](#n89-contracts-should-have-full-test-coverage) | Contracts should have full test coverage | 1 |
| [[N&#x2011;90]](#n90-large-or-complicated-code-bases-should-implement-invariant-tests) | Large or complicated code bases should implement invariant tests | 1 |
| [[N&#x2011;91]](#n91-top-level-declarations-should-be-separated-by-at-least-two-lines) | Top-level declarations should be separated by at least two lines | 36 |
| [[N&#x2011;92]](#n92-consider-adding-formal-verification-proofs) | Consider adding formal verification proofs | 10 |
| [[N&#x2011;93]](#n93-prevent-re-setting-a-state-variable-with-the-same-value) | Prevent re-setting a state variable with the same value | 3 |

### Gas Optimizations

Total **497 instances** over **49 issues**with **259942** gas saved:

|ID|Issue|Instances|Gas|
|:--:|:---|:--:|:--:|
| [[G&#x2011;01]](#g01-the-arraylength-should-be-cached-outside-of-the-for-loop) | The `<array>.length` should be cached outside of the `for`-loop | 7 | 21 |
| [[G&#x2011;02]](#g02-use-shift-right-instead-of-division-if-possible) | Use shift right instead of division if possible | 1 | 20 |
| [[G&#x2011;03]](#g03-use-storage-instead-of-memory-for-structsarrays) | Use `storage` instead of `memory` for structs/arrays | 6 | 25200 |
| [[G&#x2011;04]](#g04-using-private-for-constants-saves-gas) | Using `private` for constants saves gas | 1 | 3406 |
| [[G&#x2011;05]](#g05-constructors-can-be-marked-as-payable-to-save-deployment-gas) | Constructors can be marked as payable to save deployment gas | 5 | 105 |
| [[G&#x2011;06]](#g06-state-variables-only-set-in-their-definitions-should-be-declared-constant) | State variables only set in their definitions should be declared `constant` | 3 | 6291 |
| [[G&#x2011;07]](#g07-consider-using-erc721a-instead-of-erc721) | Consider using `ERC721A` instead of `ERC721` | 1 | - |
| [[G&#x2011;08]](#g08-using-constants-directly-rather-than-caching-the-value-saves-gas) | Using `constant`s directly, rather than caching the value, saves gas | 3 | - |
| [[G&#x2011;09]](#g09-dont-caching-global-special-variables) | Don't caching global special variables | 1 | 12 |
| [[G&#x2011;10]](#g10-do-not-cache-state-variables-that-are-used-only-once) | Do not cache state variables that are used only once | 3 | 9 |
| [[G&#x2011;11]](#g11-do-not-calculate-constants) | Do not calculate constants | 1 | - |
| [[G&#x2011;12]](#g12-use-local-variables-for-emitting) | Use local variables for emitting | 2 | 200 |
| [[G&#x2011;13]](#g13-contract-storage-can-use-fewer-slots-by-changing-the-order-of-state-variables) | Contract storage can use fewer slots by changing the order of state variables | 2 | 40000 |
| [[G&#x2011;14]](#g14-internal-functions-only-called-once-can-be-inlined-to-save-gas) | `internal` functions only called once can be inlined to save gas | 1 | 30 |
| [[G&#x2011;15]](#g15-inline-modifiers-that-are-only-used-once-to-save-gas) | Inline `modifier`s that are only used once, to save gas | 5 | - |
| [[G&#x2011;16]](#g16-private-functions-only-used-once-can-be-inlined-to-save-gas) | Private functions only used once can be inlined to save gas | 4 | 120 |
| [[G&#x2011;17]](#g17-inverting-the-condition-of-an-if-else-statement-wastes-gas) | Inverting the condition of an `if`-`else`-statement wastes gas | 1 | 3 |
| [[G&#x2011;18]](#g18-initializers-can-be-marked-as-payable-to-save-deployment-gas) | Initializers can be marked as payable to save deployment gas | 4 | 84 |
| [[G&#x2011;19]](#g19-functions-that-revert-when-called-by-normal-users-can-be-marked-payable) | Functions that revert when called by normal users can be marked `payable` | 15 | 315 |
| [[G&#x2011;20]](#g20-use-sx--sx--y-instead-of-sx--y-for-memory-structs) | Use `s.x = s.x + y` instead of `s.x += y` for memory structs | 1 | 100 |
| [[G&#x2011;21]](#g21-use-x--x--y-instead-of-x--y-for-state-variables) | Use `x = x + y` instead of `x += y` for state variables | 4 | 40 |
| [[G&#x2011;22]](#g22-operator--costs-less-gas-than-operator-) | Operator `>=`/`<=` costs less gas than operator `>`/`<` | 45 | 135 |
| [[G&#x2011;23]](#g23-usage-of-intsuints-smaller-than-32-bytes-incurs-overhead) | Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead | 149 | 8195 |
| [[G&#x2011;24]](#g24-using-a-double-if-statement-instead-of-a-logical-and) | Using a double `if` statement instead of a logical AND(`&&`) | 17 | 510 |
| [[G&#x2011;25]](#g25-divisions-can-be-unchecked-to-save-gas) | Divisions can be unchecked to save gas | 14 | 280 |
| [[G&#x2011;26]](#g26-increments-can-be-unchecked-to-save-gas) | Increments can be `unchecked` to save gas | 10 | 600 |
| [[G&#x2011;27]](#g27-unused-internal-functions-should-be-removed-to-save-deployment-gas) | Unused `internal` functions should be removed to save deployment gas | 1 | - |
| [[G&#x2011;28]](#g28-use-assembly-to-validate-msgsender) | Use assembly to validate `msg.sender` | 9 | 108 |
| [[G&#x2011;29]](#g29-using-assembly-to-check-for-zero-can-save-gas) | Using assembly to check for zero can save gas | 43 | 258 |
| [[G&#x2011;30]](#g30-use-uint2561uint2562-instead-of-truefalse-to-save-gas-for-changes) | Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes | 7 | 119700 |
| [[G&#x2011;31]](#g31-use-selfbalance-instead-of-addressxbalance) | Use `selfbalance()` instead of `address(x).balance` | 1 | 15 |
| [[G&#x2011;32]](#g32-unlimited-gas-consumption-risk-due-to-external-call-recipients) | Unlimited gas consumption risk due to external call recipients | 2 | - |
| [[G&#x2011;33]](#g33-optimize-names-to-save-gas) | Optimize names to save gas | 7 | 154 |
| [[G&#x2011;34]](#g34-newer-versions-of-solidity-are-more-gas-efficient) | Newer versions of solidity are more gas efficient | 10 | - |
| [[G&#x2011;35]](#g35-avoid-updating-storage-when-the-value-hasnt-changed) | Avoid updating storage when the value hasn't changed | 5 | 4000 |
| [[G&#x2011;36]](#g36-same-cast-is-done-multiple-times) | Same cast is done multiple times | 3 | - |
| [[G&#x2011;37]](#g37-state-variables-that-are-used-multiple-times-in-a-function-should-be-cached-in-stack-variables) | State variables that are used multiple times in a function should be cached in stack variables | 26 | 2522 |
| [[G&#x2011;38]](#g38-require-or-revert-statements-that-check-input-arguments-should-be-at-the-top-of-the-function) | `require()` or `revert()` statements that check input arguments should be at the top of the function | 1 | - |
| [[G&#x2011;39]](#g39-contracts-can-use-fewer-storage-slots-by-truncating-state-variables) | Contracts can use fewer storage slots by truncating state variables | 2 | 40000 |
| [[G&#x2011;40]](#g40-redundant-state-variable-getters) | Redundant state variable getters | 1 | - |
| [[G&#x2011;41]](#g41-using-constants-instead-of-enum-can-save-gas) | Using `constant`s instead of `enum` can save gas | 3 | - |
| [[G&#x2011;42]](#g42-use-assembly-to-emit-events) | Use assembly to emit events | 31 | 1178 |
| [[G&#x2011;43]](#g43-use-calldata-instead-of-memory-for-immutable-arguments) | Use `calldata` instead of `memory` for immutable arguments | 15 | 4500 |
| [[G&#x2011;44]](#g44-consider-activating-via-ir-for-deploying) | Consider activating via-ir for deploying | 1 | - |
| [[G&#x2011;45]](#g45-using-bools-for-storage-incurs-overhead) | Using `bool`s for storage incurs overhead | 7 | 700 |
| [[G&#x2011;46]](#g46-the-result-of-a-function-call-should-be-cached-rather-than-re-calling-the-function) | The result of a function call should be cached rather than re-calling the function | 7 | 700 |
| [[G&#x2011;47]](#g47-multiple-accesses-of-the-same-mappingarray-keyindex-should-be-cached) | Multiple accesses of the same mapping/array key/index should be cached | 6 | 252 |
| [[G&#x2011;48]](#g48-multiple-mappings-can-be-replaced-with-a-single-struct-mapping) | Multiple mappings can be replaced with a single struct mapping | 2 | 84 |
| [[G&#x2011;49]](#g49-state-variable-access-within-a-loop) | State variable access within a loop | 1 | 97 |

### Disputed Issues

The issues below may be reported by other bots/wardens, but either the rule or the specified instances are invalid.

Total **430 instances** over **65 issues**:

|ID|Issue|Instances|
|:--:|:---|:--:|
| [[D&#x2011;01]](#d01-visibility-should-be-set-explicitly-rather-than-defaulting-to-internal) | ~~Visibility should be set explicitly rather than defaulting to `internal`~~ | 2 |
| [[D&#x2011;02]](#d02-event-names-should-use-camelcase) | ~~Event names should use CamelCase~~ | 31 |
| [[D&#x2011;03]](#d03-use-of-override-is-unnecessary) | ~~Use of `override` is unnecessary~~ | 4 |
| [[D&#x2011;04]](#d04-assembly-blocks-should-have-extensive-comments) | ~~Assembly blocks should have extensive comments~~ | 4 |
| [[D&#x2011;05]](#d05-cast-to-bytes-or-bytes32-for-clearer-semantic-meaning) | ~~Cast to `bytes` or `bytes32` for clearer semantic meaning~~ | 1 |
| [[D&#x2011;06]](#d06-avoid-double-casting) | ~~Avoid double casting~~ | 6 |
| [[D&#x2011;07]](#d07-dont-emit-events-inside-a-loop) | ~~Don't emit events inside a loop~~ | 2 |
| [[D&#x2011;08]](#d08-function-can-return-unassigned-variable) | ~~Function can return unassigned variable~~ | 1 |
| [[D&#x2011;09]](#d09-internal-functions-only-called-once-can-be-inlined-to-save-gas) | ~~`internal` functions only called once can be inlined to save gas~~ | 7 |
| [[D&#x2011;10]](#d10-inline-modifiers-that-are-only-used-once-to-save-gas) | ~~Inline `modifier`s that are only used once, to save gas~~ | 1 |
| [[D&#x2011;11]](#d11-private-functions-only-used-once-can-be-inlined-to-save-gas) | ~~Private functions only used once can be inlined to save gas~~ | 4 |
| [[D&#x2011;12]](#d12-external-call-recipient-can-consume-all-remaining-gas) | ~~External call recipient can consume all remaining gas~~ | 1 |
| [[D&#x2011;13]](#d13-magic-numbers-should-be-replaced-with-constants) | ~~Magic numbers should be replaced with constants~~ | 5 |
| [[D&#x2011;14]](#d14-change-public-function-visibility-to-external-to-save-gas) | ~~Change `public` function visibility to `external` to save gas~~ | 8 |
| [[D&#x2011;15]](#d15-natspec-contract-declarations-should-have-notice-tags) | ~~NatSpec: Contract declarations should have `@notice` tags~~ | 5 |
| [[D&#x2011;16]](#d16-functions-missing-natspec-param-tag) | ~~Functions missing NatSpec `@param` tag~~ | 6 |
| [[D&#x2011;17]](#d17-natspec-function-return-is-missing-) | ~~NatSpec: Function `@return` is missing ~~ | 3 |
| [[D&#x2011;18]](#d18-variables-should-be-named-in-mixedcase-style) | ~~Variables should be named in mixedCase style~~ | 27 |
| [[D&#x2011;19]](#d19-not-initializing-local-variables-to-zero-saves-gas) | ~~Not initializing local variables to zero saves gas~~ | 4 |
| [[D&#x2011;20]](#d20-safemint-should-be-used-in-place-of-mint) | ~~safeMint should be used in place of mint~~ | 1 |
| [[D&#x2011;21]](#d21-x--y-is-more-expensive-than-x--x--y-for-state-variables) | ~~`x += y` is more expensive than `x = x + y` for state variables~~ | 1 |
| [[D&#x2011;22]](#d22-empty-receivefallback-function) | ~~Empty `receive()`/`fallback()` function~~ | 1 |
| [[D&#x2011;23]](#d23-remove-empty-functions-to-save-gas) | ~~Remove empty functions to save gas~~ | 1 |
| [[D&#x2011;24]](#d24-unused-non-constant-state-variables-waste-gas) | ~~Unused non-constant state variables waste gas~~ | 2 |
| [[D&#x2011;25]](#d25-safetransferlib-does-not-ensure-that-the-token-contract-exists) | ~~`SafeTransferLib` does not ensure that the token contract exists~~ | 2 |
| [[D&#x2011;26]](#d26-file-allows-a-version-of-solidity-that-is-susceptible-to-an-assembly-storage-bug) | ~~File allows a version of solidity that is susceptible to an assembly storage bug~~ | 1 |
| [[D&#x2011;27]](#d27-solidity-version-0820-or-above-may-not-work-on-other-chains-due-to-push0) | ~~Solidity version 0.8.20 or above may not work on other chains due to PUSH0~~ | 10 |
| [[D&#x2011;28]](#d28-spdx-identifier-should-be-the-in-the-first-line-of-a-solidity-file) | ~~SPDX identifier should be the in the first line of a solidity file~~ | 10 |
| [[D&#x2011;29]](#d29-timestamp-may-be-manipulation) | ~~Timestamp may be manipulation~~ | 19 |
| [[D&#x2011;30]](#d30-numbers-downcast-to-addresses-may-result-in-collisions) | ~~Numbers downcast to `address`es may result in collisions~~ | 65 |
| [[D&#x2011;31]](#d31-unused-contract-variables) | ~~Unused contract variables~~ | 2 |
| [[D&#x2011;32]](#d32-unused-named-return) | ~~Unused named return~~ | 6 |
| [[D&#x2011;33]](#d33-unused-named-return-variables-without-optimizer-waste-gas) | ~~Unused named return variables without optimizer waste gas~~ | 18 |
| [[D&#x2011;34]](#d34-low-level-call-can-be-optimized-with-assembly) | ~~Low level `call` can be optimized with assembly~~ | 6 |
| [[D&#x2011;35]](#d35-use-assembly-to-write-addresscontract-type-storage-values) | ~~Use `assembly` to write address/contract type storage values~~ | 4 |
| [[D&#x2011;36]](#d36-using-bitmap-to-store-bool-states-can-save-gas) | ~~Using bitmap to store bool states can save gas~~ | 2 |
| [[D&#x2011;37]](#d37-using-delete-statement-can-save-gas) | ~~Using `delete` statement can save gas~~ | 6 |
| [[D&#x2011;38]](#d38-use--0-or--0-for-unsigned-integer-comparison) | ~~Use `!= 0` or `== 0` for unsigned integer comparison~~ | 10 |
| [[D&#x2011;39]](#d39-avoid-contract-existence-checks-by-using-low-level-calls) | ~~Avoid contract existence checks by using low level calls~~ | 34 |
| [[D&#x2011;40]](#d40-consider-using-named-mappings) | ~~Consider using named mappings~~ | 1 |
| [[D&#x2011;41]](#d41-functions-with-array-parameters-should-have-length-checks-in-place) | ~~Functions with array parameters should have length checks in place~~ | 13 |
| [[D&#x2011;42]](#d42-events-that-mark-critical-parameter-changes-should-contain-both-the-old-and-the-new-value) | ~~Events that mark critical parameter changes should contain both the old and the new value~~ | 7 |
| [[D&#x2011;43]](#d43-unsafe-solidity-low-level-call-can-cause-gas-grief-attack) | ~~Unsafe solidity low-level call can cause gas grief attack~~ | 1 |
| [[D&#x2011;44]](#d44-unlimited-gas-consumption-risk-due-to-external-call-recipients) | ~~Unlimited gas consumption risk due to external call recipients~~ | 1 |
| [[D&#x2011;45]](#d45-state-variables-should-include-comments) | ~~State variables should include comments~~ | 8 |
| [[D&#x2011;46]](#d46-safetransfer-function-does-not-check-for-contract-existence) | ~~`safeTransfer` function does not check for contract existence~~ | 9 |
| [[D&#x2011;47]](#d47-functions-calling-contractsaddresses-with-transfer-hooks-should-be-protected-by-reentrancy-guard) | ~~Functions calling contracts/addresses with transfer hooks should be protected by reentrancy guard~~ | 3 |
| [[D&#x2011;48]](#d48-assembly-block-creates-dirty-bits) | ~~Assembly block creates dirty bits~~ | 7 |
| [[D&#x2011;49]](#d49-avoid-updating-storage-when-the-value-hasnt-changed) | ~~Avoid updating storage when the value hasn't changed~~ | 1 |
| [[D&#x2011;50]](#d50-missing-contract-existence-checks-before-low-level-calls) | ~~Missing contract existence checks before low-level calls~~ | 1 |
| [[D&#x2011;51]](#d51-require-or-revert-statements-that-check-input-arguments-should-be-at-the-top-of-the-function) | ~~`require()` or `revert()` statements that check input arguments should be at the top of the function~~ | 1 |
| [[D&#x2011;52]](#d52-inconsistent-spacing-in-comments) | ~~Inconsistent spacing in comments~~ | 3 |
| [[D&#x2011;53]](#d53-keccak256-should-only-need-to-be-called-on-a-specific-string-literal-once) | ~~`keccak256()` should only need to be called on a specific string literal once~~ | 3 |
| [[D&#x2011;54]](#d54-use-safecast-to-downcast-safely) | ~~Use `SafeCast` to downcast safely~~ | 3 |
| [[D&#x2011;55]](#d55-use-assembly-to-compute-hashes-to-save-gas) | ~~Use assembly to compute hashes to save gas~~ | 5 |
| [[D&#x2011;56]](#d56-consider-adding-emergency-stop-functionality) | ~~Consider adding emergency-stop functionality~~ | 4 |
| [[D&#x2011;57]](#d57-use-descriptive-constant-instead-of-0-as-a-parameter) | ~~Use descriptive constant instead of 0 as a parameter~~ | 7 |
| [[D&#x2011;58]](#d58-prevent-re-setting-a-state-variable-with-the-same-value) | ~~Prevent re-setting a state variable with the same value~~ | 1 |
| [[D&#x2011;59]](#d59-calculations-should-be-memoized-rather-than-re-calculating-them) | ~~Calculations should be memoized rather than re-calculating them~~ | 16 |
| [[D&#x2011;60]](#d60-state-variable-access-within-a-loop) | ~~State variable access within a loop~~ | 2 |
| [[D&#x2011;61]](#d61-loss-of-precision-in-divisions) | ~~Loss of precision in divisions~~ | 2 |
| [[D&#x2011;62]](#d62-the-remaining-eth-may-be-locked-in-the-contract-after-call) | ~~The remaining ETH may be locked in the contract after call~~ | 2 |
| [[D&#x2011;63]](#d63-unchecked-blocks-with-additionsmultiplications-may-overflow) | ~~`unchecked` blocks with additions/multiplications may overflow~~ | 1 |
| [[D&#x2011;64]](#d64-numeric-values-having-to-do-with-time-should-use-time-units-for-readability) | ~~Numeric values having to do with time should use time units for readability~~ | 2 |
| [[D&#x2011;65]](#d65-contracts-are-vulnerable-to-rebasing-accounting-related-issues) | ~~Contracts are vulnerable to rebasing accounting-related issues~~ | 3 |

## Medium Issues

### [M&#x2011;01] Centralization risk for privileged functions

Contracts with privileged functions need owner/admin to be trusted not to perform malicious updates or drain funds. This may also cause a single point failure.

There are 5 instances:

- *PartyGovernance.sol* ( [#L457](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L457), [#L665](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L665), [#L841-L845](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L841-L845), [#L855](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L855) ):

```solidity
457:     function abdicateHost(address newPartyHost) external {

665:     function veto(uint256 proposalId) external {

841:     function emergencyExecute(
842:         address targetAddress,
843:         bytes calldata targetCallData,
844:         uint256 amountEth
845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {

855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {
```

- *PartyGovernanceNFT.sol* ( [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L318) ):

```solidity
318:     function setRageQuit(uint40 newRageQuitTimestamp) external {
```

### [M&#x2011;02] Use `safeTransferFrom()` instead of `transferFrom()` to transfer NFTs

Using `transferFrom()` can cause the NFT to be permanently lost. The [`safeTransferFrom()`](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/f347b410cf6aeeaaf5197e1fece139c793c03b2b/contracts/token/ERC721/IERC721.sol#L56-L70) can check that the contract recipients are aware of the ERC721 protocol to prevent tokens from being locked forever.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L454](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L454) ):

```solidity
454:         super.transferFrom(owner, to, tokenId);
```

## Low Issues

### [L&#x2011;01] Use of `tx.origin` is unsafe in almost every context

According to [Vitalik Buterin](https://ethereum.stackexchange.com/questions/196/how-do-i-make-my-dapp-serenity-proof), contracts should _not_ `assume that tx.origin will continue to be usable or meaningful`. An example of this is [EIP-3074](https://eips.ethereum.org/EIPS/eip-3074#allowing-txorigin-as-signer-1) which explicitly mentions the intention to change its semantics when it's used with new op codes. There have also been calls to [remove](https://github.com/ethereum/solidity/issues/683) `tx.origin`, and there are [security issues](solidity.readthedocs.io/en/v0.4.24/security-considerations.html#tx-origin) associated with using it for authorization. For these reasons, it's best to completely avoid the feature.

There is 1 instance:

- *ProposalExecutionEngine.sol* ( [#L234](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L234) ):

```solidity
234:         if (tx.origin == address(0)) {
```

### [L&#x2011;02] Use of `ecrecover` is susceptible to signature malleability

The built-in EVM precompile `ecrecover` is susceptible to signature malleability, which could lead to replay attacks.
References: https://swcregistry.io/docs/SWC-117, https://swcregistry.io/docs/SWC-121, and https://medium.com/cryptronics/signature-replay-vulnerabilities-in-smart-contracts-3b6f7596df57.

While this is not immediately exploitable, this may become a vulnerability if used elsewhere.

There is 1 instance:

- *OffChainSignatureValidator.sol* ( [#L58](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L58) ):

```solidity
58:         address signer = ecrecover(hash, v, r, s);
```

### [L&#x2011;03] Function can return unassigned variable

Make sure that functions with a return value always return a valid and assigned value. Even if the default value is as expected, it should be assigned with the default value for code clarity and to reduce confusion.

There is 1 instance:

- *PartyGovernance.sol* ( [#L932](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L932) ):

```solidity
/// @audit snap is unassigned
932:         return snap;
```

### [L&#x2011;04] NFT doesn't handle hard forks

When there are hard forks, users often have to go through [many hoops](https://twitter.com/elerium115/status/1558471934924431363) to ensure that they control ownership on every fork. Consider adding `require(1 == chain.chainId)`, or the chain ID of whichever chain you prefer, to the functions below, or at least include the chain ID in the URI, so that there is no confusion about which chain is the owner of the NFT.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L123-L126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123-L126) ):

```solidity
123:     function tokenURI(uint256) public view override returns (string memory) {
124:         _delegateToRenderer();
125:         return ""; // Just to make the compiler happy.
126:     }
```

### [L&#x2011;05] Initializers can be front-run

Initializers could be front-run, allowing an attacker to either set their own values, take ownership of the contract, and in the best case forcing a re-deployment.

There are 4 instances:

- *ETHCrowdfundBase.sol* ( [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140) ):

```solidity
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {
```

- *InitialETHCrowdfund.sol* ( [#L108](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L108) ):

```solidity
108:     function initialize(
```

- *PartyGovernanceNFT.sol* ( [#L81](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81) ):

```solidity
81:     function _initialize(
```

- *ProposalExecutionEngine.sol* ( [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L123) ):

```solidity
123:     function initialize(
```

### [L&#x2011;06] External call recipient can consume all remaining gas

There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas(`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379) ):

```solidity
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *PartyGovernance.sol* ( [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846) ):

```solidity
846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

### [L&#x2011;07] Missing disallow list for `ERC721`

Recently, there has been an increase in the theft of NFTs. These stolen NFTs are then added to platforms where they can be easily converted into liquidity.

Some popular marketplaces(e.g. Opensea), have already taken steps to combat this problem by introducing a disallow list feature. This means that if an NFT is reported as stolen, it won't be listed or sold on their platform.
This may increase the centralization of the project, but it can help solve this problem if it is a concern.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

### [L&#x2011;08] Missing zero address check in constructor

Constructors often take address parameters to initialize important components of a contract, such as owner or linked contracts. However, without a checking, there's a risk that an address parameter could be mistakenly set to the zero address (0x0). This could be due to an error or oversight during contract deployment. A zero address in a crucial role can cause serious issues, as it cannot perform actions like a normal address, and any funds sent to it will be irretrievable. It's therefore crucial to include a zero address check in constructors to prevent such potential problems. If a zero address is detected, the constructor should revert the transaction.

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L134) ):

```solidity
/// @audit `globals not checked`
134:     constructor(IGlobals globals) {
```

- *PartyGovernance.sol* ( [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265) ):

```solidity
/// @audit `globals not checked`
265:     constructor(IGlobals globals) {
```

### [L&#x2011;09] Missing zero address check in initializer

<details>
<summary>There are 4 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L108-L113](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L108-L113) ):

```solidity
/// @audit `customMetadataProvider not checked`
108:     function initialize(
109:         InitialETHCrowdfundOptions memory crowdfundOpts,
110:         ETHPartyOptions memory partyOpts,
111:         MetadataProvider customMetadataProvider,
112:         bytes memory customMetadata
113:     ) external payable onlyInitialize {
```

- *PartyGovernance.sol* ( [#L270-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270-L275) ):

```solidity
/// @audit `preciousTokens not checked`
270:     function _initialize(
271:         GovernanceOpts memory govOpts,
272:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
273:         IERC721[] memory preciousTokens,
274:         uint256[] memory preciousTokenIds
275:     ) internal virtual {
```

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
/// @audit `preciousTokens not checked`
/// @audit `authorities not checked`
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

</details>

### [L&#x2011;10] NFT does not support hard forks

To ensure clarity regarding the ownership of the NFT on a specific chain, it is recommended to add `require(block.chainid == 1, "Invalid Chain")` or the desired chain ID in the functions below.

Alternatively, consider including the chain ID in the URI itself. By doing so, any confusion regarding the chain responsible for owning the NFT will be eliminated.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L123-L126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123-L126) ):

```solidity
123:     function tokenURI(uint256) public view override returns (string memory) {
124:         _delegateToRenderer();
125:         return ""; // Just to make the compiler happy.
126:     }
```

### [L&#x2011;11] Named return variable used before assignment

As no value is written to the variable, the default value is always read. This is usually due to a bug in the code logic that causes an invalid value to be used.

There is 1 instance:

- *PartyGovernance.sol* ( [#L932](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L932) ):

```solidity
/// @audit snap
932:         return snap;
```

### [L&#x2011;12] Revert on transfer to the zero address

It's good practice to revert a token transfer transaction if the recipient's address is the zero address. This can prevent unintentional transfers to the zero address due to accidental operations or programming errors. Many token contracts implement such a safeguard, such as [OpenZeppelin - ERC20](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/9e3f4d60c581010c4a3979480e07cc7752f124cc/contracts/token/ERC20/ERC20.sol#L232), [OpenZeppelin - ERC721](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/9e3f4d60c581010c4a3979480e07cc7752f124cc/contracts/token/ERC721/ERC721.sol#L142).

There are 3 instances:

- *PartyGovernanceNFT.sol* ( [#L454](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L454), [#L461](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L461), [#L473](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L473) ):

```solidity
454:         super.transferFrom(owner, to, tokenId);

461:         super.safeTransferFrom(owner, to, tokenId);

473:         super.safeTransferFrom(owner, to, tokenId, data);
```

### [L&#x2011;13] Array is `push()`ed but not `pop()`ed

Array entries are added but are never removed. Consider whether this should be the case, or whether there should be a maximum, or whether old entries should be removed. Cases where there are specific potential problems will be flagged separately under a different issue.

There is 1 instance:

- *PartyGovernance.sol* ( [#L1040](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1040) ):

```solidity
1040:         voterSnaps.push(snap);
```

### [L&#x2011;14] State variables not limited to reasonable values

Consider adding appropriate minimum/maximum value checks to ensure that the following state variables can never be used to excessively harm users, including via griefing.

There are 3 instances:

- *PartyGovernanceNFT.sol* ( [#L100](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L100), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L335) ):

```solidity
100:         rageQuitTimestamp = rageQuitTimestamp_;

335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);
```

- *OffChainSignatureValidator.sol* ( [#L87](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L87) ):

```solidity
87:         signingThersholdBps[party] = thresholdBps;
```

### [L&#x2011;15] Tokens may be minted to the zero address

The target address is not checked in the mint function.

<details>
<summary>There is 1 instance (click to show):</summary>

- *PartyGovernanceNFT.sol* ( [#L166-L202](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L202) ):

```solidity
166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {
171:         _assertAuthority();
172:         uint96 mintedVotingPower_ = mintedVotingPower;
173:         uint96 totalVotingPower = _getSharedProposalStorage().governanceValues.totalVotingPower;
174: 
175:         // Cap voting power to remaining unminted voting power supply.
176:         uint96 votingPower_ = votingPower.safeCastUint256ToUint96();
177:         // Allow minting past total voting power if minting party cards for
178:         // initial crowdfund when there is no total voting power.
179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {
180:             unchecked {
181:                 votingPower_ = totalVotingPower - mintedVotingPower_;
182:             }
183:         }
184: 
185:         // Update state.
186:         unchecked {
187:             tokenId = ++tokenCount;
188:         }
189:         mintedVotingPower += votingPower_;
190:         votingPowerByTokenId[tokenId] = votingPower_;
191: 
192:         emit PartyCardIntrinsicVotingPowerSet(tokenId, votingPower_);
193: 
194:         // Use delegate from party over the one set during crowdfund.
195:         address delegate_ = delegationsByVoter[owner];
196:         if (delegate_ != address(0)) {
197:             delegate = delegate_;
198:         }
199: 
200:         _adjustVotingPower(owner, votingPower_.safeCastUint96ToInt192(), delegate);
201:         _safeMint(owner, tokenId);
202:     }
```

</details>

### [L&#x2011;16] `tokenURI()` does not follow EIP-721

The [EIP-721](https://github.com/ethereum/EIPs/blob/7500ac4fc1bbdfaf684e7ef851f798f6b667b2fe/EIPS/eip-721.md?plain=1#L189-L193) states that `tokenURI()` should "Throws if `_tokenId` is not a valid NFT", which the code below does not do. If the NFT has not yet been minted, `tokenURI()` should revert.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L123-L126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123-L126) ):

```solidity
123:     function tokenURI(uint256) public view override returns (string memory) {
124:         _delegateToRenderer();
125:         return ""; // Just to make the compiler happy.
126:     }
```

### [L&#x2011;17] Consider implementing two-step procedure for updating protocol addresses

A copy-paste error or a typo may end up bricking protocol functionality, or sending tokens to an address with no known private key. Consider implementing a two-step procedure for updating protocol addresses, where the recipient is set as pending, and must 'accept' the assignment by making an affirmative call. A straight forward way of doing this would be to have the target contracts implement [EIP-165](https://eips.ethereum.org/EIPS/eip-165), and to have the 'set' functions ensure that the recipient is of the right interface type.

There are 3 instances:

- *PartyGovernance.sol* ( [#L457](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L457), [#L841-L845](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L841-L845) ):

```solidity
457:     function abdicateHost(address newPartyHost) external {

841:     function emergencyExecute(
842:         address targetAddress,
843:         bytes calldata targetCallData,
844:         uint256 amountEth
845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {
```

- *PartyGovernanceNFT.sol* ( [#L166-L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L170) ):

```solidity
166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {
```

### [L&#x2011;18] address.transfer() and address.send() should be replace with address.call()

Both of `<address payable>.transfer()` and `<address payable>.send()` will forward 2300 gas stipend, not adjustabl. The limited gas makes it more likely to fail. It is recommended to use `address.call()` instead, like [Address.sendValue()](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/90163661df4f7df22294fcbf82dd3f6bb5547417/contracts/utils/Address.sol#L41)

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L224](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L224) ):

```solidity
224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);
```

### [L&#x2011;19] Vulnerable versions of packages are being used

This project is using specific package versions which are vulnerable to the specific CVEs listed below. Consider switching to more recent versions of these packages that don't have these vulnerabilities.

There is 1 instance:

- Global finding

### [L&#x2011;20] Array length is not checked before access its index

Accessing the elements of the array without checking or ensuring the validity of the access index in advance. It may result in an unexpected out-of-bounds error, or may result in missing elements when trying to traverse the entire array.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L427](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L427) ):

```solidity
427:                     uint256 minAmount = minWithdrawAmounts[i];
```

### [L&#x2011;21] Missing checks for `address(0)` when setting address state variables

<details>
<summary>There are 6 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L135](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L135) ):

```solidity
135:         _GLOBALS = globals;
```

- *InitialETHCrowdfund.sol* ( [#L154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L154) ):

```solidity
154:         gateKeeper = crowdfundOpts.gateKeeper;
```

- *PartyGovernance.sol* ( [#L266](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L266), [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L298) ):

```solidity
266:         _GLOBALS = globals;

298:         feeRecipient = govOpts.feeRecipient;
```

- *PartyGovernanceNFT.sol* ( [#L77](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L77) ):

```solidity
77:         _GLOBALS = globals;
```

- *ProposalExecutionEngine.sol* ( [#L117](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L117) ):

```solidity
117:         _GLOBALS = globals;
```

</details>

### [L&#x2011;22] Unsafe solidity low-level call can cause gas grief attack

Using the low-level calls of a solidity address can leave the contract open to gas grief attacks. These attacks occur when the called contract returns a large amount of data.
So when calling an external contract, it is necessary to check the length of the return data before reading/copying it (using `returndatasize()`).

There are 5 instances:

- *ETHCrowdfundBase.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379) ):

```solidity
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *PartyGovernance.sol* ( [#L823-L825](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L823-L825), [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846), [#L884-L888](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L884-L888) ):

```solidity
823:             (bool success, bytes memory resultData) = (
824:                 address(_getSharedProposalStorage().engineImpl)
825:             ).delegatecall(abi.encodeCall(IProposalExecutionEngine.cancelProposal, (proposalId)));

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

884:             (bool success, bytes memory resultData) = address(
885:                 _getSharedProposalStorage().engineImpl
886:             ).delegatecall(
887:                     abi.encodeCall(IProposalExecutionEngine.executeProposal, (executeParams))
888:                 );
```

- *ProposalStorage.sol* ( [#L47-L49](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L47-L49) ):

```solidity
47:         (bool s, bytes memory r) = address(impl).delegatecall(
48:             abi.encodeCall(IProposalExecutionEngine.initialize, (address(oldImpl), initData))
49:         );
```

### [L&#x2011;23] Constructor / initialization function lacks parameter validation

Constructors and initialization functions play a critical role in contracts by setting important initial states when the contract is first deployed before the system starts. The parameters passed to the constructor and initialization functions directly affect the behavior of the contract / protocol. If incorrect parameters are provided, the system may fail to run, behave abnormally, be unstable, or lack security. Therefore, it's crucial to carefully check each parameter in the constructor and initialization functions. If an exception is found, the transaction should be rolled back.

<details>
<summary>There are 13 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L108-L113](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L108-L113) ):

```solidity
/// @audit `crowdfundOpts`
/// @audit `partyOpts`
/// @audit `customMetadata`
108:     function initialize(
109:         InitialETHCrowdfundOptions memory crowdfundOpts,
110:         ETHPartyOptions memory partyOpts,
111:         MetadataProvider customMetadataProvider,
112:         bytes memory customMetadata
113:     ) external payable onlyInitialize {
```

- *PartyGovernance.sol* ( [#L270-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270-L275) ):

```solidity
/// @audit `proposalEngineOpts`
/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
270:     function _initialize(
271:         GovernanceOpts memory govOpts,
272:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
273:         IERC721[] memory preciousTokens,
274:         uint256[] memory preciousTokenIds
275:     ) internal virtual {
```

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
/// @audit `name_`
/// @audit `symbol_`
/// @audit `governanceOpts`
/// @audit `proposalEngineOpts`
/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
/// @audit `rageQuitTimestamp_`
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

</details>

### [L&#x2011;24] Governance functions should be controlled by time locks

Governance functions (such as upgrading contracts, setting critical parameters) should be controlled using time locks to introduce a delay between a proposal and its execution. This gives users time to exit before a potentially dangerous or malicious operation is applied.

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L318), [#L479](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L479) ):

```solidity
318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

479:     function addAuthority(address authority) external onlySelf {
```

### [L&#x2011;25] Missing contract existence checks before low-level calls

Low-level calls return success if there is no code present at the specified address. In addition to the zero-address checks, add a check to verify that `<address>.code.length > 0`.

There are 5 instances:

- *ETHCrowdfundBase.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379) ):

```solidity
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *PartyGovernance.sol* ( [#L823-L825](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L823-L825), [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846), [#L884-L888](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L884-L888) ):

```solidity
823:             (bool success, bytes memory resultData) = (
824:                 address(_getSharedProposalStorage().engineImpl)
825:             ).delegatecall(abi.encodeCall(IProposalExecutionEngine.cancelProposal, (proposalId)));

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

884:             (bool success, bytes memory resultData) = address(
885:                 _getSharedProposalStorage().engineImpl
886:             ).delegatecall(
887:                     abi.encodeCall(IProposalExecutionEngine.executeProposal, (executeParams))
888:                 );
```

- *ProposalStorage.sol* ( [#L47-L49](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L47-L49) ):

```solidity
47:         (bool s, bytes memory r) = address(impl).delegatecall(
48:             abi.encodeCall(IProposalExecutionEngine.initialize, (address(oldImpl), initData))
49:         );
```

### [L&#x2011;26] Division by zero not prevented

The divisions below take an input parameter that has no zero-value checks, which can cause the functions reverting if zero is passed.

There are 3 instances:

- *ETHCrowdfundBase.sol* ( [#L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L281) ):

```solidity
281:         amount = (votingPower * 1e4) / exchangeRateBps;
```

- *PartyGovernance.sol* ( [#L1115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1115), [#L1134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1134) ):

```solidity
1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);
```

### [L&#x2011;27] External function calls within loops

Calling external functions within loops can easily result in insufficient gas. This greatly increases the likelihood of transaction failures, DOS attacks, and other unexpected actions. It is recommended to limit the number of loops within loops that call external functions, and to limit the gas line for each external call.

<details>
<summary>There are 7 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L214-L220](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L214-L220), [#L261-L267](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L261-L267), [#L358-L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358-L360) ):

```solidity
/// @audit Calling `_contribute()` within `for` loop, it will trigger an external call - `mint()`
214:             votingPowers[i] = _contribute(
215:                 payable(msg.sender),
216:                 args.delegate,
217:                 args.values[i],
218:                 args.tokenIds[i],
219:                 args.gateDatas[i]
220:             );

/// @audit Calling `_contribute()` within `for` loop, it will trigger an external call - `mint()`
261:             votingPowers[i] = _contribute(
262:                 args.recipients[i],
263:                 args.initialDelegates[i],
264:                 args.values[i],
265:                 args.tokenIds[i],
266:                 args.gateDatas[i]
267:             );

/// @audit Calling `call()` within `for` loop
358:             (bool s, bytes memory r) = address(this).call(
359:                 abi.encodeCall(this.refund, (tokenIds[i]))
360:             );
```

- *PartyGovernanceNFT.sol* ( [#L420](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L420), [#L422](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L422), [#L436](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L436), [#L438](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L438) ):

```solidity
/// @audit Calling `transferEth()` within `for` loop, it will trigger an external call - `call()`
420:                         payable(feeRecipient).transferEth(fee);

/// @audit Calling `compatTransfer()` within `for` loop, it will trigger an external call - `call()`
422:                         token.compatTransfer(feeRecipient, fee);

/// @audit Calling `transferEth()` within `for` loop, it will trigger an external call - `call()`
436:                         payable(receiver).transferEth(amount);

/// @audit Calling `compatTransfer()` within `for` loop, it will trigger an external call - `call()`
438:                         token.compatTransfer(receiver, amount);
```

</details>

### [L&#x2011;28] Use `SafeCast` to downcast safely

When a type is downcast to a smaller type, the higher order bits are truncated, effectively applying a modulo to the original value. The loss of data may cause incorrect calculations, unexpected state changes, or other unexpected behavior.
It is recommended to use the [SafeCast library](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/math/SafeCast.sol).

<details>
<summary>There are 8 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L163](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L163) ):

```solidity
/// @audit uint256 -> uint40
163:         expiry = uint40(block.timestamp + opts.duration);
```

- *PartyGovernance.sol* ( [#L565](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L565), [#L820](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L820), [#L954](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L954), [#L988](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L988), [#L1011](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1011), [#L1086](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1086) ):

```solidity
/// @audit uint256 -> uint40
565:                 proposedTime: uint40(block.timestamp),

/// @audit uint256 -> uint40
820:         proposalState.values.completedTime = uint40(block.timestamp | UINT40_HIGH_BIT);

/// @audit uint256 -> uint40
954:             timestamp: uint40(block.timestamp),

/// @audit uint256 -> uint40
988:                 timestamp: uint40(block.timestamp),

/// @audit uint256 -> uint40
1011:                 timestamp: uint40(block.timestamp),

/// @audit uint256 -> uint40
1086:         uint40 t = uint40(block.timestamp);
```

- *OffChainSignatureValidator.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L59) ):

```solidity
/// @audit uint256 -> uint40
59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *
```

</details>

### [L&#x2011;29] Use descriptive constant instead of 0 as a parameter

Passing `0` or `0x0` as a function argument can sometimes result in a security issue(e.g. passing zero as the slippage parameter). A historical example is the infamous `0x0` address bug where numerous tokens were lost. This happens because `0` can be interpreted as an uninitialized `address`, leading to transfers to the `0x0` `address`, effectively burning tokens. Moreover, `0` as a denominator in division operations would cause a runtime exception. It's also often indicative of a logical error in the caller's code.

Consider using a constant variable with a descriptive name, so it's clear that the argument is intentionally being used, and for the right reasons.

<details>
<summary>There are 9 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L144-L150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L144-L150), [#L169-L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L169-L175) ):

```solidity
144:             _contribute(
145:                 crowdfundOpts.initialContributor,
146:                 crowdfundOpts.initialDelegate,
147:                 initialContribution,
148:                 0,
149:                 ""
150:             );

169:             _contribute(
170:                 payable(msg.sender),
171:                 delegate,
172:                 msg.value.safeCastUint256ToUint96(),
173:                 0, // Mint a new party card for the contributor.
174:                 gateData
175:             );
```

- *PartyGovernance.sol* ( [#L452](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L452), [#L939](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L939), [#L940](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L940) ):

```solidity
452:         _adjustVotingPower(msg.sender, 0, delegate);

939:         _adjustVotingPower(from, -powerI192, address(0));

940:         _adjustVotingPower(to, powerI192, address(0));
```

- *PartyGovernanceNFT.sol* ( [#L229](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L229), [#L241](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L241), [#L295](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L295) ):

```solidity
229:         _adjustVotingPower(ownerOf(tokenId), votingPower.safeCastUint96ToInt192(), address(0));

241:         _adjustVotingPower(ownerOf(tokenId), -votingPower.safeCastUint96ToInt192(), address(0));

295:             _adjustVotingPower(owner, -votingPower.safeCastUint96ToInt192(), address(0));
```

- *ProposalExecutionEngine.sol* ( [#L235](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L235) ):

```solidity
235:             validator = getSignatureValidatorForHash(0);
```

</details>

### [L&#x2011;30] Code does not follow the best practice of check-effects-interaction

Code should follow the best-practice of [check-effects-interaction](https://blockchain-academy.hs-mittweida.de/courses/solidity-coding-beginners-to-intermediate/lessons/solidity-11-coding-patterns/topic/checks-effects-interactions/), where state variables are updated before any external calls are made. Doing so prevents a large class of reentrancy bugs.

<details>
<summary>There are 7 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L244](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L244), [#L396](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L396) ):

```solidity
/// @audit `_finalize()` is called on line 235, triggering an external call - `increaseTotalVotingPower()`
244:             totalContributions = newTotalContributions;

/// @audit `isHost()` is called on line 391
396:         emergencyExecuteDisabled = true;
```

- *PartyGovernance.sol* ( [#L758](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L758) ):

```solidity
/// @audit `_executeProposal()` is called on line 747, triggering an external call - `delegatecall()`
758:             proposalState.values.completedTime = 0;
```

- *PartyGovernanceNFT.sol* ( [#L445](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L445) ):

```solidity
/// @audit `compatTransfer()` is called on line 422, triggering an external call - `call()`
445:         rageQuitTimestamp = currentRageQuitTimestamp;
```

- *ProposalExecutionEngine.sol* ( [#L198](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L198), [#L199](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L199), [#L202](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L202) ):

```solidity
/// @audit `_execute()` is called on line 194, triggering an external call - `approve()`
198:             stor.currentInProgressProposalId = 0;

/// @audit `_execute()` is called on line 194, triggering an external call - `approve()`
199:             stor.nextProgressDataHash = 0;

/// @audit `_execute()` is called on line 194, triggering an external call - `approve()`
202:             stor.nextProgressDataHash = keccak256(nextProgressData);
```

</details>

### [L&#x2011;31] `unchecked` blocks with subtractions may underflow

There aren't any checks to avoid an underflow which can happen inside an `unchecked` block, so the following subtractions may underflow silently.

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L181](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L181), [#L218](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L218) ):

```solidity
181:                 votingPower_ = totalVotingPower - mintedVotingPower_;

218:                 votingPower = totalVotingPower - mintedVotingPower_;
```

## Non Critical Issues

### [N&#x2011;01] `abi.encodePacked()` should be replaced with `bytes.concat()`

Solidity version 0.8.4 introduces `bytes.concat()`, which can be used to replace `abi.encodePacked()` on bytes/strings. It can make the intended operation clearer, leading to less reviewer confusion.

There is 1 instance:

- *OffChainSignatureValidator.sol* ( [#L48-L52](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L48-L52) ):

```solidity
48:         bytes memory encodedPacket = abi.encodePacked(
49:             "\x19Ethereum Signed Message:\n",
50:             Strings.toString(message.length),
51:             message
52:         );
```

### [N&#x2011;02] Consider moving `msg.sender` checks to `modifier`s

If some functions are only allowed to be called by some specific users, consider using a modifier instead of checking with a require statement, especially if this check is done in multiple functions.

<details>
<summary>There are 8 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L298), [#L372-L374](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L372-L374), [#L390-L395](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L390-L395) ):

```solidity
298:             if (!party.isHost(msg.sender)) revert OnlyPartyHostError();

372:         if (_GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender) {
373:             revert OnlyPartyDaoError(msg.sender);
374:         }

390:         if (
391:             !party.isHost(msg.sender) &&
392:             _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender
393:         ) {
394:             revert OnlyPartyDaoOrHostError(msg.sender);
395:         }
```

- *InitialETHCrowdfund.sol* ( [#L290-L292](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L290-L292) ):

```solidity
290:             if (!_gateKeeper.isAllowed(msg.sender, gateKeeperId, gateData)) {
291:                 revert NotAllowedByGateKeeperError(msg.sender, _gateKeeper, gateKeeperId, gateData);
292:             }
```

- *PartyGovernance.sol* ( [#L217-L219](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L217-L219), [#L627-L629](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L627-L629) ):

```solidity
217:         if (!isHost[msg.sender]) {
218:             revert NotAuthorized();
219:         }

627:         if (info.hasVoted[msg.sender]) {
628:             revert AlreadyVotedError(msg.sender);
629:         }
```

- *PartyGovernanceNFT.sol* ( [#L62-L64](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L62-L64), [#L278-L284](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L278-L284) ):

```solidity
62:         if (!isAuthority[msg.sender]) {
63:             revert NotAuthorized();
64:         }

278:                 if (
279:                     msg.sender != owner &&
280:                     getApproved[tokenId] != msg.sender &&
281:                     !isApprovedForAll[owner][msg.sender]
282:                 ) {
283:                     revert NotAuthorized();
284:                 }
```

</details>

### [N&#x2011;03] Custom errors has no error details

Consider adding parameters to the error to indicate which user or values caused the failure.

<details>
<summary>There are 29 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L57](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L57), [#L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L61), [#L62](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L62), [#L69](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L69), [#L70](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L70), [#L71](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L71), [#L72](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L72), [#L73](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L73) ):

```solidity
57:     error OnlyPartyHostError();

61:     error OnlyWhenEmergencyActionsAllowedError();

62:     error InvalidDelegateError();

69:     error ContributingForExistingCardDisabledError();

70:     error ZeroVotingPowerError();

71:     error FundingSplitAlreadyPaidError();

72:     error FundingSplitNotConfiguredError();

73:     error InvalidMessageValue();
```

- *PartyGovernance.sol* ( [#L168](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L168), [#L172](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L172), [#L173](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L173), [#L174](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L174), [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L175), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L176), [#L178](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L178), [#L181](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L181), [#L182](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L182), [#L183](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L183), [#L184](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L184) ):

```solidity
168:     error MismatchedPreciousListLengths();

172:     error NotAuthorized();

173:     error InvalidDelegateError();

174:     error BadPreciousListError();

175:     error OnlyWhenEmergencyActionsAllowedError();

176:     error OnlyWhenEnabledError();

178:     error InvalidNewHostError();

181:     error DistributionsRequireVoteError();

182:     error PartyNotStartedError();

183:     error CannotRageQuitAndAcceptError();

184:     error TooManyHosts();
```

- *PartyGovernanceNFT.sol* ( [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L22), [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L23), [#L25](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L25) ):

```solidity
22:     error CannotDisableRageQuitAfterInitializationError();

23:     error InvalidTokenOrderError();

25:     error NothingToBurnError();
```

- *ProposalExecutionEngine.sol* ( [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L86), [#L87](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L87) ):

```solidity
86:     error ZeroProposalIdError();

87:     error MalformedProposalDataError();
```

- *OffChainSignatureValidator.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L10), [#L11](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L11), [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L12) ):

```solidity
10:     error NotMemberOfParty();

11:     error InsufficientVotingPower();

12:     error MessageHashMismatch();
```

- *Implementation.sol* ( [#L8](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L8), [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L9) ):

```solidity
8:     error AlreadyInitialized();

9:     error OnlyDelegateCallError();
```

</details>

### [N&#x2011;04] Import declarations should import specific identifiers, rather than the whole file

Using import declarations of the form `import {<identifier_name>} from "some/file.sol"` avoids polluting the symbol namespace making flattened files smaller, and speeds up compilation (but does not save any gas).

<details>
<summary>There are 27 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L4), [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L5), [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L6), [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L7) ):

```solidity
4: import "../utils/LibAddress.sol";

5: import "../utils/LibSafeCast.sol";

6: import "../party/Party.sol";

7: import "../gatekeepers/IGateKeeper.sol";
```

- *PartyGovernanceNFT.sol* ( [#L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L4), [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L5), [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L6), [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L7), [#L8](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L8), [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L9), [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L10), [#L11](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L11) ):

```solidity
4: import "../utils/LibSafeCast.sol";

5: import "../utils/LibAddress.sol";

6: import "openzeppelin/contracts/interfaces/IERC2981.sol";

7: import "../globals/IGlobals.sol";

8: import "../tokens/IERC721.sol";

9: import "../vendor/solmate/ERC721.sol";

10: import "./PartyGovernance.sol";

11: import "../renderers/RendererStorage.sol";
```

- *ProposalExecutionEngine.sol* ( [#L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L4), [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L5), [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L6), [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L9), [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L10), [#L11](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L11), [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L12), [#L13](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L13), [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L14), [#L15](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L15), [#L16](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L16), [#L17](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L17), [#L18](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L18) ):

```solidity
4: import "../utils/Implementation.sol";

5: import "../utils/LibRawResult.sol";

6: import "../globals/IGlobals.sol";

9: import "./IProposalExecutionEngine.sol";

10: import "./ListOnOpenseaProposal.sol";

11: import "./ListOnOpenseaAdvancedProposal.sol";

12: import "./ListOnZoraProposal.sol";

13: import "./FractionalizeProposal.sol";

14: import "./ArbitraryCallsProposal.sol";

15: import "./ProposalStorage.sol";

16: import "./DistributeProposal.sol";

17: import "./AddAuthorityProposal.sol";

18: import "./OperatorProposal.sol";
```

- *ProposalStorage.sol* ( [#L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L4), [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L5) ):

```solidity
4: import "./IProposalExecutionEngine.sol";

5: import "../utils/LibRawResult.sol";
```

</details>

### [N&#x2011;05] Event should include parameters

It is beneficial for events to include parameters. Including parameters in events allows you to provide additional information and context when emitting the event. This can be valuable for logging important state changes, or recording related accounts, or capturing relevant data.

There are 4 instances:

- *ETHCrowdfundBase.sol* ( [#L81](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L81), [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L83) ):

```solidity
81:     event Finalized();

83:     event EmergencyExecuteDisabled();
```

- *PartyGovernance.sol* ( [#L159](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L159) ):

```solidity
159:     event EmergencyExecuteDisabled();
```

- *Implementation.sol* ( [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L6) ):

```solidity
6:     event Initialized();
```

### [N&#x2011;06] Too long functions should be refactored

Functions with too many lines are difficult to understand. It is recommended to refactor complex functions into multiple shorter and easier to understand functions.

<details>
<summary>There are 9 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196) ):

```solidity
/// @audit 78 lines
196:     function _processContribution(
```

- *InitialETHCrowdfund.sol* ( [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L372) ):

```solidity
/// @audit 64 lines
372:     function _createParty(
```

- *PartyGovernance.sol* ( [#L487](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487), [#L595](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L595), [#L706](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706), [#L771](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L771) ):

```solidity
/// @audit 56 lines
487:     function distribute(

/// @audit 64 lines
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

/// @audit 55 lines
706:     function execute(

/// @audit 64 lines
771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {
```

- *PartyGovernanceNFT.sol* ( [#L344](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L344) ):

```solidity
/// @audit 105 lines
344:     function rageQuit(
```

- *ProposalExecutionEngine.sol* ( [#L146](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L146) ):

```solidity
/// @audit 59 lines
146:     function executeProposal(
```

- *OffChainSignatureValidator.sol* ( [#L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L28) ):

```solidity
/// @audit 53 lines
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

</details>

### [N&#x2011;07] There is no need to initialize variables with 0

Since the variables are automatically set to 0 when created, it is redundant to initialize it with 0 again.

There are 4 instances:

- *InitialETHCrowdfund.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L379) ):

```solidity
379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {
```

- *PartyGovernance.sol* ( [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L305), [#L432](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L432), [#L1054](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1054) ):

```solidity
305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

432:         uint256 low = 0;

1054:         uint256 flags = 0;
```

### [N&#x2011;08] NatSpec documentation for contract is missing

e.g. `@dev` or `@notice`, and it must appear above the contract definition braces in order to be identified by the compiler as NatSpec.

There are 5 instances:

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
9: contract ETHCrowdfundBase is Implementation {
```

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
5: abstract contract Implementation {
```

### [N&#x2011;09] Names of `private`/`internal` state variables should be prefixed with an underscore

It is recommended by the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#underscore-prefix-for-non-external-functions-and-variables).

There are 7 instances:

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186), [#L187](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L187) ):

```solidity
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;
```

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38) ):

```solidity
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;
```

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39), [#L40-L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L40-L41) ):

```solidity
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =
41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));
```

### [N&#x2011;10] Order of functions does not follow the Solidity Style Guide

According to the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#order-of-functions), functions should be grouped according to their visibility and ordered: `constructor`, `receive`, `fallback`, `external`, `public`, `internal`, `private`. Within a grouping, place the view and pure functions last.

<details>
<summary>There are 45 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140), [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L175), [#L196-L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196-L200), [#L278-L280](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L278-L280), [#L291](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L291), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317), [#L339](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L339) ):

```solidity
/// @audit ↓↓ Out of order with `getCrowdfundLifecycle()`
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

/// @audit ↑↑ Out of order with `_initialize()`
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

/// @audit ↓↓ Out of order with `convertVotingPowerToContribution()`
196:     function _processContribution(
197:         address payable contributor,
198:         address delegate,
199:         uint96 amount
200:     ) internal returns (uint96 votingPower) {

/// @audit ↑↑ Out of order with `_processContribution()`
278:     function convertVotingPowerToContribution(
279:         uint96 votingPower
280:     ) public view returns (uint96 amount) {

/// @audit ↑↑ Out of order with `convertVotingPowerToContribution()`
291:     function finalize() external {

/// @audit ↓↓ Out of order with `sendFundingSplit()`
317:     function _finalize(uint96 totalContributions_) internal {

/// @audit ↑↑ Out of order with `_finalize()`
339:     function sendFundingSplit() external returns (uint96 splitAmount) {
```

- *InitialETHCrowdfund.sol* ( [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L204-L206](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L204-L206), [#L275-L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275-L281), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L318) ):

```solidity
/// @audit ↓↓ Out of order with `batchContribute()`
185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit ↑↑ Out of order with `contribute()`
204:     function batchContribute(
205:         BatchContributeArgs calldata args
206:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

/// @audit ↓↓ Out of order with `refund()`
275:     function _contribute(
276:         address payable contributor,
277:         address delegate,
278:         uint96 amount,
279:         uint256 tokenId,
280:         bytes memory gateData
281:     ) private returns (uint96 votingPower) {

/// @audit ↑↑ Out of order with `_contribute()`
318:     function refund(uint256 tokenId) external returns (uint96 amount) {
```

- *PartyGovernance.sol* ( [#L258](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L258), [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265), [#L270-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270-L275), [#L312](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L312), [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L333), [#L342](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L342), [#L368-L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L368-L372), [#L381-L383](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L381-L383), [#L423-L426](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L423-L426), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L451), [#L457](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L457), [#L487-L492](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487-L492), [#L553-L556](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L553-L556), [#L595](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L595), [#L665](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L665), [#L706-L713](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706-L713), [#L771](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L771), [#L841-L845](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L841-L845), [#L855](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L855), [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L904-L908](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904-L908), [#L937](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L937), [#L944](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L944), [#L972-L978](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L972-L978), [#L1021](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1021), [#L1129-L1133](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1129-L1133), [#L1137-L1140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1137-L1140), [#L1147-L1150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147-L1150), [#L1154-L1157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154-L1157) ):

```solidity
/// @audit ↓↓ Out of order with `constructor()`
258:     function _assertNotGloballyDisabled() internal view {

/// @audit ↑↑ Out of order with `_assertNotGloballyDisabled()`
265:     constructor(IGlobals globals) {

/// @audit ↓↓ Out of order with `fallback()`
270:     function _initialize(
271:         GovernanceOpts memory govOpts,
272:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
273:         IERC721[] memory preciousTokens,
274:         uint256[] memory preciousTokenIds
275:     ) internal virtual {

/// @audit ↑↑ Out of order with `_initialize()`
312:     fallback() external {

/// @audit ↓↓ Out of order with `getProposalExecutionEngine()`
333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {

/// @audit ↑↑ Out of order with `supportsInterface()`
342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

/// @audit ↓↓ Out of order with `getProposalStateInfo()`
368:     function getVotingPowerAt(
369:         address voter,
370:         uint40 timestamp,
371:         uint256 snapIndex
372:     ) public view returns (uint96 votingPower) {

/// @audit ↑↑ Out of order with `getVotingPowerAt()`
381:     function getProposalStateInfo(
382:         uint256 proposalId
383:     ) external view returns (ProposalStatus status, ProposalStateValues memory values) {

/// @audit ↓↓ Out of order with `delegateVotingPower()`
423:     function findVotingPowerSnapshotIndex(
424:         address voter,
425:         uint40 timestamp
426:     ) public view returns (uint256 index) {

/// @audit ↑↑ Out of order with `findVotingPowerSnapshotIndex()`
451:     function delegateVotingPower(address delegate) external {

/// @audit ↑↑ Out of order with `delegateVotingPower()`
457:     function abdicateHost(address newPartyHost) external {

/// @audit ↑↑ Out of order with `abdicateHost()`
487:     function distribute(
488:         uint256 amount,
489:         ITokenDistributor.TokenType tokenType,
490:         address token,
491:         uint256 tokenId
492:     ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {

/// @audit ↑↑ Out of order with `distribute()`
553:     function propose(
554:         Proposal memory proposal,
555:         uint256 latestSnapIndex
556:     ) external returns (uint256 proposalId) {

/// @audit ↓↓ Out of order with `veto()`
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

/// @audit ↑↑ Out of order with `accept()`
665:     function veto(uint256 proposalId) external {

/// @audit ↑↑ Out of order with `veto()`
706:     function execute(
707:         uint256 proposalId,
708:         Proposal memory proposal,
709:         IERC721[] memory preciousTokens,
710:         uint256[] memory preciousTokenIds,
711:         bytes calldata progressData,
712:         bytes calldata extraData
713:     ) external payable {

/// @audit ↑↑ Out of order with `execute()`
771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {

/// @audit ↑↑ Out of order with `cancel()`
841:     function emergencyExecute(
842:         address targetAddress,
843:         bytes calldata targetCallData,
844:         uint256 amountEth
845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {

/// @audit ↑↑ Out of order with `emergencyExecute()`
855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {

/// @audit ↓↓ Out of order with `_getVotingPowerSnapshotAt()`
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

/// @audit ↑↑ Out of order with `_executeProposal()`
904:     function _getVotingPowerSnapshotAt(
905:         address voter,
906:         uint40 timestamp,
907:         uint256 hintIndex
908:     ) internal view returns (VotingPowerSnapshot memory snap) {

/// @audit ↑↑ Out of order with `_getVotingPowerSnapshotAt()`
937:     function _transferVotingPower(address from, address to, uint256 power) internal {

/// @audit ↑↑ Out of order with `_transferVotingPower()`
944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

/// @audit ↓↓ Out of order with `_insertVotingPowerSnapshot()`
972:     function _rebalanceDelegates(
973:         address voter,
974:         address oldDelegate,
975:         address newDelegate,
976:         VotingPowerSnapshot memory oldSnap,
977:         VotingPowerSnapshot memory newSnap
978:     ) private {

/// @audit ↑↑ Out of order with `_rebalanceDelegates()`
1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {

/// @audit ↓↓ Out of order with `_setPreciousList()`
1129:     function _areVotesPassing(
1130:         uint96 voteCount,
1131:         uint96 totalVotingPower,
1132:         uint16 passThresholdBps
1133:     ) private pure returns (bool) {

/// @audit ↑↑ Out of order with `_areVotesPassing()`
1137:     function _setPreciousList(
1138:         IERC721[] memory preciousTokens,
1139:         uint256[] memory preciousTokenIds
1140:     ) private {

/// @audit ↓↓ Out of order with `_hashPreciousList()`
1147:     function _isPreciousListCorrect(
1148:         IERC721[] memory preciousTokens,
1149:         uint256[] memory preciousTokenIds
1150:     ) private view returns (bool) {

/// @audit ↑↑ Out of order with `_isPreciousListCorrect()`
1154:     function _hashPreciousList(
1155:         IERC721[] memory preciousTokens,
1156:         uint256[] memory preciousTokenIds
1157:     ) internal pure returns (bytes32 h) {
```

- *PartyGovernanceNFT.sol* ( [#L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L61), [#L76](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L76), [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91), [#L113-L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L113-L115), [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123), [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L129), [#L154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L154), [#L166-L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L170), [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L208), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L236), [#L247](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L247), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L255), [#L268-L271](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L268-L271), [#L310](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L310), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L318), [#L344-L349](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L344-L349), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L451), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470), [#L479](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L479), [#L486](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L486) ):

```solidity
/// @audit ↓↓ Out of order with `constructor()`
61:     function _assertAuthority() internal view {

/// @audit ↑↑ Out of order with `_assertAuthority()`
76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

/// @audit ↓↓ Out of order with `supportsInterface()`
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {

/// @audit ↑↑ Out of order with `_initialize()`
113:     function supportsInterface(
114:         bytes4 interfaceId
115:     ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

/// @audit ↓↓ Out of order with `contractURI()`
123:     function tokenURI(uint256) public view override returns (string memory) {

/// @audit ↑↑ Out of order with `tokenURI()`
129:     function contractURI() external view returns (string memory) {

/// @audit ↓↓ Out of order with `mint()`
154:     function getVotingPowerShareOf(uint256 tokenId) public view returns (uint256) {

/// @audit ↑↑ Out of order with `getVotingPowerShareOf()`
166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {

/// @audit ↑↑ Out of order with `mint()`
208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit ↑↑ Out of order with `increaseVotingPower()`
236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit ↑↑ Out of order with `decreaseVotingPower()`
247:     function increaseTotalVotingPower(uint96 votingPower) external {

/// @audit ↑↑ Out of order with `increaseTotalVotingPower()`
255:     function decreaseTotalVotingPower(uint96 votingPower) external {

/// @audit ↓↓ Out of order with `burn()`
268:     function _burnAndUpdateVotingPower(
269:         uint256[] memory tokenIds,
270:         bool checkIfAuthorizedToBurn
271:     ) private returns (uint96 totalVotingPowerBurned) {

/// @audit ↑↑ Out of order with `_burnAndUpdateVotingPower()`
310:     function burn(uint256 tokenId) external {

/// @audit ↑↑ Out of order with `burn()`
318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

/// @audit ↑↑ Out of order with `setRageQuit()`
344:     function rageQuit(
345:         uint256[] calldata tokenIds,
346:         IERC20[] calldata withdrawTokens,
347:         uint256[] calldata minWithdrawAmounts,
348:         address receiver
349:     ) external {

/// @audit ↓↓ Out of order with `safeTransferFrom()`
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit ↑↑ Out of order with `transferFrom()`
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit ↑↑ Out of order with `safeTransferFrom()`
465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {

/// @audit ↑↑ Out of order with `safeTransferFrom()`
479:     function addAuthority(address authority) external onlySelf {

/// @audit ↑↑ Out of order with `addAuthority()`
486:     function abdicateAuthority() external {
```

- *ProposalExecutionEngine.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L141), [#L146-L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L146-L148), [#L207](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L207), [#L297-L299](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297-L299), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L318), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L335) ):

```solidity
/// @audit ↓↓ Out of order with `executeProposal()`
141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {

/// @audit ↑↑ Out of order with `getCurrentInProgressProposalId()`
146:     function executeProposal(
147:         ExecuteProposalParams memory params
148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {

/// @audit ↑↑ Out of order with `executeProposal()`
207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {

/// @audit ↓↓ Out of order with `_executeUpgradeProposalsImplementation()`
297:     function _extractProposalType(
298:         bytes memory proposalData
299:     ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {

/// @audit ↑↑ Out of order with `_extractProposalType()`
318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {

/// @audit ↑↑ Out of order with `_executeUpgradeProposalsImplementation()`
335:     function _getStorage() internal pure returns (Storage storage stor) {
```

- *SetSignatureValidatorProposal.sol* ( [#L28-L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L28-L30), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42) ):

```solidity
/// @audit ↓↓ Out of order with `getSignatureValidatorForHash()`
28:     function _executeSetSignatureValidator(
29:         IProposalExecutionEngine.ExecuteProposalParams memory params
30:     ) internal returns (bytes memory nextProgressData) {

/// @audit ↑↑ Out of order with `_executeSetSignatureValidator()`
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

</details>

### [N&#x2011;11] Redundant inheritance specifier

The contracts below already extend the specified contract, so there is no need to list it in the inheritance list again.

There is 1 instance:

- *ProposalExecutionEngine.sol* ( [#L24-L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24-L38) ):

```solidity
/// @audit SetGovernanceParameterProposal already extends ProposalStorage
24: contract ProposalExecutionEngine is
25:     IProposalExecutionEngine,
26:     Implementation,
27:     ProposalStorage,
28:     ListOnOpenseaProposal,
29:     ListOnOpenseaAdvancedProposal,
30:     ListOnZoraProposal,
31:     FractionalizeProposal,
32:     ArbitraryCallsProposal,
33:     DistributeProposal,
34:     AddAuthorityProposal,
35:     OperatorProposal,
36:     SetSignatureValidatorProposal,
37:     SetGovernanceParameterProposal,
38:     IERC1271
```

### [N&#x2011;12] Use of `override` is unnecessary

[Starting from Solidity 0.8.8](https://docs.soliditylang.org/en/v0.8.20/contracts.html#function-overriding), the override keyword is not required when overriding an interface function, except for the case where the function is defined in multiple bases.

There is 1 instance:

- *ProposalExecutionEngine.sol* ( [#L123-L126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L123-L126) ):

```solidity
123:     function initialize(
124:         address oldImpl,
125:         bytes calldata initializeData
126:     ) external override onlyDelegateCall {
```

### [N&#x2011;13] Unused `internal` functions can be removed

All unused code should be removed or commented out. If the functions are required by an interface, the contract should inherit from that interface and use the override keyword.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

### [N&#x2011;14] Custom errors should be used rather than `revert()`/`require()`

Custom errors are available from solidity version 0.8.4. Custom errors are more easily processed in try-catch blocks, and are easier to re-use and maintain.

There are 2 instances:

- *ProposalExecutionEngine.sol* ( [#L313](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L313), [#L314](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L314) ):

```solidity
313:         require(proposalType != ProposalType.Invalid);

314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));
```

### [N&#x2011;15] Large numeric literals should use underscores for readability

Large hardcoded numbers in code can be difficult to read. Consider using underscores for number literals to improve readability (e.g `1234567` -> `1_234_567`). Consider using an underscore for every third digit from the right.

There are 2 instances:

- *SetGovernanceParameterProposal.sol* ( [#L54](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L54) ):

```solidity
54:             if (proposalData.passThresholdBps > 10000) {
```

- *OffChainSignatureValidator.sol* ( [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L60) ):

```solidity
60:             10000;
```

### [N&#x2011;16] Add inline comments for unnamed parameters

`function func(address a, address)` -> `function func(address a, address /* b */)`

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123), [#L136](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L136) ):

```solidity
123:     function tokenURI(uint256) public view override returns (string memory) {

136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {
```

### [N&#x2011;17] Assembly blocks should have extensive comments

Assembly blocks take a lot more time to audit than normal Solidity code, and often have gotchas and side-effects that the Solidity versions of the same code do not. Consider adding more comments explaining what is being done in every step of the assembly code, and describe why assembly is being used instead of Solidity.

<details>
<summary>There are 5 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L319-L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L319-L324), [#L1158-L1162](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1158-L1162) ):

```solidity
319:             assembly {
320:                 let freeMem := mload(0x40)
321:                 mstore(freeMem, functionSelector)
322:                 mstore(0x40, add(freeMem, 0x20))
323:                 return(freeMem, 0x20)
324:             }

1158:         assembly {
1159:             mstore(0x00, keccak256(add(preciousTokens, 0x20), mul(mload(preciousTokens), 0x20)))
1160:             mstore(0x20, keccak256(add(preciousTokenIds, 0x20), mul(mload(preciousTokenIds), 0x20)))
1161:             h := keccak256(0x00, 0x40)
1162:         }
```

- *ProposalExecutionEngine.sol* ( [#L337-L339](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L337-L339) ):

```solidity
337:         assembly {
338:             stor.slot := slot
339:         }
```

- *ProposalStorage.sol* ( [#L61-L63](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L61-L63) ):

```solidity
61:         assembly {
62:             stor.slot := s
63:         }
```

- *SetSignatureValidatorProposal.sol* ( [#L53-L55](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L53-L55) ):

```solidity
53:         assembly {
54:             stor.slot := slot
55:         }
```

</details>

### [N&#x2011;18] `assert()` should be replaced with `require()` or `revert()`

In versions of Solidity prior to 0.8.0, when encountering an assert all the remaining gas will be consumed.
Even after solidity 0.8.0, the assert function is still not recommended, as described in the [documentation](https://docs.soliditylang.org/en/v0.8.20/control-structures.html#panic-via-assert-and-error-via-require):
> Assert should only be used to test for internal errors, and to check invariants. Properly functioning code should never create a Panic, not even on invalid external input. If this happens, then there is a bug in your contract which you should fix.

There are 3 instances:

- *PartyGovernance.sol* ( [#L533](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L533) ):

```solidity
533:         assert(tokenType == ITokenDistributor.TokenType.Erc20);
```

- *PartyGovernanceNFT.sol* ( [#L499](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L499) ):

```solidity
499:         assert(false); // Will not be reached.
```

- *ProposalExecutionEngine.sol* ( [#L168](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L168) ):

```solidity
168:                 assert(currentInProgressProposalId == 0);
```

### [N&#x2011;19] Consider adding a block/deny-list

Doing so will significantly increase centralization, but will help to prevent hackers from using stolen tokens

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

### [N&#x2011;20] Constants/Immutables redefined elsewhere

Consider defining in only one contract so that values cannot become out of sync when only one location is updated. A [cheap way](https://medium.com/coinmonks/gas-cost-of-solidity-library-functions-dbe0cedd4678) to store constants/immutables in a single location is to create an `internal constant` in a `library`. If the variable is a local cache of another contract's value, consider making the cache variable internal or private, which will require external users to query the contract with the source of truth, so that callers don't get out of sync.

There are 4 instances:

- *ETHCrowdfundBase.sol* ( [#L88](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L88) ):

```solidity
/// @audit Seen in contracts/party/PartyGovernance.sol#191
88:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernance.sol* ( [#L191](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L191) ):

```solidity
/// @audit Seen in contracts/crowdfund/ETHCrowdfundBase.sol#88
191:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernanceNFT.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L42) ):

```solidity
/// @audit Seen in contracts/party/PartyGovernance.sol#191
42:     IGlobals private immutable _GLOBALS;
```

- *ProposalExecutionEngine.sol* ( [#L101](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L101) ):

```solidity
/// @audit Seen in contracts/party/PartyGovernanceNFT.sol#42
101:     IGlobals private immutable _GLOBALS;
```

### [N&#x2011;21] Do not use literal numbers for array indexes

Indexing arrays using enums or meaningfully named constants instead of literals can make code easier to read and maintain.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L312](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L312) ):

```solidity
312:         tokenIds[0] = tokenId;
```

### [N&#x2011;22] Contract timekeeping will break earlier than the Ethereum network itself will stop working

When a timestamp is downcast from `uint256` to `uint32`, the value will wrap in the year 2106, and the contracts will break. Other downcasts will have different endpoints. Consider whether your contract is intended to live past the size of the type being used.

<details>
<summary>There are 12 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L565](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L565), [#L651](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L651), [#L734](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L734), [#L737](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L737), [#L745](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L745), [#L813](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L813), [#L954](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L954), [#L988](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L988), [#L1011](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1011), [#L1086](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1086) ):

```solidity
565:                 proposedTime: uint40(block.timestamp),

651:             info.values.passedTime = uint40(block.timestamp);

734:                     uint40(block.timestamp)

737:             proposalState.values.executedTime = uint40(block.timestamp);

745:         proposalState.values.completedTime = uint40(block.timestamp);

813:                     uint40(block.timestamp),

954:             timestamp: uint40(block.timestamp),

988:                 timestamp: uint40(block.timestamp),

1011:                 timestamp: uint40(block.timestamp),

1086:         uint40 t = uint40(block.timestamp);
```

- *PartyGovernanceNFT.sol* ( [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L372) ):

```solidity
372:         lastRageQuitTimestamp = uint40(block.timestamp);
```

- *OffChainSignatureValidator.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L59) ):

```solidity
59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *
```

</details>

### [N&#x2011;23] Events should be emitted before external calls

Ensure that events follow the best practice of check-effects-interaction, and are emitted before external calls.

<details>
<summary>There are 12 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L335), [#L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L358), [#L383](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L383), [#L397](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L397) ):

```solidity
/// @audit `increaseTotalVotingPower()` is called on line 330
335:         emit Finalized();

/// @audit `transferEth()` is called on line 356, triggering an external call - `call()`
358:         emit FundingSplitSent(fundingSplitRecipient_, splitAmount);

/// @audit `call()` is called on line 379
383:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

/// @audit `isHost()` is called on line 391
397:         emit EmergencyExecuteDisabled();
```

- *InitialETHCrowdfund.sol* ( [#L341](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L341) ):

```solidity
/// @audit `safeCastUint256ToUint96()` is called on line 328
341:             emit Refunded(contributor, tokenId, amount);
```

- *PartyGovernance.sol* ( [#L830](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L830), [#L833](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L833), [#L850](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L850), [#L894](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L894), [#L897](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L897) ):

```solidity
/// @audit `delegatecall()` is called on line 823
830:         emit ProposalCancelled(proposalId);

/// @audit `delegatecall()` is called on line 823
833:         emit BatchMetadataUpdate(0, type(uint256).max);

/// @audit `call()` is called on line 846
850:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

/// @audit `delegatecall()` is called on line 884
894:         emit ProposalExecuted(proposalId, msg.sender, nextProgressData);

/// @audit `delegatecall()` is called on line 884
897:         emit BatchMetadataUpdate(0, type(uint256).max);
```

- *PartyGovernanceNFT.sol* ( [#L447](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L447) ):

```solidity
/// @audit `compatTransfer()` is called on line 422, triggering an external call - `call()`
447:         emit RageQuit(msg.sender, tokenIds, withdrawTokens, receiver);
```

- *ProposalExecutionEngine.sol* ( [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L331) ):

```solidity
/// @audit `_initProposalImpl()` is called on line 330, triggering an external call - `delegatecall()`
331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);
```

</details>

### [N&#x2011;24] Empty function body without comments

Empty function body in solidity is not recommended, consider adding some comments to the body.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99) ):

```solidity
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}
```

### [N&#x2011;25] `require()` / `revert()` statements should have descriptive reason strings

There are 2 instances:

- *ProposalExecutionEngine.sol* ( [#L313](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L313), [#L314](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L314) ):

```solidity
313:         require(proposalType != ProposalType.Invalid);

314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));
```

### [N&#x2011;26] Events are emitted without the sender information

When an action is triggered based on a user's action, not being able to filter based on who triggered the action makes event processing a lot more cumbersome. Including the `msg.sender` the events of these types of action will make events much more useful to end users, especially when `msg.sender` is not `tx.origin`.

<details>
<summary>There are 15 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L358), [#L383](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L383), [#L397](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L397) ):

```solidity
358:         emit FundingSplitSent(fundingSplitRecipient_, splitAmount);

383:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

397:         emit EmergencyExecuteDisabled();
```

- *InitialETHCrowdfund.sol* ( [#L341](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L341) ):

```solidity
341:             emit Refunded(contributor, tokenId, amount);
```

- *PartyGovernance.sol* ( [#L517](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L517), [#L520](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L520), [#L581](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L581), [#L652](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L652), [#L655](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L655), [#L830](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L830), [#L833](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L833), [#L897](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L897) ):

```solidity
517:         emit DistributionCreated(tokenType, token, tokenId);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

652:             emit ProposalPassed(proposalId);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

830:         emit ProposalCancelled(proposalId);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

897:         emit BatchMetadataUpdate(0, type(uint256).max);
```

- *PartyGovernanceNFT.sol* ( [#L294](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L294), [#L482](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L482) ):

```solidity
294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

482:         emit AuthorityAdded(authority);
```

- *OffChainSignatureValidator.sol* ( [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L86) ):

```solidity
86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);
```

</details>

### [N&#x2011;27] Event is missing `indexed` fields

Index event fields makes the field more quickly accessible to [off-chain tools](https://ethereum.stackexchange.com/questions/40396/can-somebody-please-explain-the-concept-of-event-indexing) that parse events. However, note that each indexed field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details>
<summary>There are 13 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L75-L80](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L75-L80), [#L84](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L84) ):

```solidity
75:     event Contributed(
76:         address indexed sender,
77:         address indexed contributor,
78:         uint256 amount,
79:         address delegate
80:     );

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);
```

- *PartyGovernance.sol* ( [#L144](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L144), [#L145](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L145), [#L146](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L146), [#L149](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L149), [#L150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L150), [#L152-L156](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L152-L156), [#L158](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L158), [#L160-L166](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L160-L166) ):

```solidity
144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

152:     event DistributionCreated(
153:         ITokenDistributor.TokenType tokenType,
154:         address token,
155:         uint256 tokenId
156:     );

158:     event HostStatusTransferred(address oldHost, address newHost);

160:     event PartyVotingSnapshotCreated(
161:         address indexed voter,
162:         uint40 timestamp,
163:         uint96 delegatedVotingPower,
164:         uint96 intrinsicVotingPower,
165:         bool isDelegated
166:     );
```

- *PartyGovernanceNFT.sol* ( [#L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L30), [#L31](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L31) ):

```solidity
30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);
```

- *ProposalExecutionEngine.sol* ( [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L83) ):

```solidity
83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);
```

</details>

### [N&#x2011;28] Function state mutability can be restricted to pure

There are 5 instances:

- *PartyGovernance.sol* ( [#L342](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L342), [#L347](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L347), [#L390](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L390) ):

```solidity
342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {

390:     function getGovernanceValues() external view returns (GovernanceValues memory) {
```

- *ProposalExecutionEngine.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L141) ):

```solidity
141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {
```

- *SetSignatureValidatorProposal.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42) ):

```solidity
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

### [N&#x2011;29] Contract implements interface without extending the interface

Not extending the interface may lead to the wrong function signature being used, leading to unexpected behavior. If the interface is in fact being implemented, use the `override` keyword to indicate that fact.

There is 1 instance:

- *PartyGovernance.sol* ( [#L23-L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23-L28) ):

```solidity
/// @audit IERC165
23: abstract contract PartyGovernance is
24:     ProposalStorage,
25:     Implementation,
26:     IERC4906,
27:     ReadOnlyDelegateCall
28: {
```

### [N&#x2011;30] Imports could be organized more systematically

The contract's interface should be imported first, followed by each of the interfaces it uses, followed by all other files. The examples below do not follow this layout.

<details>
<summary>There are 8 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L7) ):

```solidity
/// @audit Out of order with the prev import️ ⬆
7: import "../gatekeepers/IGateKeeper.sol";
```

- *InitialETHCrowdfund.sol* ( [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L12) ):

```solidity
/// @audit Out of order with the prev import️ ⬆
12: import { IGateKeeper } from "../gatekeepers/IGateKeeper.sol";
```

- *PartyGovernance.sol* ( [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L6), [#L13](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L13), [#L16](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L16) ):

```solidity
/// @audit Out of order with the prev import️ ⬆
6: import { IERC721 } from "../tokens/IERC721.sol";

/// @audit Out of order with the prev import️ ⬆
13: import { IERC4906 } from "../utils/IERC4906.sol";

/// @audit Out of order with the prev import️ ⬆
16: import { IProposalExecutionEngine } from "../proposals/IProposalExecutionEngine.sol";
```

- *PartyGovernanceNFT.sol* ( [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L6) ):

```solidity
/// @audit Out of order with the prev import️ ⬆
6: import "openzeppelin/contracts/interfaces/IERC2981.sol";
```

- *ProposalExecutionEngine.sol* ( [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L6) ):

```solidity
/// @audit Out of order with the prev import️ ⬆
6: import "../globals/IGlobals.sol";
```

- *SetGovernanceParameterProposal.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L5) ):

```solidity
/// @audit Out of order with the prev import️ ⬆
5: import { IProposalExecutionEngine } from "./IProposalExecutionEngine.sol";
```

</details>

### [N&#x2011;31] Lines are too long

The [solidity style guide](https://docs.soliditylang.org/en/v0.8.17/style-guide.html#maximum-line-length) recommends a maximum line length of 120 characters. Lines of code that are longer than 120 should be wrapped.

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35) ):

```solidity
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))
```

### [N&#x2011;32] Magic numbers should be replaced with constants

Magic numbers are hard-coded values in code that can make it difficult for developers and maintainers to understand the code, and can also cause confusion or errors. To improve the readability and maintainability of code, it is recommended to replace magic numbers with constants that have good readability.

<details>
<summary>There are 28 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L266](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L266), [#L270](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L270), [#L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L281), [#L287](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L287), [#L325](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L325), [#L329](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L329), [#L355](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L355) ):

```solidity
/// @audit 1e4
/// @audit 1e4
266:             amount = (amount * (1e4 - fundingSplitBps_)) / 1e4;

/// @audit 1e4
270:         votingPower = (amount * exchangeRateBps) / 1e4;

/// @audit 1e4
281:         amount = (votingPower * 1e4) / exchangeRateBps;

/// @audit 1e4
/// @audit 1e4
287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);

/// @audit 1e4
325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

/// @audit 1e4
329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

/// @audit 1e4
355:         splitAmount = (totalContributions * fundingSplitBps_) / 1e4;
```

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186), [#L277](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L277), [#L280](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L280), [#L313](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L313), [#L338](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L338), [#L1115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1115), [#L1119](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1119), [#L1134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1134) ):

```solidity
/// @audit 39
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

/// @audit 1e4
277:         if (govOpts.feeBps > 1e4) {

/// @audit 1e4
280:         if (govOpts.passThresholdBps > 1e4) {

/// @audit 4
313:         bytes4 functionSelector = bytes4(msg.data[0:4]);

/// @audit 0x49064906
338:             interfaceId == 0x49064906;

/// @audit 1e4
1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

/// @audit 0.9999e4
1119:         return acceptanceRatio >= 0.9999e4;

/// @audit 1e4
1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);
```

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38), [#L157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L157), [#L393](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L393), [#L413](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L413) ):

```solidity
/// @audit 0x6b5b567bfe
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

/// @audit 0xab2cb21860
35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

/// @audit 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE
38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

/// @audit 1e18
157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

/// @audit 1e18
393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

/// @audit 1e4
413:                 uint256 fee = (amount * feeBps_) / 1e4;
```

- *ProposalExecutionEngine.sol* ( [#L303](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L303) ):

```solidity
/// @audit 4
303:         if (proposalData.length < 4) {
```

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39) ):

```solidity
/// @audit 0x1
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;
```

- *SetGovernanceParameterProposal.sol* ( [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L43), [#L54](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L54) ):

```solidity
/// @audit 30 days
43:             if (proposalData.executionDelay > 30 days) {

/// @audit 10000
54:             if (proposalData.passThresholdBps > 10000) {
```

- *OffChainSignatureValidator.sol* ( [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L60) ):

```solidity
/// @audit 10000
60:             10000;
```

</details>

### [N&#x2011;33] Expressions for constant values should use `immutable` rather than `constant`

While it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.

There are 3 instances:

- *ProposalExecutionEngine.sol* ( [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L104) ):

```solidity
104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));
```

- *ProposalStorage.sol* ( [#L40-L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L40-L41) ):

```solidity
40:     uint256 private constant SHARED_STORAGE_SLOT =
41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));
```

- *SetSignatureValidatorProposal.sol* ( [#L13-L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L13-L14) ):

```solidity
13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =
14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));
```

### [N&#x2011;34] Functions not used internally could be marked external

If desired, sub contracts can change the visibility from `external` to `public` by [overriding](https://docs.soliditylang.org/en/v0.8.20/contracts.html#function-overriding) the functions of their parents.

<details>
<summary>There are 8 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189) ):

```solidity
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L333) ):

```solidity
333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {
```

- *PartyGovernanceNFT.sol* ( [#L113-L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L113-L115), [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L451), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470) ):

```solidity
113:     function supportsInterface(
114:         bytes4 interfaceId
115:     ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

123:     function tokenURI(uint256) public view override returns (string memory) {

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {
```

</details>

### [N&#x2011;35] Contracts containing only utility functions should be made into libraries

There are 3 instances:

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

### [N&#x2011;36] Contracts should have NatSpec `@author` tags

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
9: contract ETHCrowdfundBase is Implementation {
```

- *InitialETHCrowdfund.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L20) ):

```solidity
20: contract InitialETHCrowdfund is ETHCrowdfundBase {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
23: abstract contract PartyGovernance is
```

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalExecutionEngine.sol* ( [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24) ):

```solidity
24: contract ProposalExecutionEngine is
```

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

- *OffChainSignatureValidator.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L9) ):

```solidity
9: contract OffChainSignatureValidator is IERC1271 {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
5: abstract contract Implementation {
```

</details>

### [N&#x2011;37] Contracts should have `@notice` tags

The `@notice` is used to explain to users what the contract does. The compiler interprets `///` or `/**` comments [as this tag](https://docs.soliditylang.org/en/latest/natspec-format.html#tags) if one wasn't explicitly provided.

There are 5 instances:

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
9: contract ETHCrowdfundBase is Implementation {
```

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
5: abstract contract Implementation {
```

### [N&#x2011;38] Contracts should have NatSpec `@title` tags

Some contract definitions have an incomplete NatSpec: add a `@title` notation to describe the contract to improve the code documentation.

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
9: contract ETHCrowdfundBase is Implementation {
```

- *InitialETHCrowdfund.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L20) ):

```solidity
20: contract InitialETHCrowdfund is ETHCrowdfundBase {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
23: abstract contract PartyGovernance is
```

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalExecutionEngine.sol* ( [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24) ):

```solidity
24: contract ProposalExecutionEngine is
```

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

- *OffChainSignatureValidator.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L9) ):

```solidity
9: contract OffChainSignatureValidator is IERC1271 {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
5: abstract contract Implementation {
```

</details>

### [N&#x2011;39] Event declarations should have NatSpec descriptions

<details>
<summary>There are 26 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L75-L80](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L75-L80), [#L81](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L81), [#L82](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L82), [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L83), [#L84](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L84) ):

```solidity
75:     event Contributed(
76:         address indexed sender,
77:         address indexed contributor,
78:         uint256 amount,
79:         address delegate
80:     );

81:     event Finalized();

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

83:     event EmergencyExecuteDisabled();

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);
```

- *InitialETHCrowdfund.sol* ( [#L96](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L96) ):

```solidity
96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);
```

- *PartyGovernance.sol* ( [#L144](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L144), [#L145](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L145), [#L146](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L146), [#L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L148), [#L149](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L149), [#L150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L150), [#L151](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L151), [#L152-L156](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L152-L156), [#L157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L157), [#L158](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L158), [#L159](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L159), [#L160-L166](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L160-L166) ):

```solidity
144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

148:     event ProposalPassed(uint256 indexed proposalId);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

151:     event ProposalCancelled(uint256 indexed proposalId);

152:     event DistributionCreated(
153:         ITokenDistributor.TokenType tokenType,
154:         address token,
155:         uint256 tokenId
156:     );

157:     event PartyDelegateUpdated(address indexed owner, address indexed delegate);

158:     event HostStatusTransferred(address oldHost, address newHost);

159:     event EmergencyExecuteDisabled();

160:     event PartyVotingSnapshotCreated(
161:         address indexed voter,
162:         uint40 timestamp,
163:         uint96 delegatedVotingPower,
164:         uint96 intrinsicVotingPower,
165:         bool isDelegated
166:     );
```

- *PartyGovernanceNFT.sol* ( [#L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L27), [#L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L28), [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L29), [#L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L30), [#L31](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L31), [#L32](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L32) ):

```solidity
27:     event AuthorityAdded(address indexed authority);

28:     event AuthorityRemoved(address indexed authority);

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);
```

- *ProposalExecutionEngine.sol* ( [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L83) ):

```solidity
83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);
```

- *Implementation.sol* ( [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L6) ):

```solidity
6:     event Initialized();
```

</details>

### [N&#x2011;40] NatSpec documentation for function is missing

It is recommended that Solidity contracts are fully annotated using NatSpec for all public interfaces (everything in the ABI). It is clearly stated in the Solidity official documentation.
In complex projects such as DeFi, the interpretation of all functions and their arguments and returns is important for code readability and auditability.

<details>
<summary>There are 44 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L134), [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140), [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196), [#L291](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L291), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317) ):

```solidity
134:     constructor(IGlobals globals) {

140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

196:     function _processContribution(

291:     function finalize() external {

317:     function _finalize(uint96 totalContributions_) internal {
```

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99), [#L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L372) ):

```solidity
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

275:     function _contribute(

372:     function _createParty(
```

- *PartyGovernance.sol* ( [#L216](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L216), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L222), [#L258](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L258), [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265), [#L270](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270), [#L860](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860), [#L904](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904), [#L937](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L937), [#L944](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L944), [#L972](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L972), [#L1021](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1021), [#L1043](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1043), [#L1053](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1053), [#L1064](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064), [#L1111](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1111), [#L1122](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1122), [#L1129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1129), [#L1137](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1137), [#L1147](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147), [#L1154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154), [#L1166](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1166) ):

```solidity
216:     function _assertHost() internal view {

222:     function _assertActiveMember() internal view {

258:     function _assertNotGloballyDisabled() internal view {

265:     constructor(IGlobals globals) {

270:     function _initialize(

860:     function _executeProposal(

904:     function _getVotingPowerSnapshotAt(

937:     function _transferVotingPower(address from, address to, uint256 power) internal {

944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

972:     function _rebalanceDelegates(

1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {

1043:     function _getLastVotingPowerSnapshotForVoter(

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1064:     function _getProposalStatus(

1111:     function _isUnanimousVotes(

1122:     function _hostsAccepted(

1129:     function _areVotesPassing(

1137:     function _setPreciousList(

1147:     function _isPreciousListCorrect(

1154:     function _hashPreciousList(

1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {
```

- *PartyGovernanceNFT.sol* ( [#L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L61), [#L76](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L76), [#L81](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81), [#L268](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L268), [#L493](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L493) ):

```solidity
61:     function _assertAuthority() internal view {

76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

81:     function _initialize(

268:     function _burnAndUpdateVotingPower(

493:     function _delegateToRenderer() private view {
```

- *ProposalExecutionEngine.sol* ( [#L107](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L107), [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L225), [#L248](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L248), [#L297](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L318), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L335) ):

```solidity
107:     constructor(

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

248:     function _execute(

297:     function _extractProposalType(

318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {

335:     function _getStorage() internal pure returns (Storage storage stor) {
```

- *ProposalStorage.sol* ( [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L43), [#L55](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55) ):

```solidity
43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

55:     function _getSharedProposalStorage()
```

- *SetSignatureValidatorProposal.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42) ):

```solidity
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

- *Implementation.sol* ( [#L17](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L17) ):

```solidity
17:     constructor() {
```

</details>

### [N&#x2011;41] Functions missing NatSpec `@param` tag

<details>
<summary>There are 91 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L134), [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140), [#L196-L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196-L200), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317) ):

```solidity
/// @audit Missing @param for `globals`
134:     constructor(IGlobals globals) {

/// @audit Missing @param for `opts`
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

/// @audit Missing @param for `contributor`, `delegate`, `amount`
196:     function _processContribution(
197:         address payable contributor,
198:         address delegate,
199:         uint96 amount
200:     ) internal returns (uint96 votingPower) {

/// @audit Missing @param for `totalContributions_`
317:     function _finalize(uint96 totalContributions_) internal {
```

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99), [#L275-L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275-L281), [#L372-L376](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L372-L376) ):

```solidity
/// @audit Missing @param for `globals`
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

/// @audit Missing @param for `contributor`, `delegate`, `amount`, `tokenId`, `gateData`
275:     function _contribute(
276:         address payable contributor,
277:         address delegate,
278:         uint96 amount,
279:         uint256 tokenId,
280:         bytes memory gateData
281:     ) private returns (uint96 votingPower) {

/// @audit Missing @param for `opts`, `customMetadataProvider`, `customMetadata`
372:     function _createParty(
373:         ETHPartyOptions memory opts,
374:         MetadataProvider customMetadataProvider,
375:         bytes memory customMetadata
376:     ) private returns (Party) {
```

- *PartyGovernance.sol* ( [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265), [#L270-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270-L275), [#L487-L492](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487-L492), [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L904-L908](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904-L908), [#L937](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L937), [#L944](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L944), [#L972-L978](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L972-L978), [#L1021](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1021), [#L1043-L1045](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1043-L1045), [#L1053](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1053), [#L1064-L1066](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064-L1066), [#L1111-L1114](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1111-L1114), [#L1122-L1125](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1122-L1125), [#L1129-L1133](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1129-L1133), [#L1137-L1140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1137-L1140), [#L1147-L1150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147-L1150), [#L1154-L1157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154-L1157), [#L1166](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1166) ):

```solidity
/// @audit Missing @param for `globals`
265:     constructor(IGlobals globals) {

/// @audit Missing @param for `govOpts`, `proposalEngineOpts`, `preciousTokens`, `preciousTokenIds`
270:     function _initialize(
271:         GovernanceOpts memory govOpts,
272:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
273:         IERC721[] memory preciousTokens,
274:         uint256[] memory preciousTokenIds
275:     ) internal virtual {

/// @audit Missing @param for `amount`
487:     function distribute(
488:         uint256 amount,
489:         ITokenDistributor.TokenType tokenType,
490:         address token,
491:         uint256 tokenId
492:     ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {

/// @audit Missing @param for `proposalId`, `proposal`, `preciousTokens`, `preciousTokenIds`, `flags`, `progressData`, `extraData`
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

/// @audit Missing @param for `voter`, `timestamp`, `hintIndex`
904:     function _getVotingPowerSnapshotAt(
905:         address voter,
906:         uint40 timestamp,
907:         uint256 hintIndex
908:     ) internal view returns (VotingPowerSnapshot memory snap) {

/// @audit Missing @param for `from`, `to`, `power`
937:     function _transferVotingPower(address from, address to, uint256 power) internal {

/// @audit Missing @param for `voter`, `votingPower`, `delegate`
944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

/// @audit Missing @param for `voter`, `oldDelegate`, `newDelegate`, `oldSnap`, `newSnap`
972:     function _rebalanceDelegates(
973:         address voter,
974:         address oldDelegate,
975:         address newDelegate,
976:         VotingPowerSnapshot memory oldSnap,
977:         VotingPowerSnapshot memory newSnap
978:     ) private {

/// @audit Missing @param for `voter`, `snap`
1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {

/// @audit Missing @param for `voter`
1043:     function _getLastVotingPowerSnapshotForVoter(
1044:         address voter
1045:     ) private view returns (VotingPowerSnapshot memory snap) {

/// @audit Missing @param for `pv`
1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

/// @audit Missing @param for `pv`
1064:     function _getProposalStatus(
1065:         ProposalStateValues memory pv
1066:     ) private view returns (ProposalStatus status) {

/// @audit Missing @param for `totalVotes`, `totalVotingPower`
1111:     function _isUnanimousVotes(
1112:         uint96 totalVotes,
1113:         uint96 totalVotingPower
1114:     ) private pure returns (bool) {

/// @audit Missing @param for `snapshotNumHosts`, `numHostsAccepted`
1122:     function _hostsAccepted(
1123:         uint8 snapshotNumHosts,
1124:         uint8 numHostsAccepted
1125:     ) private pure returns (bool) {

/// @audit Missing @param for `voteCount`, `totalVotingPower`, `passThresholdBps`
1129:     function _areVotesPassing(
1130:         uint96 voteCount,
1131:         uint96 totalVotingPower,
1132:         uint16 passThresholdBps
1133:     ) private pure returns (bool) {

/// @audit Missing @param for `preciousTokens`, `preciousTokenIds`
1137:     function _setPreciousList(
1138:         IERC721[] memory preciousTokens,
1139:         uint256[] memory preciousTokenIds
1140:     ) private {

/// @audit Missing @param for `preciousTokens`, `preciousTokenIds`
1147:     function _isPreciousListCorrect(
1148:         IERC721[] memory preciousTokens,
1149:         uint256[] memory preciousTokenIds
1150:     ) private view returns (bool) {

/// @audit Missing @param for `preciousTokens`, `preciousTokenIds`
1154:     function _hashPreciousList(
1155:         IERC721[] memory preciousTokens,
1156:         uint256[] memory preciousTokenIds
1157:     ) internal pure returns (bytes32 h) {

/// @audit Missing @param for `proposal`, `expectedHash`
1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {
```

- *PartyGovernanceNFT.sol* ( [#L76](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L76), [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91), [#L268-L271](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L268-L271), [#L479](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L479) ):

```solidity
/// @audit Missing @param for `globals`
76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

/// @audit Missing @param for `name_`, `symbol_`, `customizationPresetId`, `governanceOpts`, `proposalEngineOpts`, `preciousTokens`, `preciousTokenIds`, `authorities`, `rageQuitTimestamp_`
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {

/// @audit Missing @param for `tokenIds`, `checkIfAuthorizedToBurn`
268:     function _burnAndUpdateVotingPower(
269:         uint256[] memory tokenIds,
270:         bool checkIfAuthorizedToBurn
271:     ) private returns (uint96 totalVotingPowerBurned) {

/// @audit Missing @param for `authority`
479:     function addAuthority(address authority) external onlySelf {
```

- *ProposalExecutionEngine.sol* ( [#L107-L111](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L107-L111), [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L225), [#L248-L251](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L248-L251), [#L297-L299](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297-L299), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L318) ):

```solidity
/// @audit Missing @param for `globals`, `zora`, `fractionalVaultFactory`
107:     constructor(
108:         IGlobals globals,
109:         IReserveAuctionCoreEth zora,
110:         IFractionalV1VaultFactory fractionalVaultFactory
111:     )

/// @audit Missing @param for `hash`, `signature`
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

/// @audit Missing @param for `pt`, `params`
248:     function _execute(
249:         ProposalType pt,
250:         ExecuteProposalParams memory params
251:     ) internal virtual returns (bytes memory nextProgressData) {

/// @audit Missing @param for `proposalData`
297:     function _extractProposalType(
298:         bytes memory proposalData
299:     ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {

/// @audit Missing @param for `proposalData`
318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {
```

- *ProposalStorage.sol* ( [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L43) ):

```solidity
/// @audit Missing @param for `impl`, `initData`
43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {
```

- *SetGovernanceParameterProposal.sol* ( [#L25-L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L25-L27) ):

```solidity
/// @audit Missing @param for `params`
25:     function _executeSetGovernanceParameter(
26:         IProposalExecutionEngine.ExecuteProposalParams memory params
27:     ) internal returns (bytes memory) {
```

- *SetSignatureValidatorProposal.sol* ( [#L28-L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L28-L30), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42) ):

```solidity
/// @audit Missing @param for `params`
28:     function _executeSetSignatureValidator(
29:         IProposalExecutionEngine.ExecuteProposalParams memory params
30:     ) internal returns (bytes memory nextProgressData) {

/// @audit Missing @param for `hash`
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

- *OffChainSignatureValidator.sol* ( [#L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L28) ):

```solidity
/// @audit Missing @param for `hash`, `signature`
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

</details>

### [N&#x2011;42] Functions missing NatSpec `@return` tag

<details>
<summary>There are 34 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L175), [#L196-L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196-L200), [#L339](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L339) ):

```solidity
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

196:     function _processContribution(
197:         address payable contributor,
198:         address delegate,
199:         uint96 amount
200:     ) internal returns (uint96 votingPower) {

339:     function sendFundingSplit() external returns (uint96 splitAmount) {
```

- *InitialETHCrowdfund.sol* ( [#L275-L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275-L281), [#L372-L376](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L372-L376) ):

```solidity
275:     function _contribute(
276:         address payable contributor,
277:         address delegate,
278:         uint96 amount,
279:         uint256 tokenId,
280:         bytes memory gateData
281:     ) private returns (uint96 votingPower) {

372:     function _createParty(
373:         ETHPartyOptions memory opts,
374:         MetadataProvider customMetadataProvider,
375:         bytes memory customMetadata
376:     ) private returns (Party) {
```

- *PartyGovernance.sol* ( [#L342](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L342), [#L347](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L347), [#L553-L556](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L553-L556), [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L904-L908](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904-L908), [#L1043-L1045](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1043-L1045), [#L1053](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1053), [#L1064-L1066](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064-L1066), [#L1111-L1114](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1111-L1114), [#L1122-L1125](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1122-L1125), [#L1129-L1133](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1129-L1133), [#L1147-L1150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147-L1150), [#L1154-L1157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154-L1157) ):

```solidity
342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {

553:     function propose(
554:         Proposal memory proposal,
555:         uint256 latestSnapIndex
556:     ) external returns (uint256 proposalId) {

860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

904:     function _getVotingPowerSnapshotAt(
905:         address voter,
906:         uint40 timestamp,
907:         uint256 hintIndex
908:     ) internal view returns (VotingPowerSnapshot memory snap) {

1043:     function _getLastVotingPowerSnapshotForVoter(
1044:         address voter
1045:     ) private view returns (VotingPowerSnapshot memory snap) {

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1064:     function _getProposalStatus(
1065:         ProposalStateValues memory pv
1066:     ) private view returns (ProposalStatus status) {

1111:     function _isUnanimousVotes(
1112:         uint96 totalVotes,
1113:         uint96 totalVotingPower
1114:     ) private pure returns (bool) {

1122:     function _hostsAccepted(
1123:         uint8 snapshotNumHosts,
1124:         uint8 numHostsAccepted
1125:     ) private pure returns (bool) {

1129:     function _areVotesPassing(
1130:         uint96 voteCount,
1131:         uint96 totalVotingPower,
1132:         uint16 passThresholdBps
1133:     ) private pure returns (bool) {

1147:     function _isPreciousListCorrect(
1148:         IERC721[] memory preciousTokens,
1149:         uint256[] memory preciousTokenIds
1150:     ) private view returns (bool) {

1154:     function _hashPreciousList(
1155:         IERC721[] memory preciousTokens,
1156:         uint256[] memory preciousTokenIds
1157:     ) internal pure returns (bytes32 h) {
```

- *PartyGovernanceNFT.sol* ( [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L129), [#L136](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L136), [#L166-L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L170), [#L268-L271](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L268-L271) ):

```solidity
129:     function contractURI() external view returns (string memory) {

136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {

166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {

268:     function _burnAndUpdateVotingPower(
269:         uint256[] memory tokenIds,
270:         bool checkIfAuthorizedToBurn
271:     ) private returns (uint96 totalVotingPowerBurned) {
```

- *ProposalExecutionEngine.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L141), [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L225), [#L248-L251](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L248-L251), [#L297-L299](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297-L299), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L335) ):

```solidity
141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

248:     function _execute(
249:         ProposalType pt,
250:         ExecuteProposalParams memory params
251:     ) internal virtual returns (bytes memory nextProgressData) {

297:     function _extractProposalType(
298:         bytes memory proposalData
299:     ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {

335:     function _getStorage() internal pure returns (Storage storage stor) {
```

- *ProposalStorage.sol* ( [#L55-L58](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55-L58) ):

```solidity
55:     function _getSharedProposalStorage()
56:         internal
57:         pure
58:         returns (SharedProposalStorage storage stor)
```

- *SetGovernanceParameterProposal.sol* ( [#L25-L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L25-L27) ):

```solidity
25:     function _executeSetGovernanceParameter(
26:         IProposalExecutionEngine.ExecuteProposalParams memory params
27:     ) internal returns (bytes memory) {
```

- *SetSignatureValidatorProposal.sol* ( [#L28-L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L28-L30), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42), [#L47-L50](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L47-L50) ):

```solidity
28:     function _executeSetSignatureValidator(
29:         IProposalExecutionEngine.ExecuteProposalParams memory params
30:     ) internal returns (bytes memory nextProgressData) {

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

47:     function _getSetSignatureValidatorProposalStorage()
48:         private
49:         pure
50:         returns (SetSignatureValidatorProposalStorage storage stor)
```

- *OffChainSignatureValidator.sol* ( [#L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L28) ):

```solidity
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

- *Implementation.sol* ( [#L40](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L40) ):

```solidity
40:     function IMPL() external view returns (address) {
```

</details>

### [N&#x2011;43] State variables should have NatSpec descriptions

It is [recommended](https://docs.soliditylang.org/en/v0.8.20/natspec-format.html#tags) to use the NatSpec tags `@notice`, `@dev`, `@return`, `@inheritdoc` for public state variables, and `@dev` for non-public state variables.

<details>
<summary>There are 12 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L88](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L88) ):

```solidity
88:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186), [#L187](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L187), [#L191](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L191) ):

```solidity
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;

191:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L42) ):

```solidity
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

42:     IGlobals private immutable _GLOBALS;
```

- *ProposalExecutionEngine.sol* ( [#L101](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L101), [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L104) ):

```solidity
101:     IGlobals private immutable _GLOBALS;

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));
```

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39), [#L40](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L40) ):

```solidity
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =
```

</details>

### [N&#x2011;44] Contract uses both `require()`/`revert()` as well as custom errors

Consider using just one method in a single file.

There is 1 instance:

- *ProposalExecutionEngine.sol* ( [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24) ):

```solidity
24: contract ProposalExecutionEngine is
```

### [N&#x2011;45] Functions and modifiers should be named in mixedCase style

As the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.21/style-guide.html#function-names) suggests: functions and modifiers should be named in mixedCase style.

There is 1 instance:

- *Implementation.sol* ( [#L40](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L40) ):

```solidity
40:     function IMPL() external view returns (address) {
```

### [N&#x2011;46] Variable names for `immutable`s should use UPPER_CASE_WITH_UNDERSCORES

For `immutable` variable names, each word should use all capital letters, with underscores separating each word (UPPER_CASE_WITH_UNDERSCORES)

There is 1 instance:

- *Implementation.sol* ( [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L12) ):

```solidity
12:     address public immutable implementation;
```

### [N&#x2011;47] Order of contract layout does not follow the Solidity Style Guide

As suggested by the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#order-of-layout):
- Layout contract elements in the following order: `pragma statements`, `import statements`, `interfaces`, `libraries`, `contracts`.
- Inside each contract, library or interface, use the following order: `type declarations`, `state variables`, `events`, `errors`, `modifiers`, `functions`.

<details>
<summary>There are 14 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L75](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L75), [#L88](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L88) ):

```solidity
/// @audit ↑ Out of order with error InvalidMessageValue
75:     event Contributed(

/// @audit ↑ Out of order with event EmergencyExecute
88:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186), [#L231](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L231) ):

```solidity
/// @audit ↑ Out of order with error TooManyHosts
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

/// @audit ↑ Out of order with function _assertActiveMember()
231:     modifier onlyPartyDao() {
```

- *PartyGovernanceNFT.sol* ( [#L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L27), [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L67) ):

```solidity
/// @audit ↑ Out of order with error NothingToBurnError
27:     event AuthorityAdded(address indexed authority);

/// @audit ↑ Out of order with event PartyCardIntrinsicVotingPowerSet
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

/// @audit ↑ Out of order with function _assertAuthority()
67:     modifier onlySelf() {
```

- *ProposalExecutionEngine.sol* ( [#L48](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L48), [#L101](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L101) ):

```solidity
/// @audit ↑ Out of order with error UnsupportedProposalTypeError
48:     enum ProposalType {

/// @audit ↑ Out of order with error UnexpectedProposalEngineImplementationError
101:     IGlobals private immutable _GLOBALS;
```

- *SetGovernanceParameterProposal.sol* ( [#L11](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L11) ):

```solidity
/// @audit ↑ Out of order with error InvalidGovernanceParameter
11:     event VoteDurationSet(uint256 oldValue, uint256 newValue);
```

- *OffChainSignatureValidator.sol* ( [#L15](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L15), [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L22) ):

```solidity
/// @audit ↑ Out of order with error MessageHashMismatch
15:     event SigningThresholdBpsSet(

/// @audit ↑ Out of order with event SigningThresholdBpsSet
22:     mapping(Party party => uint96 thresholdBps) public signingThersholdBps;
```

- *Implementation.sol* ( [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L12), [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L22) ):

```solidity
/// @audit ↑ Out of order with error OnlyDelegateCallError
12:     address public immutable implementation;

/// @audit ↑ Out of order with constructor ()
22:     modifier onlyDelegateCall() virtual {
```

</details>

### [N&#x2011;48] Missing zero address check in functions with address parameters

Adding a zero address check for each address type parameter can prevent errors.

<details>
<summary>There are 19 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L366-L370](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L366-L370) ):

```solidity
/// @audit `targetAddress not checked`
366:     function emergencyExecute(
367:         address targetAddress,
368:         bytes calldata targetCallData,
369:         uint256 amountEth
370:     ) external payable {
```

- *InitialETHCrowdfund.sol* ( [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L235-L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L235-L240) ):

```solidity
/// @audit `delegate not checked`
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit `delegate not checked`
185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit `recipient not checked`
/// @audit `initialDelegate not checked`
235:     function contributeFor(
236:         uint256 tokenId,
237:         address payable recipient,
238:         address initialDelegate,
239:         bytes memory gateData
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L451), [#L487-L492](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487-L492), [#L706-L713](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706-L713), [#L841-L845](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L841-L845) ):

```solidity
/// @audit `delegate not checked`
451:     function delegateVotingPower(address delegate) external {

/// @audit `token not checked`
487:     function distribute(
488:         uint256 amount,
489:         ITokenDistributor.TokenType tokenType,
490:         address token,
491:         uint256 tokenId
492:     ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {

/// @audit `preciousTokens not checked`
706:     function execute(
707:         uint256 proposalId,
708:         Proposal memory proposal,
709:         IERC721[] memory preciousTokens,
710:         uint256[] memory preciousTokenIds,
711:         bytes calldata progressData,
712:         bytes calldata extraData
713:     ) external payable {

/// @audit `targetAddress not checked`
841:     function emergencyExecute(
842:         address targetAddress,
843:         bytes calldata targetCallData,
844:         uint256 amountEth
845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {
```

- *PartyGovernanceNFT.sol* ( [#L166-L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L170), [#L344-L349](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L344-L349), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L451), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470), [#L479](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L479) ):

```solidity
/// @audit `owner not checked`
/// @audit `delegate not checked`
166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {

/// @audit `receiver not checked`
344:     function rageQuit(
345:         uint256[] calldata tokenIds,
346:         IERC20[] calldata withdrawTokens,
347:         uint256[] calldata minWithdrawAmounts,
348:         address receiver
349:     ) external {

/// @audit `owner not checked`
/// @audit `to not checked`
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit `owner not checked`
/// @audit `to not checked`
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit `owner not checked`
/// @audit `to not checked`
465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {

/// @audit `authority not checked`
479:     function addAuthority(address authority) external onlySelf {
```

</details>

### [N&#x2011;49] Named imports of parent contracts are missing

<details>
<summary>There are 15 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
/// @audit Implementation
9: contract ETHCrowdfundBase is Implementation {
```

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
/// @audit PartyGovernance
/// @audit ERC721
/// @audit IERC2981
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalExecutionEngine.sol* ( [#L24-L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24-L38) ):

```solidity
/// @audit IProposalExecutionEngine
/// @audit Implementation
/// @audit ProposalStorage
/// @audit ListOnOpenseaProposal
/// @audit ListOnOpenseaAdvancedProposal
/// @audit ListOnZoraProposal
/// @audit FractionalizeProposal
/// @audit ArbitraryCallsProposal
/// @audit DistributeProposal
/// @audit AddAuthorityProposal
/// @audit OperatorProposal
24: contract ProposalExecutionEngine is
25:     IProposalExecutionEngine,
26:     Implementation,
27:     ProposalStorage,
28:     ListOnOpenseaProposal,
29:     ListOnOpenseaAdvancedProposal,
30:     ListOnZoraProposal,
31:     FractionalizeProposal,
32:     ArbitraryCallsProposal,
33:     DistributeProposal,
34:     AddAuthorityProposal,
35:     OperatorProposal,
36:     SetSignatureValidatorProposal,
37:     SetGovernanceParameterProposal,
38:     IERC1271
```

</details>

### [N&#x2011;50] Constants should be put on the left side of comparisons

Putting constants on the left side of comparison statements is a best practice known as [Yoda conditions](https://en.wikipedia.org/wiki/Yoda_conditions).
Although solidity's static typing system prevents accidental assignments within conditionals, adopting this practice can improve code readability and consistency, especially when working across multiple languages.

<details>
<summary>There are 66 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L153](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L153), [#L165](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L165), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L176), [#L181](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L181), [#L202](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L202), [#L213](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L213), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L263), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L272), [#L286](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L286), [#L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L324), [#L348](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L348), [#L348](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L348) ):

```solidity
/// @audit put `0` on the left
153:         if (opts.maxTotalContributions == 0) {

/// @audit put `0` on the left
165:         if (opts.exchangeRateBps == 0) revert InvalidExchangeRateError(opts.exchangeRateBps);

/// @audit put `0` on the left
176:         if (maxTotalContributions == 0) {

/// @audit put `0` on the left
181:         if (expiry_ == 0) {

/// @audit put `address(0)` on the left
202:         if (msg.sender == contributor || oldDelegate == address(0)) {

/// @audit put `0` on the left
213:         if (amount == 0) return 0;

/// @audit put `address(0)` on the left
263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

/// @audit put `0` on the left
272:         if (votingPower == 0) revert ZeroVotingPowerError();

/// @audit put `address(0)` on the left
286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

/// @audit put `address(0)` on the left
324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

/// @audit put `address(0)` on the left
348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {

/// @audit put `0` on the left
348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {
```

- *InitialETHCrowdfund.sol* ( [#L283](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L283), [#L289](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L289), [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L298), [#L300](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L300) ):

```solidity
/// @audit put `address(0)` on the left
283:         if (delegate == address(0)) {

/// @audit put `IGateKeeper(address(0))` on the left
289:         if (_gateKeeper != IGateKeeper(address(0))) {

/// @audit put `0` on the left
298:         if (amount == 0) return 0;

/// @audit put `0` on the left
300:         if (tokenId == 0) {
```

- *PartyGovernance.sol* ( [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L225), [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L225), [#L338](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L338), [#L445](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L445), [#L460](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L460), [#L505](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L505), [#L505](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L505), [#L510](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L510), [#L644](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L644), [#L797](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L797), [#L803](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L803), [#L900](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L900), [#L911](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L911), [#L949](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L949), [#L951](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L951), [#L979](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L979), [#L979](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L979), [#L1033](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1033), [#L1048](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1048), [#L1068](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1068), [#L1072](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1072), [#L1073](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1073), [#L1088](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1088), [#L1119](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1119) ):

```solidity
/// @audit put `0` on the left
225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

/// @audit put `0` on the left
225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

/// @audit put `0x49064906` on the left
338:             interfaceId == 0x49064906;

/// @audit put `0` on the left
445:         return high == 0 ? type(uint256).max : high - 1;

/// @audit put `address(0)` on the left
460:         if (newPartyHost != address(0)) {

/// @audit put `0` on the left
505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

/// @audit put `0` on the left
505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

/// @audit put `0` on the left
510:         if (_getSharedProposalStorage().governanceValues.totalVotingPower == 0) {

/// @audit put `0` on the left
644:             values.passedTime == 0 &&

/// @audit put `0` on the left
797:             if (globalMaxCancelDelay != 0) {

/// @audit put `0` on the left
803:             if (globalMinCancelDelay != 0) {

/// @audit put `0` on the left
900:         return nextProgressData.length == 0;

/// @audit put `0` on the left
911:         if (snapsLength != 0) {

/// @audit put `address(0)` on the left
949:         oldDelegate = oldDelegate == address(0) ? voter : oldDelegate;

/// @audit put `address(0)` on the left
951:         delegate = delegate == address(0) ? oldDelegate : delegate;

/// @audit put `address(0)` on the left
979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

/// @audit put `address(0)` on the left
979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

/// @audit put `0` on the left
1033:         if (n != 0) {

/// @audit put `0` on the left
1048:         if (n != 0) {

/// @audit put `0` on the left
1068:         if (pv.proposedTime == 0) {

/// @audit put `0` on the left
1072:         if (pv.executedTime != 0) {

/// @audit put `0` on the left
1073:             if (pv.completedTime == 0) {

/// @audit put `0` on the left
1088:         if (pv.passedTime != 0) {

/// @audit put `0.9999e4` on the left
1119:         return acceptanceRatio >= 0.9999e4;
```

- *PartyGovernanceNFT.sol* ( [#L106](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L106), [#L157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L157), [#L179](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L179), [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L196), [#L216](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L216), [#L321](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L321), [#L329](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L329), [#L330](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L330), [#L350](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L350), [#L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L358), [#L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L360) ):

```solidity
/// @audit put `0` on the left
106:         if (customizationPresetId != 0) {

/// @audit put `0` on the left
157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

/// @audit put `0` on the left
179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

/// @audit put `address(0)` on the left
196:         if (delegate_ != address(0)) {

/// @audit put `0` on the left
216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

/// @audit put `DISABLE_RAGEQUIT_PERMANENTLY` on the left
321:         if (newRageQuitTimestamp == DISABLE_RAGEQUIT_PERMANENTLY) {

/// @audit put `ENABLE_RAGEQUIT_PERMANENTLY` on the left
329:             oldRageQuitTimestamp == ENABLE_RAGEQUIT_PERMANENTLY ||

/// @audit put `DISABLE_RAGEQUIT_PERMANENTLY` on the left
330:             oldRageQuitTimestamp == DISABLE_RAGEQUIT_PERMANENTLY

/// @audit put `0` on the left
350:         if (tokenIds.length == 0) revert NothingToBurnError();

/// @audit put `ENABLE_RAGEQUIT_PERMANENTLY` on the left
358:             if (currentRageQuitTimestamp != ENABLE_RAGEQUIT_PERMANENTLY) {

/// @audit put `DISABLE_RAGEQUIT_PERMANENTLY` on the left
360:                     currentRageQuitTimestamp == DISABLE_RAGEQUIT_PERMANENTLY ||
```

- *ProposalExecutionEngine.sol* ( [#L128](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L128), [#L131](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L131), [#L150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L150), [#L155](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L155), [#L165](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L165), [#L168](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L168), [#L169](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L169), [#L197](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L197), [#L209](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L209), [#L234](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L234) ):

```solidity
/// @audit put `address(0)` on the left
128:         if (oldImpl != address(0)) return;

/// @audit put `0` on the left
131:         if (initializeData.length == 0) return;

/// @audit put `0` on the left
150:         if (params.proposalId == 0) {

/// @audit put `0` on the left
155:         if (currentInProgressProposalId == 0) {

/// @audit put `0` on the left
165:             if (nextProgressDataHash == 0) {

/// @audit put `0` on the left
168:                 assert(currentInProgressProposalId == 0);

/// @audit put `0` on the left
169:                 if (params.progressData.length != 0) {

/// @audit put `0` on the left
197:         if (nextProgressData.length == 0) {

/// @audit put `0` on the left
209:         if (proposalId == 0) {

/// @audit put `address(0)` on the left
234:         if (tx.origin == address(0)) {
```

- *SetGovernanceParameterProposal.sol* ( [#L32](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L32), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L42), [#L53](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L53) ):

```solidity
/// @audit put `0` on the left
32:         if (proposalData.voteDuration != 0) {

/// @audit put `0` on the left
42:         if (proposalData.executionDelay != 0) {

/// @audit put `0` on the left
53:         if (proposalData.passThresholdBps != 0) {
```

- *OffChainSignatureValidator.sol* ( [#L62](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L62), [#L72](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L72) ):

```solidity
/// @audit put `0` on the left
62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {

/// @audit put `0` on the left
72:             thresholdBps == 0 ||
```

</details>

### [N&#x2011;51] Put all system-wide constants in one file

Putting all the system-wide constants in a single file improves code readability, makes it easier to understand the basic configuration and limitations of the system, and makes maintenance easier.

<details>
<summary>There are 9 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186), [#L187](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L187) ):

```solidity
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;
```

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38) ):

```solidity
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;
```

- *ProposalExecutionEngine.sol* ( [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L104) ):

```solidity
104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));
```

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39), [#L40-L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L40-L41) ):

```solidity
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =
41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));
```

- *SetSignatureValidatorProposal.sol* ( [#L13-L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L13-L14) ):

```solidity
13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =
14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));
```

</details>

### [N&#x2011;52] `else`-block not required

One level of nesting can be removed by not having an `else` block when the `if`-block always jumps at the end. For example:
```solidity
if (condition) {
    body1...
    return x;
} else {
    body2...
}
```
can be changed to:
```solidity
if (condition) {
    body1...
    return x;
}
body2...
```

<details>
<summary>There are 3 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L186-L188](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L186-L188) ):

```solidity
186:             if (totalContributions >= minTotalContributions) {
187:                 return CrowdfundLifecycle.Won;
188:             } else {
```

- *InitialETHCrowdfund.sol* ( [#L303-L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L303-L305), [#L384-L408](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L384-L408) ):

```solidity
303:         } else if (disableContributingForExistingCard) {
304:             revert ContributingForExistingCardDisabledError();
305:         } else if (party.ownerOf(tokenId) == contributor) {

384:         if (address(customMetadataProvider) == address(0)) {
385:             return
386:                 opts.governanceOpts.partyFactory.createParty(
387:                     opts.governanceOpts.partyImpl,
388:                     authorities,
389:                     Party.PartyOptions({
390:                         name: opts.name,
391:                         symbol: opts.symbol,
392:                         customizationPresetId: opts.customizationPresetId,
393:                         governance: PartyGovernance.GovernanceOpts({
394:                             hosts: opts.governanceOpts.hosts,
395:                             voteDuration: opts.governanceOpts.voteDuration,
396:                             executionDelay: opts.governanceOpts.executionDelay,
397:                             passThresholdBps: opts.governanceOpts.passThresholdBps,
398:                             totalVotingPower: 0,
399:                             feeBps: opts.governanceOpts.feeBps,
400:                             feeRecipient: opts.governanceOpts.feeRecipient
401:                         }),
402:                         proposalEngine: opts.proposalEngineOpts
403:                     }),
404:                     opts.preciousTokens,
405:                     opts.preciousTokenIds,
406:                     opts.rageQuitTimestamp
407:                 );
408:         } else {
```

</details>

### [N&#x2011;53] Redundant return statement in a function with named return variables

Because the return variable (or its default value) has been assigned, explicit return at the end of the function is unnecessary, as it is returned automatically.

<details>
<summary>There is 1 instance (click to show):</summary>

- *PartyGovernance.sol* ( [#L904-L933](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904-L933) ):

```solidity
904:     function _getVotingPowerSnapshotAt(
905:         address voter,
906:         uint40 timestamp,
907:         uint256 hintIndex
908:     ) internal view returns (VotingPowerSnapshot memory snap) {
909:         VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];
910:         uint256 snapsLength = snaps.length;
911:         if (snapsLength != 0) {
912:             if (
913:                 // Hint is within bounds.
914:                 hintIndex < snapsLength &&
915:                 // Snapshot is not too recent.
916:                 snaps[hintIndex].timestamp <= timestamp &&
917:                 // Snapshot is not too old.
918:                 (hintIndex == snapsLength - 1 || snaps[hintIndex + 1].timestamp > timestamp)
919:             ) {
920:                 return snaps[hintIndex];
921:             }
922: 
923:             // Hint was wrong, fallback to binary search to find snapshot.
924:             hintIndex = findVotingPowerSnapshotIndex(voter, timestamp);
925:             // Check that snapshot was found.
926:             if (hintIndex != type(uint256).max) {
927:                 return snaps[hintIndex];
928:             }
929:         }
930: 
931:         // No snapshot found.
932:         return snap;
933:     }
```

</details>

### [N&#x2011;54] Large multiples of ten should use scientific notation

Use a scientific notation rather than decimal literals (e.g. `1e6` instead of `1000000`), for better code readability.

There are 2 instances:

- *SetGovernanceParameterProposal.sol* ( [#L54](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L54) ):

```solidity
/// @audit 10000 -> 1e4
54:             if (proposalData.passThresholdBps > 10000) {
```

- *OffChainSignatureValidator.sol* ( [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L60) ):

```solidity
/// @audit 10000 -> 1e4
60:             10000;
```

### [N&#x2011;55] High cyclomatic complexity

Consider breaking down these blocks into more manageable units, by splitting things into utility functions, by reducing nesting, and by using early returns.

<details>
<summary>There are 3 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L275-L311](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275-L311) ):

```solidity
275:     function _contribute(
276:         address payable contributor,
277:         address delegate,
278:         uint96 amount,
279:         uint256 tokenId,
280:         bytes memory gateData
281:     ) private returns (uint96 votingPower) {
282:         // Require a non-null delegate.
283:         if (delegate == address(0)) {
284:             revert InvalidDelegateError();
285:         }
286: 
287:         // Must not be blocked by gatekeeper.
288:         IGateKeeper _gateKeeper = gateKeeper;
289:         if (_gateKeeper != IGateKeeper(address(0))) {
290:             if (!_gateKeeper.isAllowed(msg.sender, gateKeeperId, gateData)) {
291:                 revert NotAllowedByGateKeeperError(msg.sender, _gateKeeper, gateKeeperId, gateData);
292:             }
293:         }
294: 
295:         votingPower = _processContribution(contributor, delegate, amount);
296: 
297:         // OK to contribute with zero just to update delegate.
298:         if (amount == 0) return 0;
299: 
300:         if (tokenId == 0) {
301:             // Mint contributor a new party card.
302:             party.mint(contributor, votingPower, delegate);
303:         } else if (disableContributingForExistingCard) {
304:             revert ContributingForExistingCardDisabledError();
305:         } else if (party.ownerOf(tokenId) == contributor) {
306:             // Increase voting power of contributor's existing party card.
307:             party.increaseVotingPower(tokenId, votingPower);
308:         } else {
309:             revert NotOwnerError(tokenId);
310:         }
311:     }
```

- *PartyGovernance.sol* ( [#L1064-L1109](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064-L1109) ):

```solidity
1064:     function _getProposalStatus(
1065:         ProposalStateValues memory pv
1066:     ) private view returns (ProposalStatus status) {
1067:         // Never proposed.
1068:         if (pv.proposedTime == 0) {
1069:             return ProposalStatus.Invalid;
1070:         }
1071:         // Executed at least once.
1072:         if (pv.executedTime != 0) {
1073:             if (pv.completedTime == 0) {
1074:                 return ProposalStatus.InProgress;
1075:             }
1076:             // completedTime high bit will be set if cancelled.
1077:             if (pv.completedTime & UINT40_HIGH_BIT == UINT40_HIGH_BIT) {
1078:                 return ProposalStatus.Cancelled;
1079:             }
1080:             return ProposalStatus.Complete;
1081:         }
1082:         // Vetoed.
1083:         if (pv.votes == type(uint96).max) {
1084:             return ProposalStatus.Defeated;
1085:         }
1086:         uint40 t = uint40(block.timestamp);
1087:         GovernanceValues memory gv = _getSharedProposalStorage().governanceValues;
1088:         if (pv.passedTime != 0) {
1089:             // Ready.
1090:             if (pv.passedTime + gv.executionDelay <= t) {
1091:                 return ProposalStatus.Ready;
1092:             }
1093:             // If unanimous, we skip the execution delay.
1094:             if (_isUnanimousVotes(pv.votes, pv.totalVotingPower)) {
1095:                 return ProposalStatus.Ready;
1096:             }
1097:             // If all hosts voted, skip execution delay
1098:             if (_hostsAccepted(pv.numHosts, pv.numHostsAccepted)) {
1099:                 return ProposalStatus.Ready;
1100:             }
1101:             // Passed.
1102:             return ProposalStatus.Passed;
1103:         }
1104:         // Voting window expired.
1105:         if (pv.proposedTime + gv.voteDuration <= t) {
1106:             return ProposalStatus.Defeated;
1107:         }
1108:         return ProposalStatus.Voting;
1109:     }
```

- *ProposalExecutionEngine.sol* ( [#L146-L204](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L146-L204) ):

```solidity
146:     function executeProposal(
147:         ExecuteProposalParams memory params
148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {
149:         // Must have a valid proposal ID.
150:         if (params.proposalId == 0) {
151:             revert ZeroProposalIdError();
152:         }
153:         Storage storage stor = _getStorage();
154:         uint256 currentInProgressProposalId = stor.currentInProgressProposalId;
155:         if (currentInProgressProposalId == 0) {
156:             // No proposal is currently in progress.
157:             // Mark this proposal as the one in progress.
158:             stor.currentInProgressProposalId = params.proposalId;
159:         } else if (currentInProgressProposalId != params.proposalId) {
160:             // Only one proposal can be in progress at a time.
161:             revert ProposalExecutionBlockedError(params.proposalId, currentInProgressProposalId);
162:         }
163:         {
164:             bytes32 nextProgressDataHash = stor.nextProgressDataHash;
165:             if (nextProgressDataHash == 0) {
166:                 // Expecting no progress data.
167:                 // This is the state if there is no current `InProgress` proposal.
168:                 assert(currentInProgressProposalId == 0);
169:                 if (params.progressData.length != 0) {
170:                     revert ProposalProgressDataInvalidError(
...... OMITTED ......
180:                     revert ProposalProgressDataInvalidError(progressDataHash, nextProgressDataHash);
181:                 }
182:             }
183:             // Temporarily set the expected next progress data hash to an
184:             // unachievable constant to act as a reentrancy guard.
185:             stor.nextProgressDataHash = bytes32(type(uint256).max);
186:         }
187: 
188:         // Note that we do not enforce that the proposal has not been executed
189:         // (and completed) before in this contract. That is enforced by PartyGovernance.
190: 
191:         // Execute the proposal.
192:         ProposalType pt;
193:         (pt, params.proposalData) = _extractProposalType(params.proposalData);
194:         nextProgressData = _execute(pt, params);
195: 
196:         // If progress data is empty, the proposal is complete.
197:         if (nextProgressData.length == 0) {
198:             stor.currentInProgressProposalId = 0;
199:             stor.nextProgressDataHash = 0;
200:         } else {
201:             // Remember the next progress data.
202:             stor.nextProgressDataHash = keccak256(nextProgressData);
203:         }
204:     }
```

</details>

### [N&#x2011;56] Typos

There are 6 instances:

- *InitialETHCrowdfund.sol* ( [#L75](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L75), [#L93](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L93), [#L219](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L219), [#L266](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L266) ):

```solidity
/// @audit Datas
75:         bytes[] gateDatas;

/// @audit Datas
93:         bytes[] gateDatas;

/// @audit Datas
219:                 args.gateDatas[i]

/// @audit Datas
266:                 args.gateDatas[i]
```

- *SetSignatureValidatorProposal.sol* ( [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L22) ):

```solidity
/// @audit Emmitted
22:     /// @notice Emmitted when the signature validator for a hash is updated
```

- *OffChainSignatureValidator.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L14) ):

```solidity
/// @audit emmitted
14:     /// @notice Event emmitted when signing threshold updated
```

### [N&#x2011;57] Consider bounding input array length

The functions below take in an unbounded array, and make function calls for entries in the array. While the function will revert if it eventually runs out of gas, it may be a nicer user experience to require() that the length of the array is below some reasonable maximum, so that the user doesn't have to use up a full transaction's gas only to see that the transaction reverts.

There are 7 instances:

- *InitialETHCrowdfund.sol* ( [#L357](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L357) ):

```solidity
357:         for (uint256 i; i < numRefunds; ++i) {
```

- *PartyGovernance.sol* ( [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L305) ):

```solidity
305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {
```

- *PartyGovernanceNFT.sol* ( [#L102](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L102), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L272), [#L378](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L378), [#L391](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L391), [#L408](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L408) ):

```solidity
102:             for (uint256 i; i < authorities.length; ++i) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {
```

### [N&#x2011;58] Unnecessary casting

Unnecessary castings can be removed.

There are 3 instances:

- *ETHCrowdfundBase.sol* ( [#L356](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L356) ):

```solidity
/// @audit payable(fundingSplitRecipient_)
356:         payable(fundingSplitRecipient_).transferEth(splitAmount);
```

- *PartyGovernanceNFT.sol* ( [#L420](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L420) ):

```solidity
/// @audit payable(feeRecipient)
420:                         payable(feeRecipient).transferEth(fee);
```

- *ProposalExecutionEngine.sol* ( [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L331) ):

```solidity
/// @audit address(implementation)
331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);
```

### [N&#x2011;59] Unused contract variables

The following state variables are defined but not used.
It is recommended to check the code for logical omissions that cause them not to be used. If it's determined that they are not needed anywhere, it's best to remove them from the codebase to improve code clarity and minimize confusion.

There is 1 instance:

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39) ):

```solidity
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;
```

### [N&#x2011;60] Unused named return

Declaring named returns, but not using them, is confusing to the reader. Consider either completely removing them (by declaring just the type without a name), or remove the return statement and do a variable assignment. This would improve the readability of the code, and it may also help reduce regressions during future code refactors.

<details>
<summary>There are 12 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L175) ):

```solidity
/// @audit lifecycle
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {
```

- *InitialETHCrowdfund.sol* ( [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L235-L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L235-L240) ):

```solidity
/// @audit votingPower
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit votingPower
185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit votingPower
235:     function contributeFor(
236:         uint256 tokenId,
237:         address payable recipient,
238:         address initialDelegate,
239:         bytes memory gateData
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L355-L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L355-L358), [#L368-L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L368-L372), [#L423-L426](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L423-L426), [#L487-L492](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487-L492), [#L595](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L595), [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L1064-L1066](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064-L1066) ):

```solidity
/// @audit votingPower
355:     function getVotingPowerAt(
356:         address voter,
357:         uint40 timestamp
358:     ) external view returns (uint96 votingPower) {

/// @audit votingPower
368:     function getVotingPowerAt(
369:         address voter,
370:         uint40 timestamp,
371:         uint256 snapIndex
372:     ) public view returns (uint96 votingPower) {

/// @audit index
423:     function findVotingPowerSnapshotIndex(
424:         address voter,
425:         uint40 timestamp
426:     ) public view returns (uint256 index) {

/// @audit distInfo
487:     function distribute(
488:         uint256 amount,
489:         ITokenDistributor.TokenType tokenType,
490:         address token,
491:         uint256 tokenId
492:     ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {

/// @audit totalVotes
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

/// @audit completed
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

/// @audit status
1064:     function _getProposalStatus(
1065:         ProposalStateValues memory pv
1066:     ) private view returns (ProposalStatus status) {
```

- *ProposalExecutionEngine.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L141) ):

```solidity
/// @audit id
141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {
```

</details>

### [N&#x2011;61] Use delete instead of assigning values to `false`

The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

There is 1 instance:

- *PartyGovernance.sol* ( [#L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L470) ):

```solidity
470:         isHost[msg.sender] = false;
```

### [N&#x2011;62] Consider using `delete` rather than assigning zero to clear values

The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

There are 5 instances:

- *PartyGovernance.sol* ( [#L758](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L758) ):

```solidity
758:             proposalState.values.completedTime = 0;
```

- *ProposalExecutionEngine.sol* ( [#L198](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L198), [#L199](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L199), [#L221](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L221), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L222) ):

```solidity
198:             stor.currentInProgressProposalId = 0;

199:             stor.nextProgressDataHash = 0;

221:         stor.currentInProgressProposalId = 0;

222:         stor.nextProgressDataHash = 0;
```

### [N&#x2011;63] Use the latest Solidity version

Upgrading to the [latest solidity version](https://github.com/ethereum/solc-js/tags) (0.8.19 for L2s) can optimize gas usage, take advantage of new features and improve overall contract efficiency. Where possible, based on compatibility requirements, it is recommended to use newer/latest solidity version to take advantage of the latest optimizations and features.

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *InitialETHCrowdfund.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *PartyGovernance.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *PartyGovernanceNFT.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *ProposalExecutionEngine.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *ProposalStorage.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *SetGovernanceParameterProposal.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *SetSignatureValidatorProposal.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *OffChainSignatureValidator.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *Implementation.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

</details>

### [N&#x2011;64] Named mappings are recommended

[Named mappings](https://docs.soliditylang.org/en/v0.8.18/types.html#mapping-types) (with syntax `mapping(KeyType KeyName? => ValueType ValueName?)`) are recommended.It can make the mapping variables clearer, more readable and easier to maintain.

<details>
<summary>There are 9 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L131](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L131) ):

```solidity
131:     mapping(address => address) public delegationsByContributor;
```

- *PartyGovernance.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L141), [#L206](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L206), [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L208), [#L212](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L212), [#L214](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L214) ):

```solidity
141:         mapping(address => bool) hasVoted;

206:     mapping(address => bool) public isHost;

208:     mapping(address => address) public delegationsByVoter;

212:     mapping(uint256 => ProposalState) private _proposalStateByProposalId;

214:     mapping(address => VotingPowerSnapshot[]) private _votingPowerSnapshotsByVoter;
```

- *PartyGovernanceNFT.sol* ( [#L57](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L57), [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L59) ):

```solidity
57:     mapping(uint256 => uint256) public votingPowerByTokenId;

59:     mapping(address => bool) public isAuthority;
```

- *SetSignatureValidatorProposal.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L10) ):

```solidity
10:         mapping(bytes32 => IERC1271) signatureValidators;
```

</details>

### [N&#x2011;65] Use `uint256`/`int256` instead of `uint`/`int`

It is recommended to use `uint256`/`int256` instead of `uint`/`int` in function parameters, since they are used for function signatures.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L379) ):

```solidity
/// @audit uint i
379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {
```

### [N&#x2011;66] Using underscore at the end of variable name

The use of the underscore at the end of the variable name is unusual, consider refactoring it.

<details>
<summary>There are 27 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L180](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L180), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L222), [#L228](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L228), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L255), [#L261](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L261), [#L262](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L262), [#L284](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L284), [#L285](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L285), [#L292](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L292), [#L301](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L301), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317), [#L322](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L322), [#L323](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L323), [#L346](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L346), [#L347](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L347) ):

```solidity
/// @audit expiry_
180:         uint256 expiry_ = expiry;

/// @audit maxContribution_
222:         uint96 maxContribution_ = maxContribution;

/// @audit maxTotalContributions_
228:         uint96 maxTotalContributions_ = maxTotalContributions;

/// @audit minContribution_
255:         uint96 minContribution_ = minContribution;

/// @audit fundingSplitRecipient_
261:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
262:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit fundingSplitRecipient_
284:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
285:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit totalContributions_
292:         uint96 totalContributions_ = totalContributions;

/// @audit minTotalContributions_
301:             uint96 minTotalContributions_ = minTotalContributions;

/// @audit totalContributions_
317:     function _finalize(uint96 totalContributions_) internal {

/// @audit fundingSplitRecipient_
322:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
323:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit fundingSplitRecipient_
346:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
347:         uint16 fundingSplitBps_ = fundingSplitBps;
```

- *InitialETHCrowdfund.sol* ( [#L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L115) ):

```solidity
/// @audit party_
115:         Party party_ = _createParty(partyOpts, customMetadataProvider, customMetadata);
```

- *PartyGovernance.sol* ( [#L522](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L522), [#L523](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L523) ):

```solidity
/// @audit feeRecipient_
522:         address payable feeRecipient_ = feeRecipient;

/// @audit feeBps_
523:         uint16 feeBps_ = feeBps;
```

- *PartyGovernanceNFT.sol* ( [#L82](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L82), [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L83), [#L90](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L90), [#L172](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L172), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L176), [#L195](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L195), [#L210](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L210), [#L353](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L353), [#L407](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L407) ):

```solidity
/// @audit name_
82:         string memory name_,

/// @audit symbol_
83:         string memory symbol_,

/// @audit rageQuitTimestamp_
90:         uint40 rageQuitTimestamp_

/// @audit mintedVotingPower_
172:         uint96 mintedVotingPower_ = mintedVotingPower;

/// @audit votingPower_
176:         uint96 votingPower_ = votingPower.safeCastUint256ToUint96();

/// @audit delegate_
195:         address delegate_ = delegationsByVoter[owner];

/// @audit mintedVotingPower_
210:         uint96 mintedVotingPower_ = mintedVotingPower;

/// @audit isAuthority_
353:         bool isAuthority_ = isAuthority[msg.sender];

/// @audit feeBps_
407:             uint16 feeBps_ = feeBps;
```

</details>

### [N&#x2011;67] Use a struct to encapsulate multiple function parameters

If a function has too many parameters, replacing them with a struct can improve code readability and maintainability, increase reusability, and reduce the likelihood of errors when passing the parameters.

There are 2 instances:

- *PartyGovernance.sol* ( [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868) ):

```solidity
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {
```

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

### [N&#x2011;68] Addresses shouldn't be hard-coded

It is often better to declare `address`es as `constant` or `immutable` which can be assigned in constructor. This allows the code to remain the same across deployments on different networks, and avoids recompilation when addresses need to change.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38) ):

```solidity
38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;
```

### [N&#x2011;69] Events that mark critical parameter changes should contain both the old and the new value

This should especially be done if the new value is not required to be different from the old value.

There is 1 instance:

- *SetSignatureValidatorProposal.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L39) ):

```solidity
39:         emit SignatureValidatorSet(data.signatureHash, data.signatureValidator);
```

### [N&#x2011;70] Contract variables should have comments

Consider adding some comments on non-public contract variables to explain what they are supposed to do. This will help for future code reviews.

There are 4 instances:

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186), [#L187](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L187) ):

```solidity
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;
```

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39), [#L40-L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L40-L41) ):

```solidity
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =
41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));
```

### [N&#x2011;71] Modifier declarations should have NatSpec descriptions

There are 6 instances:

- *PartyGovernance.sol* ( [#L231](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L231), [#L242](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L242), [#L251](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L251) ):

```solidity
231:     modifier onlyPartyDao() {

242:     modifier onlyPartyDaoOrHost() {

251:     modifier onlyWhenEmergencyExecuteAllowed() {
```

- *PartyGovernanceNFT.sol* ( [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L67) ):

```solidity
67:     modifier onlySelf() {
```

- *Implementation.sol* ( [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L22), [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L29) ):

```solidity
22:     modifier onlyDelegateCall() virtual {

29:     modifier onlyInitialize() {
```

### [N&#x2011;72] Empty bytes check is missing

Passing empty bytes to a function can cause unexpected behavior, such as certain operations failing, producing incorrect results, or wasting gas. It is recommended to check that all byte parameters are not empty.

<details>
<summary>There are 9 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L366-L370](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L366-L370) ):

```solidity
/// @audit targetCallData
366:     function emergencyExecute(
367:         address targetAddress,
368:         bytes calldata targetCallData,
369:         uint256 amountEth
370:     ) external payable {
```

- *InitialETHCrowdfund.sol* ( [#L108-L113](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L108-L113), [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L235-L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L235-L240) ):

```solidity
/// @audit customMetadata
108:     function initialize(
109:         InitialETHCrowdfundOptions memory crowdfundOpts,
110:         ETHPartyOptions memory partyOpts,
111:         MetadataProvider customMetadataProvider,
112:         bytes memory customMetadata
113:     ) external payable onlyInitialize {

/// @audit gateData
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit gateData
185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit gateData
235:     function contributeFor(
236:         uint256 tokenId,
237:         address payable recipient,
238:         address initialDelegate,
239:         bytes memory gateData
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L706-L713](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706-L713), [#L841-L845](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L841-L845) ):

```solidity
/// @audit progressData
/// @audit extraData
706:     function execute(
707:         uint256 proposalId,
708:         Proposal memory proposal,
709:         IERC721[] memory preciousTokens,
710:         uint256[] memory preciousTokenIds,
711:         bytes calldata progressData,
712:         bytes calldata extraData
713:     ) external payable {

/// @audit targetCallData
841:     function emergencyExecute(
842:         address targetAddress,
843:         bytes calldata targetCallData,
844:         uint256 amountEth
845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {
```

- *PartyGovernanceNFT.sol* ( [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470) ):

```solidity
/// @audit data
465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {
```

</details>

### [N&#x2011;73] Contract functions should use an `interface`

All `external`/`public` functions should extend an `interface`. This is useful to ensure that the whole API is extracted and can be more easily integrated by other projects.

<details>
<summary>There are 52 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L175), [#L278-L280](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L278-L280), [#L291](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L291), [#L339](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L339), [#L366-L370](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L366-L370), [#L388](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L388) ):

```solidity
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

278:     function convertVotingPowerToContribution(
279:         uint96 votingPower
280:     ) public view returns (uint96 amount) {

291:     function finalize() external {

339:     function sendFundingSplit() external returns (uint96 splitAmount) {

366:     function emergencyExecute(
367:         address targetAddress,
368:         bytes calldata targetCallData,
369:         uint256 amountEth
370:     ) external payable {

388:     function disableEmergencyExecute() external {
```

- *InitialETHCrowdfund.sol* ( [#L108-L113](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L108-L113), [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L204-L206](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L204-L206), [#L235-L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L235-L240), [#L255-L257](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L255-L257), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L318), [#L350-L353](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L350-L353) ):

```solidity
108:     function initialize(
109:         InitialETHCrowdfundOptions memory crowdfundOpts,
110:         ETHPartyOptions memory partyOpts,
111:         MetadataProvider customMetadataProvider,
112:         bytes memory customMetadata
113:     ) external payable onlyInitialize {

164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

204:     function batchContribute(
205:         BatchContributeArgs calldata args
206:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

235:     function contributeFor(
236:         uint256 tokenId,
237:         address payable recipient,
238:         address initialDelegate,
239:         bytes memory gateData
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {

255:     function batchContributeFor(
256:         BatchContributeForArgs calldata args
257:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

318:     function refund(uint256 tokenId) external returns (uint96 amount) {

350:     function batchRefund(
351:         uint256[] calldata tokenIds,
352:         bool revertOnFailure
353:     ) external returns (uint96[] memory amounts) {
```

- *PartyGovernance.sol* ( [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L333), [#L342](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L342), [#L347](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L347), [#L355-L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L355-L358), [#L368-L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L368-L372), [#L381-L383](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L381-L383), [#L390](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L390), [#L399](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L399), [#L423-L426](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L423-L426), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L451), [#L457](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L457), [#L487-L492](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487-L492), [#L553-L556](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L553-L556), [#L595](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L595), [#L665](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L665), [#L706-L713](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706-L713), [#L771](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L771), [#L841-L845](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L841-L845), [#L855](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L855) ):

```solidity
333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {

342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {

355:     function getVotingPowerAt(
356:         address voter,
357:         uint40 timestamp
358:     ) external view returns (uint96 votingPower) {

368:     function getVotingPowerAt(
369:         address voter,
370:         uint40 timestamp,
371:         uint256 snapIndex
372:     ) public view returns (uint96 votingPower) {

381:     function getProposalStateInfo(
382:         uint256 proposalId
383:     ) external view returns (ProposalStatus status, ProposalStateValues memory values) {

390:     function getGovernanceValues() external view returns (GovernanceValues memory) {

399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

423:     function findVotingPowerSnapshotIndex(
424:         address voter,
425:         uint40 timestamp
426:     ) public view returns (uint256 index) {

451:     function delegateVotingPower(address delegate) external {

457:     function abdicateHost(address newPartyHost) external {

487:     function distribute(
488:         uint256 amount,
489:         ITokenDistributor.TokenType tokenType,
490:         address token,
491:         uint256 tokenId
492:     ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {

553:     function propose(
554:         Proposal memory proposal,
555:         uint256 latestSnapIndex
556:     ) external returns (uint256 proposalId) {

595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

665:     function veto(uint256 proposalId) external {

706:     function execute(
707:         uint256 proposalId,
708:         Proposal memory proposal,
709:         IERC721[] memory preciousTokens,
710:         uint256[] memory preciousTokenIds,
711:         bytes calldata progressData,
712:         bytes calldata extraData
713:     ) external payable {

771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {

841:     function emergencyExecute(
842:         address targetAddress,
843:         bytes calldata targetCallData,
844:         uint256 amountEth
845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {

855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {
```

- *PartyGovernanceNFT.sol* ( [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123), [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L129), [#L146](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L146), [#L154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L154), [#L166-L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L170), [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L208), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L236), [#L247](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L247), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L255), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L263), [#L310](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L310), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L318), [#L344-L349](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L344-L349), [#L479](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L479), [#L486](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L486) ):

```solidity
123:     function tokenURI(uint256) public view override returns (string memory) {

129:     function contractURI() external view returns (string memory) {

146:     function getDistributionShareOf(uint256 tokenId) external view returns (uint256) {

154:     function getVotingPowerShareOf(uint256 tokenId) public view returns (uint256) {

166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {

208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

247:     function increaseTotalVotingPower(uint96 votingPower) external {

255:     function decreaseTotalVotingPower(uint96 votingPower) external {

263:     function burn(uint256[] memory tokenIds) public {

310:     function burn(uint256 tokenId) external {

318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

344:     function rageQuit(
345:         uint256[] calldata tokenIds,
346:         IERC20[] calldata withdrawTokens,
347:         uint256[] calldata minWithdrawAmounts,
348:         address receiver
349:     ) external {

479:     function addAuthority(address authority) external onlySelf {

486:     function abdicateAuthority() external {
```

- *ProposalExecutionEngine.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L141) ):

```solidity
141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {
```

- *SetSignatureValidatorProposal.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42) ):

```solidity
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

- *OffChainSignatureValidator.sol* ( [#L84](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L84) ):

```solidity
84:     function setSigningThresholdBps(uint96 thresholdBps) external {
```

- *Implementation.sol* ( [#L40](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L40) ):

```solidity
40:     function IMPL() external view returns (address) {
```

</details>

### [N&#x2011;74] Don't define functions with the same name in a contract

In Solidity, while function overriding allows for functions with the same name to coexist, it is advisable to avoid this practice to enhance code readability and maintainability. Having multiple functions with the same name, even with different parameters or in inherited contracts, can cause confusion and increase the likelihood of errors during development, testing, and debugging. Using distinct and descriptive function names not only clarifies the purpose and behavior of each function, but also helps prevent unintended function calls or incorrect overriding. By adopting a clear and consistent naming convention, developers can create more comprehensible and maintainable smart contracts.

There are 4 instances:

- *InitialETHCrowdfund.sol* ( [#L185](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185) ):

```solidity
/// @audit Different function with same name found on line 164
185:     function contribute(
```

- *PartyGovernance.sol* ( [#L368](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L368) ):

```solidity
/// @audit Different function with same name found on line 355
368:     function getVotingPowerAt(
```

- *PartyGovernanceNFT.sol* ( [#L310](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L310), [#L465](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465) ):

```solidity
/// @audit Different function with same name found on line 263
310:     function burn(uint256 tokenId) external {

/// @audit Different function with same name found on line 458
465:     function safeTransferFrom(
```

### [N&#x2011;75] Assembly block creates dirty bits

Writing data to the free memory pointer without later updating the free memory pointer will cause there to be dirty bits at that memory location. Not updating the free memory pointer will make it [harder](https://docs.soliditylang.org/en/latest/ir-breaking-changes.html#cleanup) for the optimizer to reason about whether the memory needs to be cleaned before use, which will lead to worse optimizations. Update the free memory pointer and annotate the block (`assembly ("memory-safe") { ... }`) to avoid this issue.

There are 2 instances:

- *PartyGovernance.sol* ( [#L319-L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L319-L324) ):

```solidity
319:             assembly {
320:                 let freeMem := mload(0x40)
321:                 mstore(freeMem, functionSelector)
322:                 mstore(0x40, add(freeMem, 0x20))
323:                 return(freeMem, 0x20)
324:             }
```

- *OffChainSignatureValidator.sol* ( [#L32-L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L32-L38) ):

```solidity
32:         assembly {
33:             // First word of signature after size contains r
34:             r := mload(add(signature, 0x20))
35:             s := mload(add(signature, 0x40))
36:             // v is one byte which starts after s. type is uint8 so extra data will be ignored
37:             v := mload(add(signature, 0x41))
38:         }
```

### [N&#x2011;76] Multiple mappings with same keys can be combined into a single struct mapping for readability

Well-organized data structures make code reviews easier, which may lead to fewer bugs. Consider combining related mappings into mappings to structs, so it's clear what data is related.

There are 2 instances:

- *PartyGovernance.sol* ( [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L208), [#L214](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L214) ):

```solidity
208:     mapping(address => address) public delegationsByVoter;

214:     mapping(address => VotingPowerSnapshot[]) private _votingPowerSnapshotsByVoter;
```

### [N&#x2011;77] Control structures do not follow the Solidity Style Guide

Refer to the [Solidity style guide - Control Structures](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#control-structures).

<details>
<summary>There are 26 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L165](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L165), [#L213](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L213), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L272), [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L298), [#L342](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L342), [#L344](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L344), [#L390](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L390) ):

```solidity
165:         if (opts.exchangeRateBps == 0) revert InvalidExchangeRateError(opts.exchangeRateBps);

213:         if (amount == 0) return 0;

272:         if (votingPower == 0) revert ZeroVotingPowerError();

298:             if (!party.isHost(msg.sender)) revert OnlyPartyHostError();

342:         if (lc != CrowdfundLifecycle.Finalized) revert WrongLifecycleError(lc);

344:         if (fundingSplitPaid) revert FundingSplitAlreadyPaidError();

390:         if (
```

- *InitialETHCrowdfund.sol* ( [#L224](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L224), [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L298) ):

```solidity
224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

298:         if (amount == 0) return 0;
```

- *PartyGovernance.sol* ( [#L314](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L314), [#L606](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L606), [#L643](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L643), [#L674](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L674), [#L912](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L912) ):

```solidity
314:         if (

606:             if (

643:         if (

674:             if (

912:             if (
```

- *PartyGovernanceNFT.sol* ( [#L278](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L278), [#L328](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L328), [#L350](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L350), [#L359](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L359), [#L381](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L381) ):

```solidity
278:                 if (

328:         if (

350:         if (tokenIds.length == 0) revert NothingToBurnError();

359:                 if (

381:                 if (prevToken >= withdrawTokens[i]) revert InvalidTokenOrderError();
```

- *ProposalExecutionEngine.sol* ( [#L24-L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24-L39), [#L128](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L128), [#L131](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L131) ):

```solidity
24: contract ProposalExecutionEngine is
25:     IProposalExecutionEngine,
26:     Implementation,
27:     ProposalStorage,
28:     ListOnOpenseaProposal,
29:     ListOnOpenseaAdvancedProposal,
30:     ListOnZoraProposal,
31:     FractionalizeProposal,
32:     ArbitraryCallsProposal,
33:     DistributeProposal,
34:     AddAuthorityProposal,
35:     OperatorProposal,
36:     SetSignatureValidatorProposal,
37:     SetGovernanceParameterProposal,
38:     IERC1271
39: {

128:         if (oldImpl != address(0)) return;

131:         if (initializeData.length == 0) return;
```

- *ProposalStorage.sol* ( [#L55-L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55-L59) ):

```solidity
55:     function _getSharedProposalStorage()
56:         internal
57:         pure
58:         returns (SharedProposalStorage storage stor)
59:     {
```

- *SetSignatureValidatorProposal.sol* ( [#L47-L51](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L47-L51) ):

```solidity
47:     function _getSetSignatureValidatorProposalStorage()
48:         private
49:         pure
50:         returns (SetSignatureValidatorProposalStorage storage stor)
51:     {
```

- *OffChainSignatureValidator.sol* ( [#L71](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L71) ):

```solidity
71:         if (
```

- *Implementation.sol* ( [#L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L30) ):

```solidity
30:         if (initialized) revert AlreadyInitialized();
```

</details>

### [N&#x2011;78] Do not cache constants

There are 3 instances:

- *ProposalExecutionEngine.sol* ( [#L336](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L336) ):

```solidity
/// @audit _STORAGE_SLOT
336:         uint256 slot = _STORAGE_SLOT;
```

- *ProposalStorage.sol* ( [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L60) ):

```solidity
/// @audit SHARED_STORAGE_SLOT
60:         uint256 s = SHARED_STORAGE_SLOT;
```

- *SetSignatureValidatorProposal.sol* ( [#L52](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L52) ):

```solidity
/// @audit _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT
52:         uint256 slot = _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT;
```

### [N&#x2011;79] Function state mutability can be restricted to view

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L247](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L247), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L255) ):

```solidity
247:     function increaseTotalVotingPower(uint96 votingPower) external {

255:     function decreaseTotalVotingPower(uint96 votingPower) external {
```

### [N&#x2011;80] Missing event for critical changes

Events should be emitted when critical changes are made to the contracts.

There is 1 instance:

- *PartyGovernance.sol* ( [#L1137-L1145](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1137-L1145) ):

```solidity
1137:     function _setPreciousList(
1138:         IERC721[] memory preciousTokens,
1139:         uint256[] memory preciousTokenIds
1140:     ) private {
1141:         if (preciousTokens.length != preciousTokenIds.length) {
1142:             revert MismatchedPreciousListLengths();
1143:         }
1144:         preciousListHash = _hashPreciousList(preciousTokens, preciousTokenIds);
1145:     }
```

### [N&#x2011;81] Non-assembly method available

There are some automated tools that will flag a project as having higher complexity if there is inline-assembly, so it's best to avoid using it where it's not necessary. In addition, most assembly methods can be replaced by non-assembly methods, for example:
- `assembly{ g := gas() }` => `uint256 g = gasleft()`
- `assembly{ id := chainid() }` => `uint256 id = block.chainid`
- `assembly { r := mulmod(a, b, d) }` => `uint256 m = mulmod(x, y, k)`
- `assembly { size := extcodesize() }` => `uint256 size = address(a).code.length`
- etc.

There are 3 instances:

- *PartyGovernance.sol* ( [#L1159](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1159), [#L1160](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1160), [#L1161](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1161) ):

```solidity
1159:             mstore(0x00, keccak256(add(preciousTokens, 0x20), mul(mload(preciousTokens), 0x20)))

1160:             mstore(0x20, keccak256(add(preciousTokenIds, 0x20), mul(mload(preciousTokenIds), 0x20)))

1161:             h := keccak256(0x00, 0x40)
```

### [N&#x2011;82] Duplicated `require()`/`revert()` checks should be refactored

Refactoring duplicate `require()`/`revert()` checks into a modifier or function can make the code more concise, readable and maintainable, and less likely to make errors or omissions when modifying the `require()` or `revert()`.

<details>
<summary>There are 11 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L218](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L218) ):

```solidity
/// @audit Duplicated on line 309, 342
218:             revert WrongLifecycleError(lc);
```

- *PartyGovernance.sol* ( [#L218](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L218), [#L611](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L611) ):

```solidity
/// @audit Duplicated on line 226, 506
218:             revert NotAuthorized();

/// @audit Duplicated on line 679, 725, 782
611:                 revert BadProposalStatusError(status);
```

- *PartyGovernanceNFT.sol* ( [#L63](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L63) ):

```solidity
/// @audit Duplicated on line 283
63:             revert NotAuthorized();
```

- *ProposalExecutionEngine.sol* ( [#L151](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L151), [#L267](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L267) ):

```solidity
/// @audit Duplicated on line 210
151:             revert ZeroProposalIdError();

/// @audit Duplicated on line 273, 279
267:                 revert ProposalDisabled(pt);
```

</details>

### [N&#x2011;83] Consider adding emergency-stop functionality

Adding a way to quickly halt protocol functionality in an emergency, rather than having to pause individual contracts one-by-one, will make in-progress hack mitigation faster and much less stressful.

<details>
<summary>There are 3 instances (click to show):</summary>

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalExecutionEngine.sol* ( [#L24-L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24-L38) ):

```solidity
24: contract ProposalExecutionEngine is
25:     IProposalExecutionEngine,
26:     Implementation,
27:     ProposalStorage,
28:     ListOnOpenseaProposal,
29:     ListOnOpenseaAdvancedProposal,
30:     ListOnZoraProposal,
31:     FractionalizeProposal,
32:     ArbitraryCallsProposal,
33:     DistributeProposal,
34:     AddAuthorityProposal,
35:     OperatorProposal,
36:     SetSignatureValidatorProposal,
37:     SetGovernanceParameterProposal,
38:     IERC1271
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

</details>

### [N&#x2011;84] Avoid the use of sensitive terms

Use [alternative variants](https://www.zdnet.com/article/mysql-drops-master-slave-and-blacklist-whitelist-terminology/), e.g. allowlist/denylist instead of whitelist/blacklist.

There is 1 instance:

- *PartyGovernance.sol* ( [#L430](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L430) ):

```solidity
430:         // ref: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Checkpoints.sol#L39
```

### [N&#x2011;85] Enable IR-based code generation

The IR-based code generator was introduced with an aim to not only allow code generation to be more transparent and auditable but also to enable more powerful optimization passes that span across functions.
You can enable it on the command line using `--via-ir` or with the option `{"viaIR": true}`.
This will take longer to compile, but you can just simple test it before deploying and if you got a better benchmark then you can add --via-ir to your deploy command
More on: https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html

There is 1 instance:

- Global finding

### [N&#x2011;86] Contracts should have NatSpec `@dev` tags

The `@dev` tag is used to explain extra details to developers.

<details>
<summary>There are 9 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
9: contract ETHCrowdfundBase is Implementation {
```

- *InitialETHCrowdfund.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L20) ):

```solidity
20: contract InitialETHCrowdfund is ETHCrowdfundBase {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
23: abstract contract PartyGovernance is
```

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetGovernanceParameterProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L7) ):

```solidity
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

- *OffChainSignatureValidator.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L9) ):

```solidity
9: contract OffChainSignatureValidator is IERC1271 {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
5: abstract contract Implementation {
```

</details>

### [N&#x2011;87] Error declarations should have NatSpec descriptions

<details>
<summary>There are 55 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L50](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L50), [#L51-L56](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L51-L56), [#L57](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L57), [#L58](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L58), [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L59), [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L60), [#L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L61), [#L62](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L62), [#L63](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L63), [#L64](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L64), [#L65](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L65), [#L66](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L66), [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L67), [#L68](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L68), [#L69](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L69), [#L70](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L70), [#L71](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L71), [#L72](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L72), [#L73](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L73) ):

```solidity
50:     error WrongLifecycleError(CrowdfundLifecycle lc);

51:     error NotAllowedByGateKeeperError(
52:         address contributor,
53:         IGateKeeper gateKeeper,
54:         bytes12 gateKeeperId,
55:         bytes gateData
56:     );

57:     error OnlyPartyHostError();

58:     error OnlyPartyDaoError(address notDao);

59:     error OnlyPartyDaoOrHostError(address notDao);

60:     error NotOwnerError(uint256 tokenId);

61:     error OnlyWhenEmergencyActionsAllowedError();

62:     error InvalidDelegateError();

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

69:     error ContributingForExistingCardDisabledError();

70:     error ZeroVotingPowerError();

71:     error FundingSplitAlreadyPaidError();

72:     error FundingSplitNotConfiguredError();

73:     error InvalidMessageValue();
```

- *PartyGovernance.sol* ( [#L168](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L168), [#L169](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L169), [#L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L170), [#L171](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L171), [#L172](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L172), [#L173](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L173), [#L174](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L174), [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L175), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L176), [#L177](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L177), [#L178](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L178), [#L179](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L179), [#L180](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L180), [#L181](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L181), [#L182](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L182), [#L183](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L183), [#L184](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L184) ):

```solidity
168:     error MismatchedPreciousListLengths();

169:     error BadProposalStatusError(ProposalStatus status);

170:     error BadProposalHashError(bytes32 proposalHash, bytes32 actualHash);

171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

172:     error NotAuthorized();

173:     error InvalidDelegateError();

174:     error BadPreciousListError();

175:     error OnlyWhenEmergencyActionsAllowedError();

176:     error OnlyWhenEnabledError();

177:     error AlreadyVotedError(address voter);

178:     error InvalidNewHostError();

179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

180:     error InvalidBpsError(uint16 bps);

181:     error DistributionsRequireVoteError();

182:     error PartyNotStartedError();

183:     error CannotRageQuitAndAcceptError();

184:     error TooManyHosts();
```

- *PartyGovernanceNFT.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L20), [#L21](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L21), [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L22), [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L23), [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L24), [#L25](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L25) ):

```solidity
20:     error FixedRageQuitTimestampError(uint40 rageQuitTimestamp);

21:     error CannotRageQuitError(uint40 rageQuitTimestamp);

22:     error CannotDisableRageQuitAfterInitializationError();

23:     error InvalidTokenOrderError();

24:     error BelowMinWithdrawAmountError(uint256 amount, uint256 minAmount);

25:     error NothingToBurnError();
```

- *ProposalExecutionEngine.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L42), [#L85](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L85), [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L86), [#L87](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L87), [#L88](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L88), [#L89-L92](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L89-L92), [#L93](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L93), [#L94-L97](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L94-L97) ):

```solidity
42:     error UnsupportedProposalTypeError(uint32 proposalType);

85:     error ProposalDisabled(ProposalType proposalType);

86:     error ZeroProposalIdError();

87:     error MalformedProposalDataError();

88:     error ProposalExecutionBlockedError(uint256 proposalId, uint256 currentInProgressProposalId);

89:     error ProposalProgressDataInvalidError(
90:         bytes32 actualProgressDataHash,
91:         bytes32 expectedProgressDataHash
92:     );

93:     error ProposalNotInProgressError(uint256 proposalId);

94:     error UnexpectedProposalEngineImplementationError(
95:         IProposalExecutionEngine actualImpl,
96:         IProposalExecutionEngine expectedImpl
97:     );
```

- *OffChainSignatureValidator.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L10), [#L11](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L11), [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L12) ):

```solidity
10:     error NotMemberOfParty();

11:     error InsufficientVotingPower();

12:     error MessageHashMismatch();
```

- *Implementation.sol* ( [#L8](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L8), [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L9) ):

```solidity
8:     error AlreadyInitialized();

9:     error OnlyDelegateCallError();
```

</details>

### [N&#x2011;88] Functions should have `@notice` tags

The `@notice` is used to explain to users what the function does. The compiler interprets `///` or `/**` comments [as this tag](https://docs.soliditylang.org/en/latest/natspec-format.html#tags) if one wasn't explicitly provided.

<details>
<summary>There are 44 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L134), [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140), [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196), [#L291](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L291), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317) ):

```solidity
134:     constructor(IGlobals globals) {

140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

196:     function _processContribution(

291:     function finalize() external {

317:     function _finalize(uint96 totalContributions_) internal {
```

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99), [#L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L372) ):

```solidity
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

275:     function _contribute(

372:     function _createParty(
```

- *PartyGovernance.sol* ( [#L216](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L216), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L222), [#L258](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L258), [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265), [#L270](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270), [#L860](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860), [#L904](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904), [#L937](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L937), [#L944](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L944), [#L972](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L972), [#L1021](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1021), [#L1043](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1043), [#L1053](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1053), [#L1064](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064), [#L1111](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1111), [#L1122](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1122), [#L1129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1129), [#L1137](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1137), [#L1147](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147), [#L1154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154), [#L1166](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1166) ):

```solidity
216:     function _assertHost() internal view {

222:     function _assertActiveMember() internal view {

258:     function _assertNotGloballyDisabled() internal view {

265:     constructor(IGlobals globals) {

270:     function _initialize(

860:     function _executeProposal(

904:     function _getVotingPowerSnapshotAt(

937:     function _transferVotingPower(address from, address to, uint256 power) internal {

944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

972:     function _rebalanceDelegates(

1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {

1043:     function _getLastVotingPowerSnapshotForVoter(

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1064:     function _getProposalStatus(

1111:     function _isUnanimousVotes(

1122:     function _hostsAccepted(

1129:     function _areVotesPassing(

1137:     function _setPreciousList(

1147:     function _isPreciousListCorrect(

1154:     function _hashPreciousList(

1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {
```

- *PartyGovernanceNFT.sol* ( [#L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L61), [#L76](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L76), [#L81](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81), [#L268](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L268), [#L493](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L493) ):

```solidity
61:     function _assertAuthority() internal view {

76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

81:     function _initialize(

268:     function _burnAndUpdateVotingPower(

493:     function _delegateToRenderer() private view {
```

- *ProposalExecutionEngine.sol* ( [#L107](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L107), [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L225), [#L248](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L248), [#L297](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L318), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L335) ):

```solidity
107:     constructor(

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

248:     function _execute(

297:     function _extractProposalType(

318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {

335:     function _getStorage() internal pure returns (Storage storage stor) {
```

- *ProposalStorage.sol* ( [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L43), [#L55](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55) ):

```solidity
43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

55:     function _getSharedProposalStorage()
```

- *SetSignatureValidatorProposal.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L42) ):

```solidity
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

- *Implementation.sol* ( [#L17](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L17) ):

```solidity
17:     constructor() {
```

</details>

### [N&#x2011;89] Contracts should have full test coverage

While 100% code coverage does not guarantee that there are no bugs, it often will catch easy-to-find bugs, and will ensure that there are fewer regressions when the code invariably has to be modified. Furthermore, in order to get full coverage, code authors will often have to re-organize their code so that it is more modular, so that each component can be tested separately, which reduces interdependencies between modules and layers, and makes for code that is easier to reason about and audit.

There is 1 instance:

- Global finding

### [N&#x2011;90] Large or complicated code bases should implement invariant tests

This includes: large code bases, or code with lots of inline-assembly, complicated math, or complicated interactions between multiple contracts.
Invariant fuzzers such as Echidna require the test writer to come up with invariants which should not be violated under any circumstances, and the fuzzer tests various inputs and function calls to ensure that the invariants always hold.
Even code with 100% code coverage can still have bugs due to the order of the operations a user performs, and invariant fuzzers may help significantly.

There is 1 instance:

- Global finding

### [N&#x2011;91] Top-level declarations should be separated by at least two lines

<details>
<summary>There are 36 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L2-L4), [#L7-L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L7-L9), [#L194-L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L194-L196), [#L289-L291](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L289-L291), [#L315-L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L315-L317) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import "../utils/LibAddress.sol";

7: import "../gatekeepers/IGateKeeper.sol";
8: 
9: contract ETHCrowdfundBase is Implementation {

194:     }
195: 
196:     function _processContribution(

289:     }
290: 
291:     function finalize() external {

315:     }
316: 
317:     function _finalize(uint96 totalContributions_) internal {
```

- *InitialETHCrowdfund.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L2-L4), [#L273-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L273-L275), [#L370-L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L370-L372) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import { ETHCrowdfundBase } from "./ETHCrowdfundBase.sol";

273:     }
274: 
275:     function _contribute(

370:     }
371: 
372:     function _createParty(
```

- *PartyGovernance.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L2-L4), [#L220-L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L220-L222), [#L256-L258](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L256-L258), [#L858-L860](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L858-L860), [#L1041-L1043](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1041-L1043), [#L1051-L1053](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1051-L1053), [#L1062-L1064](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1062-L1064), [#L1109-L1111](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1109-L1111), [#L1120-L1122](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1120-L1122), [#L1127-L1129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1127-L1129), [#L1135-L1137](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1135-L1137), [#L1145-L1147](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1145-L1147), [#L1152-L1154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1152-L1154) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import { ITokenDistributor } from "../distribution/ITokenDistributor.sol";

220:     }
221: 
222:     function _assertActiveMember() internal view {

256:     }
257: 
258:     function _assertNotGloballyDisabled() internal view {

858:     }
859: 
860:     function _executeProposal(

1041:     }
1042: 
1043:     function _getLastVotingPowerSnapshotForVoter(

1051:     }
1052: 
1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1062:     }
1063: 
1064:     function _getProposalStatus(

1109:     }
1110: 
1111:     function _isUnanimousVotes(

1120:     }
1121: 
1122:     function _hostsAccepted(

1127:     }
1128: 
1129:     function _areVotesPassing(

1135:     }
1136: 
1137:     function _setPreciousList(

1145:     }
1146: 
1147:     function _isPreciousListCorrect(

1152:     }
1153: 
1154:     function _hashPreciousList(
```

- *PartyGovernanceNFT.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L2-L4), [#L65-L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L65-L67), [#L266-L268](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L266-L268), [#L491-L493](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L491-L493) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import "../utils/LibSafeCast.sol";

65:     }
66: 
67:     modifier onlySelf() {

266:     }
267: 
268:     function _burnAndUpdateVotingPower(

491:     }
492: 
493:     function _delegateToRenderer() private view {
```

- *ProposalExecutionEngine.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L2-L4), [#L223-L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L223-L225) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import "../utils/Implementation.sol";

223:     }
224: 
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

- *ProposalStorage.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L2-L4), [#L53-L55](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L53-L55) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import "./IProposalExecutionEngine.sol";

53:     }
54: 
55:     function _getSharedProposalStorage()
```

- *SetGovernanceParameterProposal.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L2-L4), [#L5-L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L5-L7) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import { ProposalStorage } from "./ProposalStorage.sol";

5: import { IProposalExecutionEngine } from "./IProposalExecutionEngine.sol";
6: 
7: contract SetGovernanceParameterProposal is ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L2-L4), [#L5-L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L5-L7), [#L40-L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L40-L42) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import { IERC1271 } from "openzeppelin/contracts/interfaces/IERC1271.sol";

5: import { IProposalExecutionEngine } from "./IProposalExecutionEngine.sol";
6: 
7: abstract contract SetSignatureValidatorProposal {

40:     }
41: 
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {
```

- *OffChainSignatureValidator.sol* ( [#L2-L4](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L2-L4) ):

```solidity
2: pragma solidity 0.8.20;
3: 
4: import { IERC1271 } from "openzeppelin/contracts/interfaces/IERC1271.sol";
```

- *Implementation.sol* ( [#L27-L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L27-L29) ):

```solidity
27:     }
28: 
29:     modifier onlyInitialize() {
```

</details>

### [N&#x2011;92] Consider adding formal verification proofs

Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification/property/invariant, using formal methods of mathematics.

Some tools that are currently available to perform these tests on smart contracts are [SMTChecker](https://docs.soliditylang.org/en/latest/smtchecker.html) and [Certora Prover](https://www.certora.com/).

There are 10 instances:

- [*ETHCrowdfundBase.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol)

- [*InitialETHCrowdfund.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol)

- [*PartyGovernance.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol)

- [*PartyGovernanceNFT.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol)

- [*ProposalExecutionEngine.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol)

- [*ProposalStorage.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol)

- [*SetGovernanceParameterProposal.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol)

- [*SetSignatureValidatorProposal.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol)

- [*OffChainSignatureValidator.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol)

- [*Implementation.sol*](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol)

### [N&#x2011;93] Prevent re-setting a state variable with the same value

This especially problematic when the setter also emits the same value, which may be confusing to offline parsers.

There are 3 instances:

- *ETHCrowdfundBase.sol* ( [#L230](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L230) ):

```solidity
230:             totalContributions = maxTotalContributions_;
```

- *PartyGovernance.sol* ( [#L1144](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1144) ):

```solidity
1144:         preciousListHash = _hashPreciousList(preciousTokens, preciousTokenIds);
```

- *PartyGovernanceNFT.sol* ( [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L372) ):

```solidity
372:         lastRageQuitTimestamp = uint40(block.timestamp);
```

## Gas Optimizations

### [G&#x2011;01] The `<array>.length` should be cached outside of the `for`-loop

The overheads outlined below are PER LOOP, excluding the first loop:
- storage arrays incur a Gwarmaccess (**100 gas**)
- memory arrays use `MLOAD` (**3 gas**)
- calldata arrays use `CALLDATALOAD` (**3 gas**)
Caching the length changes each of these to a `DUP<N>` (**3 gas**), and gets rid of the extra `DUP<N>` needed to store the stack offset.

There are 7 instances:

- *InitialETHCrowdfund.sol* ( [#L260](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L260) ):

```solidity
260:         for (uint256 i; i < args.recipients.length; ++i) {
```

- *PartyGovernance.sol* ( [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L305) ):

```solidity
305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {
```

- *PartyGovernanceNFT.sol* ( [#L102](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L102), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L272), [#L378](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L378), [#L391](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L391), [#L408](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L408) ):

```solidity
102:             for (uint256 i; i < authorities.length; ++i) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {
```

### [G&#x2011;02] Use shift right instead of division if possible

Shifting right by `n` is like dividing by `2^n`, while the shifting cost less gas because it does not require checks and jumps.

There is 1 instance:

- *PartyGovernance.sol* ( [#L434](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L434) ):

```solidity
/// @audit div 2
434:             uint256 mid = (low + high) / 2;
```

### [G&#x2011;03] Use `storage` instead of `memory` for structs/arrays

When fetching data from a storage location, assigning the data to a `memory` variable causes all fields of the struct/array to be read from storage, which incurs a Gcoldsload (**2100 gas**) for *each* field of the struct/array. If the fields are read from the new memory variable, they incur an additional `MLOAD` rather than a cheap stack read. Instead of declaring the variable with the `memory` keyword, declaring the variable with the `storage` keyword and caching any fields that need to be re-read in stack variables, will be much cheaper, only incurring the Gcoldsload for the fields actually read. The only time it makes sense to read the whole struct/array into a `memory` variable, is if the full struct/array is being returned by the function, is being passed to a function that requires `memory`, or if the array/struct is being read from another `memory` array/struct.

There are 6 instances:

- *PartyGovernance.sol* ( [#L598](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L598), [#L669](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L669), [#L720](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L720), [#L777](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L777), [#L1034](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1034), [#L1087](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1087) ):

```solidity
598:         ProposalStateValues memory values = info.values;

669:         ProposalStateValues memory values = info.values;

720:         ProposalStateValues memory values = proposalState.values;

777:         ProposalStateValues memory values = proposalState.values;

1034:             VotingPowerSnapshot memory lastSnap = voterSnaps[n - 1];

1087:         GovernanceValues memory gv = _getSharedProposalStorage().governanceValues;
```

### [G&#x2011;04] Using `private` for constants saves gas

If needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that [returns a tuple](https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178) of the values of all currently-public constants. Saves **3406-3606 gas** in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where it's used, and not adding another entry to the method ID table

There is 1 instance:

- *Implementation.sol* ( [#L12](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L12) ):

```solidity
12:     address public immutable implementation;
```

### [G&#x2011;05] Constructors can be marked as payable to save deployment gas

Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. A constructor can be safely marked as payable, because only the deployer would be able to pass funds, and the project itself would not pass any funds.

<details>
<summary>There are 5 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L134) ):

```solidity
134:     constructor(IGlobals globals) {
```

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99) ):

```solidity
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}
```

- *PartyGovernance.sol* ( [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265) ):

```solidity
265:     constructor(IGlobals globals) {
```

- *ProposalExecutionEngine.sol* ( [#L107-L116](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L107-L116) ):

```solidity
107:     constructor(
108:         IGlobals globals,
109:         IReserveAuctionCoreEth zora,
110:         IFractionalV1VaultFactory fractionalVaultFactory
111:     )
112:         ListOnOpenseaAdvancedProposal(globals)
113:         ListOnZoraProposal(globals, zora)
114:         FractionalizeProposal(fractionalVaultFactory)
115:         ArbitraryCallsProposal(zora)
116:     {
```

- *Implementation.sol* ( [#L17](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L17) ):

```solidity
17:     constructor() {
```

</details>

### [G&#x2011;06] State variables only set in their definitions should be declared `constant`

This can avoid a Gsset (**20000 gas**) on deployment (in constructor), and replaces the first access in each transaction (Gcoldsload - **2100 gas**) and each access thereafter (Gwarmacces - **100 gas**) with a `PUSH32` (**3 gas**).

There are 3 instances:

- *ETHCrowdfundBase.sol* ( [#L127](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L127), [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L129) ):

```solidity
127:     IGateKeeper public gateKeeper;

129:     bytes12 public gateKeeperId;
```

- *PartyGovernance.sol* ( [#L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L200) ):

```solidity
200:     uint40 public lastRageQuitTimestamp;
```

### [G&#x2011;07] Consider using `ERC721A` instead of `ERC721`

[ERC721A](https://www.erc721a.org/) is an improved implementation of IERC721 with significant gas savings for minting multiple NFTs in a single transaction.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

### [G&#x2011;08] Using `constant`s directly, rather than caching the value, saves gas

There are 3 instances:

- *ProposalExecutionEngine.sol* ( [#L336](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L336) ):

```solidity
/// @audit _STORAGE_SLOT
336:         uint256 slot = _STORAGE_SLOT;
```

- *ProposalStorage.sol* ( [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L60) ):

```solidity
/// @audit SHARED_STORAGE_SLOT
60:         uint256 s = SHARED_STORAGE_SLOT;
```

- *SetSignatureValidatorProposal.sol* ( [#L52](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L52) ):

```solidity
/// @audit _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT
52:         uint256 slot = _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT;
```

### [G&#x2011;09] Don't caching global special variables

It's better not to cache the global special variables, because it's cheaper to use them directly (e.g. `msg.sender`).

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L210](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L210) ):

```solidity
210:         uint256 ethAvailable = msg.value;
```

### [G&#x2011;10] Do not cache state variables that are used only once

It's cheaper to access the state variable directly if it is accessed only once. This can save the 3 gas cost of the extra stack allocation.

There are 3 instances:

- *ETHCrowdfundBase.sol* ( [#L261](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L261), [#L284](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L284), [#L322](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L322) ):

```solidity
261:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

284:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

322:         address payable fundingSplitRecipient_ = fundingSplitRecipient;
```

### [G&#x2011;11] Do not calculate constants

Due to how constant variables are implemented (replacements at compile-time), an expression assigned to a constant variable is recomputed each time that the variable is used, which wastes some gas.

There is 1 instance:

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186) ):

```solidity
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;
```

### [G&#x2011;12] Use local variables for emitting

Use the function/modifier's local copy of the state variable, rather than incurring an extra Gwarmaccess (**100 gas**). In the unlikely event that the state variable hasn't already been used by the function/modifier, consider whether it is really necessary to include it in the event, given the fact that it incurs a Gcoldsload (**2100 gas**), or whether it can be passed in to or back out of the functions that _do_ use it.

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L335) ):

```solidity
/// @audit rageQuitTimestamp
335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);
```

- *OffChainSignatureValidator.sol* ( [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L86) ):

```solidity
/// @audit signingThersholdBps
86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);
```

### [G&#x2011;13] Contract storage can use fewer slots by changing the order of state variables

The reduction of slots can reduce the gas consumption of each storage read/write operation. If variables occupying the same slot are written within the same transaction, avoids a separate Gsset (**20000 gas**). Reads of the variables can also be cheaper.

<details>
<summary>There are 2 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
/// @audit 6 slots -> 5 slots by new order:
///        32 B: mapping(address => address) delegationsByContributor
///        20 B: Party party
///        12 B: uint96 minContribution
///        20 B: IGateKeeper gateKeeper
///        12 B: uint96 maxContribution
///        12 B: uint96 minTotalContributions
///        12 B: uint96 maxTotalContributions
///        5 B: uint40 expiry
///        2 B: uint16 exchangeRateBps
///        1 B: bool disableContributingForExistingCard
///        12 B: uint96 totalContributions
///        12 B: bytes12 gateKeeperId
///        2 B: uint16 fundingSplitBps
///        1 B: bool fundingSplitPaid
///        1 B: bool emergencyExecuteDisabled
///        0 B: address payable fundingSplitRecipient
9: contract ETHCrowdfundBase is Implementation {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
/// @audit 8 slots -> 7 slots by new order:
///        32 B: bytes32 preciousListHash
///        32 B: uint256 lastProposalId
///        32 B: mapping(address => bool) isHost
///        32 B: mapping(address => address) delegationsByVoter
///        32 B: mapping(uint256 => ProposalState) _proposalStateByProposalId
///        32 B: mapping(address => VotingPowerSnapshot[]) _votingPowerSnapshotsByVoter
///        5 B: uint40 lastRageQuitTimestamp
///        2 B: uint16 feeBps
///        1 B: bool emergencyExecuteDisabled
///        1 B: uint8 numHosts
///        0 B: address payable feeRecipient
23: abstract contract PartyGovernance is
```

</details>

### [G&#x2011;14] `internal` functions only called once can be inlined to save gas

If an `internal` function is only used once, there is no need to modularize it, unless the function calling it would otherwise be too long and complex. Not inlining costs 20 to 40 gas because of two extra JUMP instructions and additional stack operations needed for function calls.

There is 1 instance:

- *PartyGovernance.sol* ( [#L937](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L937) ):

```solidity
937:     function _transferVotingPower(address from, address to, uint256 power) internal {
```

### [G&#x2011;15] Inline `modifier`s that are only used once, to save gas

There are 5 instances:

- *PartyGovernance.sol* ( [#L231](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L231), [#L242](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L242), [#L251](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L251) ):

```solidity
231:     modifier onlyPartyDao() {

242:     modifier onlyPartyDaoOrHost() {

251:     modifier onlyWhenEmergencyExecuteAllowed() {
```

- *PartyGovernanceNFT.sol* ( [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L67) ):

```solidity
67:     modifier onlySelf() {
```

- *Implementation.sol* ( [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L29) ):

```solidity
29:     modifier onlyInitialize() {
```

### [G&#x2011;16] Private functions only used once can be inlined to save gas

If a `private` function is only used once, there is no need to modularize it, unless the function calling it would otherwise be too long and complex.

There are 4 instances:

- *PartyGovernance.sol* ( [#L1053](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1053), [#L1129-L1133](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1129-L1133), [#L1137-L1140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1137-L1140), [#L1147-L1150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147-L1150) ):

```solidity
1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1129:     function _areVotesPassing(
1130:         uint96 voteCount,
1131:         uint96 totalVotingPower,
1132:         uint16 passThresholdBps
1133:     ) private pure returns (bool) {

1137:     function _setPreciousList(
1138:         IERC721[] memory preciousTokens,
1139:         uint256[] memory preciousTokenIds
1140:     ) private {

1147:     function _isPreciousListCorrect(
1148:         IERC721[] memory preciousTokens,
1149:         uint256[] memory preciousTokenIds
1150:     ) private view returns (bool) {
```

### [G&#x2011;17] Inverting the condition of an `if`-`else`-statement wastes gas

Flipping the `true` and `false` blocks instead saves ***[3 gas](https://gist.github.com/IllIllI000/44da6fbe9d12b9ab21af82f14add56b9)***.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L362-L366](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L362-L366) ):

```solidity
362:             if (!s) {
363:                 if (revertOnFailure) {
364:                     r.rawRevert();
365:                 }
366:             } else {
```

### [G&#x2011;18] Initializers can be marked as payable to save deployment gas

Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. Initializers can be safely marked as payable, because only the deployer or the factory contract would call the function without carrying any funds.

<details>
<summary>There are 4 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140) ):

```solidity
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {
```

- *PartyGovernance.sol* ( [#L270-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270-L275) ):

```solidity
270:     function _initialize(
271:         GovernanceOpts memory govOpts,
272:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
273:         IERC721[] memory preciousTokens,
274:         uint256[] memory preciousTokenIds
275:     ) internal virtual {
```

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

- *ProposalExecutionEngine.sol* ( [#L123-L126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L123-L126) ):

```solidity
123:     function initialize(
124:         address oldImpl,
125:         bytes calldata initializeData
126:     ) external override onlyDelegateCall {
```

</details>

### [G&#x2011;19] Functions that revert when called by normal users can be marked `payable`

If a function modifier such as `onlyOwner` is used, the function will revert if a normal user tries to pay the function. Marking the function as `payable` will lower the gas cost for legitimate callers because the compiler will not include checks for whether a payment was provided.
The extra opcodes avoided are: 
`CALLVALUE(2), DUP1(3), ISZERO(3), PUSH2(3), JUMPI(10), PUSH1(3), DUP1(3), REVERT(0), JUMPDEST(1), POP(2)` 
which cost an average of about 21 gas per call to the function, in addition to the extra deployment cost.

<details>
<summary>There are 15 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L457](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L457), [#L665](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L665), [#L855](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L855) ):

```solidity
457:     function abdicateHost(address newPartyHost) external {

665:     function veto(uint256 proposalId) external {

855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {
```

- *PartyGovernanceNFT.sol* ( [#L166-L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166-L170), [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L208), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L236), [#L247](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L247), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L255), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L263), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L318), [#L479](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L479), [#L486](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L486) ):

```solidity
166:     function mint(
167:         address owner,
168:         uint256 votingPower,
169:         address delegate
170:     ) external returns (uint256 tokenId) {

208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

247:     function increaseTotalVotingPower(uint96 votingPower) external {

255:     function decreaseTotalVotingPower(uint96 votingPower) external {

263:     function burn(uint256[] memory tokenIds) public {

318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

479:     function addAuthority(address authority) external onlySelf {

486:     function abdicateAuthority() external {
```

- *ProposalExecutionEngine.sol* ( [#L123-L126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L123-L126), [#L146-L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L146-L148), [#L207](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L207) ):

```solidity
123:     function initialize(
124:         address oldImpl,
125:         bytes calldata initializeData
126:     ) external override onlyDelegateCall {

146:     function executeProposal(
147:         ExecuteProposalParams memory params
148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {

207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {
```

</details>

### [G&#x2011;20] Use `s.x = s.x + y` instead of `s.x += y` for memory structs

Using the `s.x = s.x + y` instead of `s.x += y` for memory structs can save **100 gas**. The same applies to `-=`, `*=`, etc.

There is 1 instance:

- *PartyGovernance.sol* ( [#L635](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L635) ):

```solidity
635:         values.votes += votingPower;
```

### [G&#x2011;21] Use `x = x + y` instead of `x += y` for state variables

Using the `x = x + y` instead of `x += y` for state simple state variables can save **10 gas**. The same applies to `-=`, `*=`, etc.

There are 4 instances:

- *PartyGovernanceNFT.sol* ( [#L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L189), [#L223](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L223), [#L238](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L238), [#L304](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L304) ):

```solidity
189:         mintedVotingPower += votingPower_;

223:         mintedVotingPower += votingPower;

238:         mintedVotingPower -= votingPower;

304:         mintedVotingPower -= totalVotingPowerBurned;
```

### [G&#x2011;22] Operator `>=`/`<=` costs less gas than operator `>`/`<`

The compiler uses opcodes `GT` and `ISZERO` for code that uses `>`, but only requires `LT` for `>=`. A similar behavior applies for `>`, which uses opcodes `LT` and `ISZERO`, but only requires `GT` for `<=`. It can [save **3 gas**](https://gist.github.com/IllIllI000/3dc79d25acccfa16dee4e83ffdc6ffde) for each.
It should be converted to the `<=`/`>=` equivalent when comparing against integer literals.

<details>
<summary>There are 45 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L142](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L142), [#L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L148), [#L223](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L223), [#L239](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L239), [#L256](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L256), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L263), [#L286](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L286), [#L302](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L302), [#L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L324) ):

```solidity
142:         if (opts.minContribution > opts.maxContribution) {

148:         if (opts.minTotalContributions > opts.maxTotalContributions) {

223:         if (amount > maxContribution_) {

239:             if (refundAmount > 0) {

256:         if (amount < minContribution_) {

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

302:             if (totalContributions_ < minTotalContributions_) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {
```

- *InitialETHCrowdfund.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L141), [#L211](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L211), [#L224](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L224), [#L260](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L260), [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L331), [#L357](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L357), [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L379) ):

```solidity
141:         if (initialContribution > 0) {

211:         for (uint256 i; i < numContributions; ++i) {

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

260:         for (uint256 i; i < args.recipients.length; ++i) {

331:         if (amount > 0) {

357:         for (uint256 i; i < numRefunds; ++i) {

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {
```

- *PartyGovernance.sol* ( [#L277](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L277), [#L280](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L280), [#L302](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L302), [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L305), [#L433](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L433), [#L435](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L435), [#L731](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L731), [#L799](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L799), [#L805](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L805), [#L811](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L811), [#L914](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L914), [#L918](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L918), [#L1126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1126) ):

```solidity
277:         if (govOpts.feeBps > 1e4) {

280:         if (govOpts.passThresholdBps > 1e4) {

302:         if (govOpts.hosts.length > type(uint8).max) {

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

433:         while (low < high) {

435:             if (snaps[mid].timestamp > timestamp) {

731:             if (proposal.maxExecutableTime < block.timestamp) {

799:                 if (cancelDelay > globalMaxCancelDelay) {

805:                 if (cancelDelay < globalMinCancelDelay) {

811:             if (block.timestamp < cancelTime) {

914:                 hintIndex < snapsLength &&

918:                 (hintIndex == snapsLength - 1 || snaps[hintIndex + 1].timestamp > timestamp)

1126:         return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;
```

- *PartyGovernanceNFT.sol* ( [#L102](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L102), [#L179](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L179), [#L216](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L216), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L272), [#L361](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L361), [#L378](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L378), [#L391](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L391), [#L408](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L408), [#L415](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L415), [#L426](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L426), [#L430](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L430) ):

```solidity
102:             for (uint256 i; i < authorities.length; ++i) {

179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

361:                     currentRageQuitTimestamp < block.timestamp

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {

415:                 if (fee > 0) {

426:                 if (amount > 0) {

430:                     if (amount < minAmount) {
```

- *ProposalExecutionEngine.sol* ( [#L303](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L303) ):

```solidity
303:         if (proposalData.length < 4) {
```

- *SetGovernanceParameterProposal.sol* ( [#L33](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L33), [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L43), [#L54](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L54) ):

```solidity
33:             if (proposalData.voteDuration < 1 hours) {

43:             if (proposalData.executionDelay > 30 days) {

54:             if (proposalData.passThresholdBps > 10000) {
```

- *OffChainSignatureValidator.sol* ( [#L73](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L73) ):

```solidity
73:             (signerVotingPowerBps > totalVotingPower &&
```

</details>

### [G&#x2011;23] Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead

Using `ints`/`uints` smaller than 32 bytes may cost more gas. This is because the EVM operates on 32 bytes at a time, so if an element is smaller than 32 bytes, the EVM must perform more operations to reduce the size of the element from 32 bytes to the desired size.

<details>
<summary>There are 149 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L37](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L37), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L38), [#L40](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L40), [#L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L41), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L42), [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L43), [#L45](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L45), [#L63](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L63), [#L63](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L63), [#L64](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L64), [#L64](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L64), [#L65](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L65), [#L66](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L66), [#L66](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L66), [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L67), [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L67), [#L68](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L68), [#L95](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L95), [#L98](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L98), [#L109](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L109), [#L112](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L112), [#L114](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L114), [#L117](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L117), [#L120](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L120), [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L123), [#L199](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L199), [#L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L200), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L222), [#L227](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L227), [#L228](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L228), [#L238](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L238), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L255), [#L262](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L262), [#L279](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L279), [#L280](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L280), [#L285](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L285), [#L292](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L292), [#L301](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L301), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317), [#L323](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L323), [#L329](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L329), [#L339](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L339), [#L347](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L347) ):

```solidity
/// @audit uint96
37:         uint96 minContribution;

/// @audit uint96
38:         uint96 maxContribution;

/// @audit uint96
40:         uint96 minTotalContributions;

/// @audit uint96
41:         uint96 maxTotalContributions;

/// @audit uint16
42:         uint16 exchangeRateBps;

/// @audit uint16
43:         uint16 fundingSplitBps;

/// @audit uint40
45:         uint40 duration;

/// @audit uint96
63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

/// @audit uint96
63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

/// @audit uint96
64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

/// @audit uint96
64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

/// @audit uint96
65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

/// @audit uint96
66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

/// @audit uint96
66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

/// @audit uint96
67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

/// @audit uint96
67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

/// @audit uint16
68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

/// @audit uint96
95:     uint96 public minContribution;

/// @audit uint96
98:     uint96 public maxContribution;

/// @audit uint96
109:     uint96 public minTotalContributions;

/// @audit uint96
112:     uint96 public maxTotalContributions;

/// @audit uint96
114:     uint96 public totalContributions;

/// @audit uint40
117:     uint40 public expiry;

/// @audit uint16
120:     uint16 public exchangeRateBps;

/// @audit uint16
123:     uint16 public fundingSplitBps;

/// @audit uint96
199:         uint96 amount

/// @audit uint96
200:     ) internal returns (uint96 votingPower) {

/// @audit uint96
222:         uint96 maxContribution_ = maxContribution;

/// @audit uint96
227:         uint96 newTotalContributions = totalContributions + amount;

/// @audit uint96
228:         uint96 maxTotalContributions_ = maxTotalContributions;

/// @audit uint96
238:             uint96 refundAmount = newTotalContributions - maxTotalContributions;

/// @audit uint96
255:         uint96 minContribution_ = minContribution;

/// @audit uint16
262:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit uint96
279:         uint96 votingPower

/// @audit uint96
280:     ) public view returns (uint96 amount) {

/// @audit uint16
285:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit uint96
292:         uint96 totalContributions_ = totalContributions;

/// @audit uint96
301:             uint96 minTotalContributions_ = minTotalContributions;

/// @audit uint96
317:     function _finalize(uint96 totalContributions_) internal {

/// @audit uint16
323:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit uint96
329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

/// @audit uint96
339:     function sendFundingSplit() external returns (uint96 splitAmount) {

/// @audit uint16
347:         uint16 fundingSplitBps_ = fundingSplitBps;
```

- *InitialETHCrowdfund.sol* ( [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L29), [#L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L30), [#L32](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L32), [#L33](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L33), [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L35), [#L37](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L37), [#L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L60), [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L140), [#L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L167), [#L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L189), [#L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L240), [#L278](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L278), [#L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L281), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L318), [#L328](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L328) ):

```solidity
/// @audit uint96
29:         uint96 minContribution;

/// @audit uint96
30:         uint96 maxContribution;

/// @audit uint96
32:         uint96 minTotalContributions;

/// @audit uint96
33:         uint96 maxTotalContributions;

/// @audit uint16
34:         uint16 exchangeRateBps;

/// @audit uint16
35:         uint16 fundingSplitBps;

/// @audit uint40
37:         uint40 duration;

/// @audit uint40
60:         uint40 rageQuitTimestamp;

/// @audit uint96
140:         uint96 initialContribution = msg.value.safeCastUint256ToUint96();

/// @audit uint96
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit uint96
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit uint96
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit uint96
278:         uint96 amount,

/// @audit uint96
281:     ) private returns (uint96 votingPower) {

/// @audit uint96
318:     function refund(uint256 tokenId) external returns (uint96 amount) {

/// @audit uint96
328:         uint96 votingPower = party.votingPowerByTokenId(tokenId).safeCastUint256ToUint96();
```

- *PartyGovernance.sol* ( [#L72](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L72), [#L75](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L75), [#L78](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L78), [#L80](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L80), [#L82](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L82), [#L90](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L90), [#L92](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L92), [#L94](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L94), [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L104), [#L107](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L107), [#L117](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L117), [#L119](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L119), [#L121](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L121), [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L123), [#L125](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L125), [#L127](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L127), [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L129), [#L131](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L131), [#L162](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L162), [#L163](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L163), [#L164](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L164), [#L171](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L171), [#L171](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L171), [#L179](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L179), [#L179](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L179), [#L180](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L180), [#L187](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L187), [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L196), [#L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L200), [#L210](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L210), [#L357](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L357), [#L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L358), [#L370](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L370), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L372), [#L425](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L425), [#L523](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L523), [#L634](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L634), [#L906](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L906), [#L938](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L938), [#L944](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L944), [#L1002](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1002), [#L1086](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1086), [#L1112](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1112), [#L1113](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1113), [#L1123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1123), [#L1124](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1124), [#L1130](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1130), [#L1131](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1131), [#L1132](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1132) ):

```solidity
/// @audit uint40
72:         uint40 voteDuration;

/// @audit uint40
75:         uint40 executionDelay;

/// @audit uint16
78:         uint16 passThresholdBps;

/// @audit uint96
80:         uint96 totalVotingPower;

/// @audit uint16
82:         uint16 feeBps;

/// @audit uint40
90:         uint40 timestamp;

/// @audit uint96
92:         uint96 delegatedVotingPower;

/// @audit uint96
94:         uint96 intrinsicVotingPower;

/// @audit uint40
104:         uint40 maxExecutableTime;

/// @audit uint40
107:         uint40 cancelDelay;

/// @audit uint40
117:         uint40 proposedTime;

/// @audit uint40
119:         uint40 passedTime;

/// @audit uint40
121:         uint40 executedTime;

/// @audit uint40
123:         uint40 completedTime;

/// @audit uint96
125:         uint96 votes; // -1 == vetoed

/// @audit uint96
127:         uint96 totalVotingPower;

/// @audit uint8
129:         uint8 numHosts;

/// @audit uint8
131:         uint8 numHostsAccepted;

/// @audit uint40
162:         uint40 timestamp,

/// @audit uint96
163:         uint96 delegatedVotingPower,

/// @audit uint96
164:         uint96 intrinsicVotingPower,

/// @audit uint40
171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

/// @audit uint40
171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

/// @audit uint40
179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

/// @audit uint40
179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

/// @audit uint16
180:     error InvalidBpsError(uint16 bps);

/// @audit uint96
187:     uint96 private constant VETO_VALUE = type(uint96).max;

/// @audit uint16
196:     uint16 public feeBps;

/// @audit uint40
200:     uint40 public lastRageQuitTimestamp;

/// @audit uint8
210:     uint8 public numHosts;

/// @audit uint40
357:         uint40 timestamp

/// @audit uint96
358:     ) external view returns (uint96 votingPower) {

/// @audit uint40
370:         uint40 timestamp,

/// @audit uint96
372:     ) public view returns (uint96 votingPower) {

/// @audit uint40
425:         uint40 timestamp

/// @audit uint16
523:         uint16 feeBps_ = feeBps;

/// @audit uint96
634:         uint96 votingPower = getVotingPowerAt(msg.sender, values.proposedTime - 1, snapIndex);

/// @audit uint40
906:         uint40 timestamp,

/// @audit int192
938:         int192 powerI192 = power.safeCastUint256ToInt192();

/// @audit int192
944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

/// @audit uint96
1002:             uint96 newDelegateDelegatedVotingPower = newDelegateSnap.delegatedVotingPower +

/// @audit uint40
1086:         uint40 t = uint40(block.timestamp);

/// @audit uint96
1112:         uint96 totalVotes,

/// @audit uint96
1113:         uint96 totalVotingPower

/// @audit uint8
1123:         uint8 snapshotNumHosts,

/// @audit uint8
1124:         uint8 numHostsAccepted

/// @audit uint96
1130:         uint96 voteCount,

/// @audit uint96
1131:         uint96 totalVotingPower,

/// @audit uint16
1132:         uint16 passThresholdBps
```

- *PartyGovernanceNFT.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L20), [#L21](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L21), [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L29), [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L29), [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L45](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L45), [#L49](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L49), [#L55](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L55), [#L90](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L90), [#L172](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L172), [#L173](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L173), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L176), [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L208), [#L210](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L210), [#L211](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L211), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L236), [#L247](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L247), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L255), [#L271](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L271), [#L288](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L288), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L318), [#L325](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L325), [#L356](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L356), [#L401](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L401), [#L407](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L407) ):

```solidity
/// @audit uint40
20:     error FixedRageQuitTimestampError(uint40 rageQuitTimestamp);

/// @audit uint40
21:     error CannotRageQuitError(uint40 rageQuitTimestamp);

/// @audit uint40
29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

/// @audit uint40
29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

/// @audit uint40
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

/// @audit uint40
35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

/// @audit uint96
45:     uint96 public tokenCount;

/// @audit uint96
49:     uint96 public mintedVotingPower;

/// @audit uint40
55:     uint40 public rageQuitTimestamp;

/// @audit uint40
90:         uint40 rageQuitTimestamp_

/// @audit uint96
172:         uint96 mintedVotingPower_ = mintedVotingPower;

/// @audit uint96
173:         uint96 totalVotingPower = _getSharedProposalStorage().governanceValues.totalVotingPower;

/// @audit uint96
176:         uint96 votingPower_ = votingPower.safeCastUint256ToUint96();

/// @audit uint96
208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit uint96
210:         uint96 mintedVotingPower_ = mintedVotingPower;

/// @audit uint96
211:         uint96 totalVotingPower = _getSharedProposalStorage().governanceValues.totalVotingPower;

/// @audit uint96
236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit uint96
247:     function increaseTotalVotingPower(uint96 votingPower) external {

/// @audit uint96
255:     function decreaseTotalVotingPower(uint96 votingPower) external {

/// @audit uint96
271:     ) private returns (uint96 totalVotingPowerBurned) {

/// @audit uint96
288:             uint96 votingPower = votingPowerByTokenId[tokenId].safeCastUint256ToUint96();

/// @audit uint40
318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

/// @audit uint40
325:         uint40 oldRageQuitTimestamp = rageQuitTimestamp;

/// @audit uint40
356:         uint40 currentRageQuitTimestamp = rageQuitTimestamp;

/// @audit uint96
401:             uint96 totalVotingPowerBurned = _burnAndUpdateVotingPower(tokenIds, !isAuthority_);

/// @audit uint16
407:             uint16 feeBps_ = feeBps;
```

- *ProposalExecutionEngine.sol* ( [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L42) ):

```solidity
/// @audit uint32
42:     error UnsupportedProposalTypeError(uint32 proposalType);
```

- *ProposalStorage.sol* ( [#L21](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L21), [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L22), [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L23), [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L24) ):

```solidity
/// @audit uint40
21:         uint40 voteDuration;

/// @audit uint40
22:         uint40 executionDelay;

/// @audit uint16
23:         uint16 passThresholdBps;

/// @audit uint96
24:         uint96 totalVotingPower;
```

- *SetGovernanceParameterProposal.sol* ( [#L19](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L19), [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L20), [#L21](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L21) ):

```solidity
/// @audit uint40
19:         uint40 voteDuration;

/// @audit uint40
20:         uint40 executionDelay;

/// @audit uint16
21:         uint16 passThresholdBps;
```

- *OffChainSignatureValidator.sol* ( [#L17](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L17), [#L18](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L18), [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L29), [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L59), [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L67), [#L68](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L68), [#L84](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L84) ):

```solidity
/// @audit uint96
17:         uint96 oldThresholdBps,

/// @audit uint96
18:         uint96 newThresholdBps

/// @audit uint8
29:         uint8 v;

/// @audit uint96
59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *

/// @audit uint96
67:         uint96 totalVotingPower = party.getGovernanceValues().totalVotingPower;

/// @audit uint96
68:         uint96 thresholdBps = signingThersholdBps[party];

/// @audit uint96
84:     function setSigningThresholdBps(uint96 thresholdBps) external {
```

</details>

### [G&#x2011;24] Using a double `if` statement instead of a logical AND(`&&`)

Using a double `if` statement instead of a logical AND (`&&`) can provide similar short-circuiting behavior whereas double if is slightly [more gas efficient](https://gist.github.com/DadeKuma/931ce6794a050201ec6544dbcc31316c).

<details>
<summary>There are 17 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L263), [#L286](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L286), [#L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L324), [#L390-L392](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L390-L392) ):

```solidity
263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

390:         if (
391:             !party.isHost(msg.sender) &&
392:             _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender
```

- *PartyGovernance.sol* ( [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L225), [#L244](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L244), [#L505](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L505), [#L606-L609](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L606-L609), [#L643-L649](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L643-L649), [#L674-L677](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L674-L677), [#L724](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L724), [#L912-L918](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L912-L918), [#L982](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L982) ):

```solidity
225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

244:         if (msg.sender != partyDao && !isHost[msg.sender]) {

505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

606:             if (
607:                 status != ProposalStatus.Voting &&
608:                 status != ProposalStatus.Passed &&
609:                 status != ProposalStatus.Ready

643:         if (
644:             values.passedTime == 0 &&
645:             _areVotesPassing(
646:                 values.votes,
647:                 values.totalVotingPower,
648:                 _getSharedProposalStorage().governanceValues.passThresholdBps
649:             )

674:             if (
675:                 status != ProposalStatus.Voting &&
676:                 status != ProposalStatus.Passed &&
677:                 status != ProposalStatus.Ready

724:         if (status != ProposalStatus.Ready && status != ProposalStatus.InProgress) {

912:             if (
913:                 // Hint is within bounds.
914:                 hintIndex < snapsLength &&
915:                 // Snapshot is not too recent.
916:                 snaps[hintIndex].timestamp <= timestamp &&
917:                 // Snapshot is not too old.
918:                 (hintIndex == snapsLength - 1 || snaps[hintIndex + 1].timestamp > timestamp)

982:         if (oldDelegate != voter && oldDelegate != newDelegate) {
```

- *PartyGovernanceNFT.sol* ( [#L179](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L179), [#L216](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L216), [#L278-L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L278-L281) ):

```solidity
179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

278:                 if (
279:                     msg.sender != owner &&
280:                     getApproved[tokenId] != msg.sender &&
281:                     !isApprovedForAll[owner][msg.sender]
```

- *OffChainSignatureValidator.sol* ( [#L62](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L62) ):

```solidity
62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {
```

</details>

### [G&#x2011;25] Divisions can be unchecked to save gas

The expression `type(int).min/(-1)` is the only case where division causes an overflow. Therefore, uncheck can be used to [save gas](https://gist.github.com/DadeKuma/3bc597338ae774b8b3bd43280d55271f) in scenarios where it is certain that such an overflow will not occur.

<details>
<summary>There are 14 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L266](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L266), [#L270](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L270), [#L281](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L281), [#L287](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L287), [#L325](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L325), [#L329](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L329), [#L355](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L355) ):

```solidity
266:             amount = (amount * (1e4 - fundingSplitBps_)) / 1e4;

270:         votingPower = (amount * exchangeRateBps) / 1e4;

281:         amount = (votingPower * 1e4) / exchangeRateBps;

287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);

325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

355:         splitAmount = (totalContributions * fundingSplitBps_) / 1e4;
```

- *PartyGovernance.sol* ( [#L434](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L434), [#L1115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1115), [#L1134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1134) ):

```solidity
434:             uint256 mid = (low + high) / 2;

1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);
```

- *PartyGovernanceNFT.sol* ( [#L157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L157), [#L393](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L393), [#L413](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L413) ):

```solidity
157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

413:                 uint256 fee = (amount * feeBps_) / 1e4;
```

- *OffChainSignatureValidator.sol* ( [#L74](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L74) ):

```solidity
74:                 signerVotingPowerBps / totalVotingPower >= thresholdBps)
```

</details>

### [G&#x2011;26] Increments can be `unchecked` to save gas

Using `unchecked` increments can save gas by bypassing the built-in overflow checks. This can save [30-40 gas](https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#the-increment-in-for-loop-post-condition-can-be-made-unchecked) **per iteration**. So it is recommended to use `unchecked` increments when overflow is not possible.

<details>
<summary>There are 10 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L211](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L211), [#L260](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L260), [#L357](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L357), [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L379) ):

```solidity
211:         for (uint256 i; i < numContributions; ++i) {

260:         for (uint256 i; i < args.recipients.length; ++i) {

357:         for (uint256 i; i < numRefunds; ++i) {

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {
```

- *PartyGovernance.sol* ( [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L305) ):

```solidity
305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {
```

- *PartyGovernanceNFT.sol* ( [#L102](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L102), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L272), [#L378](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L378), [#L391](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L391), [#L408](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L408) ):

```solidity
102:             for (uint256 i; i < authorities.length; ++i) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {
```

</details>

### [G&#x2011;27] Unused `internal` functions should be removed to save deployment gas

All `internal` functions that are never used can be safely removed or commented out to save gas. If the functions are required by an interface, the contract should inherit from that interface and use the override keyword.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

### [G&#x2011;28] Use assembly to validate `msg.sender`

We can use assembly to efficiently validate msg.sender with the least amount of opcodes necessary. For more details check the following report [Here](https://code4rena.com/reports/2023-05-juicebox#g-06-use-assembly-to-validate-msgsender)

There are 9 instances:

- *ETHCrowdfundBase.sol* ( [#L202](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L202), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L372), [#L392](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L392) ):

```solidity
202:         if (msg.sender == contributor || oldDelegate == address(0)) {

372:         if (_GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender) {

392:             _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender
```

- *PartyGovernance.sol* ( [#L234](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L234), [#L244](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L244), [#L496](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L496) ):

```solidity
234:             if (msg.sender != partyDao) {

244:         if (msg.sender != partyDao && !isHost[msg.sender]) {

496:         if (msg.sender != address(this)) {
```

- *PartyGovernanceNFT.sol* ( [#L68](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L68), [#L279](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L279), [#L280](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L280) ):

```solidity
68:         if (msg.sender != address(this)) {

279:                     msg.sender != owner &&

280:                     getApproved[tokenId] != msg.sender &&
```

### [G&#x2011;29] Using assembly to check for zero can save gas

Using assembly to check for zero can save gas by allowing more direct access to the evm and reducing some of the overhead associated with high-level operations in solidity.

<details>
<summary>There are 43 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L153](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L153), [#L165](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L165), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L176), [#L181](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L181), [#L213](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L213), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L272) ):

```solidity
153:         if (opts.maxTotalContributions == 0) {

165:         if (opts.exchangeRateBps == 0) revert InvalidExchangeRateError(opts.exchangeRateBps);

176:         if (maxTotalContributions == 0) {

181:         if (expiry_ == 0) {

213:         if (amount == 0) return 0;

272:         if (votingPower == 0) revert ZeroVotingPowerError();
```

- *InitialETHCrowdfund.sol* ( [#L283](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L283), [#L289](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L289), [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L298), [#L300](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L300), [#L384](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L384) ):

```solidity
283:         if (delegate == address(0)) {

289:         if (_gateKeeper != IGateKeeper(address(0))) {

298:         if (amount == 0) return 0;

300:         if (tokenId == 0) {

384:         if (address(customMetadataProvider) == address(0)) {
```

- *PartyGovernance.sol* ( [#L445](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L445), [#L460](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L460), [#L510](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L510), [#L797](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L797), [#L803](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L803), [#L911](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L911), [#L949](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L949), [#L951](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L951), [#L1033](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1033), [#L1048](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1048), [#L1068](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1068), [#L1072](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1072), [#L1073](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1073), [#L1088](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1088) ):

```solidity
445:         return high == 0 ? type(uint256).max : high - 1;

460:         if (newPartyHost != address(0)) {

510:         if (_getSharedProposalStorage().governanceValues.totalVotingPower == 0) {

797:             if (globalMaxCancelDelay != 0) {

803:             if (globalMinCancelDelay != 0) {

911:         if (snapsLength != 0) {

949:         oldDelegate = oldDelegate == address(0) ? voter : oldDelegate;

951:         delegate = delegate == address(0) ? oldDelegate : delegate;

1033:         if (n != 0) {

1048:         if (n != 0) {

1068:         if (pv.proposedTime == 0) {

1072:         if (pv.executedTime != 0) {

1073:             if (pv.completedTime == 0) {

1088:         if (pv.passedTime != 0) {
```

- *PartyGovernanceNFT.sol* ( [#L106](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L106), [#L157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L157), [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L196), [#L350](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L350) ):

```solidity
106:         if (customizationPresetId != 0) {

157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

196:         if (delegate_ != address(0)) {

350:         if (tokenIds.length == 0) revert NothingToBurnError();
```

- *ProposalExecutionEngine.sol* ( [#L128](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L128), [#L131](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L131), [#L150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L150), [#L155](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L155), [#L165](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L165), [#L169](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L169), [#L197](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L197), [#L209](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L209), [#L231](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L231), [#L234](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L234), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L236) ):

```solidity
128:         if (oldImpl != address(0)) return;

131:         if (initializeData.length == 0) return;

150:         if (params.proposalId == 0) {

155:         if (currentInProgressProposalId == 0) {

165:             if (nextProgressDataHash == 0) {

169:                 if (params.progressData.length != 0) {

197:         if (nextProgressData.length == 0) {

209:         if (proposalId == 0) {

231:         if (address(validator) != address(0)) {

234:         if (tx.origin == address(0)) {

236:             if (address(validator) == address(0)) {
```

- *SetGovernanceParameterProposal.sol* ( [#L32](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L32), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L42), [#L53](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L53) ):

```solidity
32:         if (proposalData.voteDuration != 0) {

42:         if (proposalData.executionDelay != 0) {

53:         if (proposalData.passThresholdBps != 0) {
```

</details>

### [G&#x2011;30] Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes

Use uint256(1) and uint256(2) for true/false to avoid a Gwarmaccess (100 gas), and to avoid Gsset (20000 gas) when changing from ‘false’ to ‘true’, after having been ‘true’ in the past. Refer to the [source](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/5ae630684a0f57de400ef69499addab4c32ac8fb/contracts/security/ReentrancyGuard.sol#L23-L27).

There are 7 instances:

- *ETHCrowdfundBase.sol* ( [#L101](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L101), [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L104), [#L106](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L106) ):

```solidity
101:     bool public disableContributingForExistingCard;

104:     bool public fundingSplitPaid;

106:     bool public emergencyExecuteDisabled;
```

- *PartyGovernance.sol* ( [#L194](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L194), [#L206](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L206) ):

```solidity
194:     bool public emergencyExecuteDisabled;

206:     mapping(address => bool) public isHost;
```

- *PartyGovernanceNFT.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L59) ):

```solidity
59:     mapping(address => bool) public isAuthority;
```

- *Implementation.sol* ( [#L15](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L15) ):

```solidity
15:     bool public initialized;
```

### [G&#x2011;31] Use `selfbalance()` instead of `address(x).balance`

Use assembly when getting a contract's balance of ETH.
You can use `selfbalance()` instead of `address(x).balance` when getting your contract's balance of ETH to save gas.
Additionally, you can use `balance(address)` instead of `address.balance()` when getting an external contract's balance of ETH.
*Saves 15 gas when checking internal balance, 6 for external*.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L387](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L387) ):

```solidity
387:                     ? address(this).balance
```

### [G&#x2011;32] Unlimited gas consumption risk due to external call recipients

When calling an external function without specifying a gas limit , the called contract may consume all the remaining gas, causing the tx to be reverted. To mitigate this, it is recommended to explicitly set a gas limit when making low level external calls.

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379) ):

```solidity
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *PartyGovernance.sol* ( [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846) ):

```solidity
846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

### [G&#x2011;33] Optimize names to save gas

`public`/`external` function names and `public` member variable names can be optimized to save gas. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save 128 gas each during deployment, and renaming functions to have lower method IDs will save 22 gas per call, [per sorted position shifted](https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92).

<details>
<summary>There are 7 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
/// @audit getCrowdfundLifecycle(), convertVotingPowerToContribution(), finalize(), sendFundingSplit(), emergencyExecute(), disableEmergencyExecute(), party, minContribution, maxContribution, disableContributingForExistingCard, fundingSplitPaid, emergencyExecuteDisabled, minTotalContributions, maxTotalContributions, totalContributions, expiry, exchangeRateBps, fundingSplitBps, fundingSplitRecipient, gateKeeper, gateKeeperId, delegationsByContributor
9: contract ETHCrowdfundBase is Implementation {
```

- *InitialETHCrowdfund.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L20) ):

```solidity
/// @audit initialize(), contribute(), contribute(), batchContribute(), contributeFor(), batchContributeFor(), refund(), batchRefund()
20: contract InitialETHCrowdfund is ETHCrowdfundBase {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
/// @audit getProposalExecutionEngine(), getProposalEngineOpts(), getVotingPowerAt(), getVotingPowerAt(), getProposalStateInfo(), getGovernanceValues(), getProposalHash(), findVotingPowerSnapshotIndex(), delegateVotingPower(), abdicateHost(), distribute(), propose(), accept(), veto(), execute(), cancel(), emergencyExecute(), disableEmergencyExecute(), emergencyExecuteDisabled, feeBps, feeRecipient, lastRageQuitTimestamp, preciousListHash, lastProposalId, isHost, delegationsByVoter, numHosts
23: abstract contract PartyGovernance is
```

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
/// @audit contractURI(), royaltyInfo(), getDistributionShareOf(), getVotingPowerShareOf(), mint(), increaseVotingPower(), decreaseVotingPower(), increaseTotalVotingPower(), decreaseTotalVotingPower(), burn(), burn(), setRageQuit(), rageQuit(), addAuthority(), abdicateAuthority(), tokenCount, mintedVotingPower, rageQuitTimestamp, votingPowerByTokenId, isAuthority
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalExecutionEngine.sol* ( [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24) ):

```solidity
/// @audit initialize(), getCurrentInProgressProposalId(), executeProposal(), cancelProposal(), isValidSignature()
24: contract ProposalExecutionEngine is
```

- *OffChainSignatureValidator.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L9) ):

```solidity
/// @audit isValidSignature(), setSigningThresholdBps(), signingThersholdBps
9: contract OffChainSignatureValidator is IERC1271 {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
/// @audit IMPL(), implementation, initialized
5: abstract contract Implementation {
```

</details>

### [G&#x2011;34] Newer versions of solidity are more gas efficient

The solidity language continues to pursue more efficient gas optimization schemes. Adopting a [newer version of solidity](https://github.com/ethereum/solc-js/tags) can be more gas efficient.

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *InitialETHCrowdfund.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *PartyGovernance.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *PartyGovernanceNFT.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *ProposalExecutionEngine.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *ProposalStorage.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *SetGovernanceParameterProposal.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *SetSignatureValidatorProposal.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *OffChainSignatureValidator.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *Implementation.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

</details>

### [G&#x2011;35] Avoid updating storage when the value hasn't changed

Manipulating storage in solidity is gas-intensive. It can be optimized by avoiding unnecessary storage updates when the new value equals the existing value.
If the old value is equal to the new value, not re-storing the value will avoid a Gsreset (**2900 gas**), potentially at the expense of a Gcoldsload (**2100 gas**) or a Gwarmaccess (**100 gas**).

There are 5 instances:

- *ETHCrowdfundBase.sol* ( [#L230](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L230) ):

```solidity
230:             totalContributions = maxTotalContributions_;
```

- *PartyGovernance.sol* ( [#L1144](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1144) ):

```solidity
1144:         preciousListHash = _hashPreciousList(preciousTokens, preciousTokenIds);
```

- *PartyGovernanceNFT.sol* ( [#L190](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L190), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L372) ):

```solidity
190:         votingPowerByTokenId[tokenId] = votingPower_;

372:         lastRageQuitTimestamp = uint40(block.timestamp);
```

- *OffChainSignatureValidator.sol* ( [#L87](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L87) ):

```solidity
87:         signingThersholdBps[party] = thresholdBps;
```

### [G&#x2011;36] Same cast is done multiple times

It's cheaper to do it once, and store the result to a variable. The examples below are the second+ instance of a given cast of the variable.

There are 3 instances:

- *PartyGovernance.sol* ( [#L734](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L734), [#L737](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L737), [#L1011](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1011) ):

```solidity
734:                     uint40(block.timestamp)

737:             proposalState.values.executedTime = uint40(block.timestamp);

1011:                 timestamp: uint40(block.timestamp),
```

### [G&#x2011;37] State variables that are used multiple times in a function should be cached in stack variables

When performing multiple operations on a state variable in a function, it is recommended to cache it first. Either multiple reads or multiple writes to a state variable can save gas by caching it on the stack.
Caching of a state variable replaces each Gwarmaccess (100 gas) with a much cheaper stack read. Other less obvious fixes/optimizations include having local memory caches of state variable structs, or having local caches of state variable contracts/addresses.
*Saves 100 gas per instance*.

<details>
<summary>There are 26 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317) ):

```solidity
/// @audit maxTotalContributions: 2 reads
/// @audit totalContributions: 1 reads 2 writes
196:     function _processContribution(

/// @audit party: 2 reads
317:     function _finalize(uint96 totalContributions_) internal {
```

- *InitialETHCrowdfund.sol* ( [#L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L275), [#L318](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L318) ):

```solidity
/// @audit gateKeeperId: 2 reads
/// @audit party: 3 reads
275:     function _contribute(

/// @audit party: 3 reads
318:     function refund(uint256 tokenId) external returns (uint96 amount) {
```

- *PartyGovernanceNFT.sol* ( [#L166](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L166), [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L208), [#L344](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L344) ):

```solidity
/// @audit mintedVotingPower: 2 reads 1 writes
166:     function mint(

/// @audit mintedVotingPower: 2 reads 1 writes
208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit rageQuitTimestamp: 1 reads 2 writes
/// @audit feeRecipient: 2 reads
344:     function rageQuit(
```

</details>

### [G&#x2011;38] `require()` or `revert()` statements that check input arguments should be at the top of the function

Checks that involve constants should come before checks that involve state variables, function calls, and calculations. By doing these checks first, the function is able to revert before wasting a Gcoldsload (**2100 gas***) in a function that may ultimately revert in the unhappy case.

There is 1 instance:

- *ProposalExecutionEngine.sol* ( [#L313](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L313) ):

```solidity
/// @audit should check before line 304
313:         require(proposalType != ProposalType.Invalid);
```

### [G&#x2011;39] Contracts can use fewer storage slots by truncating state variables

Some state variables can be safely modified so that the contract uses fewer storage slots. Each saved slot can avoid an extra Gsset (**20000 gas**) for the first setting of the struct. Subsequent reads as well as writes have smaller gas savings.

<details>
<summary>There are 2 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L9) ):

```solidity
/// @audit Truncate `expiry` to `uint32`
/// @audit Truncate `exchangeRateBps` to `uint32`
/// @audit Fewer storage usage (6 slots -> 5 slots):
///        32 B: mapping(address => address) delegationsByContributor
///        20 B: Party party
///        12 B: uint96 minContribution
///        20 B: IGateKeeper gateKeeper
///        12 B: uint96 maxContribution
///        12 B: uint96 minTotalContributions
///        12 B: uint96 maxTotalContributions
///        4 B: uint32 expiry
///        4 B: uint32 exchangeRateBps
///        12 B: uint96 totalContributions
///        12 B: bytes12 gateKeeperId
///        2 B: uint16 fundingSplitBps
///        1 B: bool disableContributingForExistingCard
///        1 B: bool fundingSplitPaid
///        1 B: bool emergencyExecuteDisabled
///        0 B: address payable fundingSplitRecipient
9: contract ETHCrowdfundBase is Implementation {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
/// @audit Truncate `lastRageQuitTimestamp` to `uint32`
/// @audit Fewer storage usage (8 slots -> 7 slots):
///        32 B: bytes32 preciousListHash
///        32 B: uint256 lastProposalId
///        32 B: mapping(address => bool) isHost
///        32 B: mapping(address => address) delegationsByVoter
///        32 B: mapping(uint256 => ProposalState) _proposalStateByProposalId
///        32 B: mapping(address => VotingPowerSnapshot[]) _votingPowerSnapshotsByVoter
///        4 B: uint32 lastRageQuitTimestamp
///        2 B: uint16 feeBps
///        1 B: bool emergencyExecuteDisabled
///        1 B: uint8 numHosts
///        0 B: address payable feeRecipient
23: abstract contract PartyGovernance is
```

</details>

### [G&#x2011;40] Redundant state variable getters

Getters for public state variables are automatically generated so there is no need to code them manually and waste gas.

There is 1 instance:

- *Implementation.sol* ( [#L40-L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L40-L42) ):

```solidity
40:     function IMPL() external view returns (address) {
41:         return implementation;
42:     }
```

### [G&#x2011;41] Using `constant`s instead of `enum` can save gas

`Enum` is expensive and it is [more efficient to use constants](https://www.codehawks.com/finding/clm84992q02j9w9ruebun36d9) instead. An illustrative example of this approach can be found in the [ReentrancyGuard.sol](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/181d518609a9f006fcb97af63e6952e603cf100e/contracts/utils/ReentrancyGuard.sol#L34-L35).

<details>
<summary>There are 3 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L14-L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L14-L30) ):

```solidity
14:     enum CrowdfundLifecycle {
15:         // In practice, this state is never used. If the crowdfund is ever in
16:         // this stage, something is wrong (e.g. crowdfund was never initialized).
17:         Invalid,
18:         // Ready to accept contributions to reach contribution targets
19:         // until a deadline or the minimum contribution target is reached and
20:         // host finalizes.
21:         Active,
22:         // Expired and the minimum contribution target was not reached.
23:         Lost,
24:         // The crowdfund has expired and reached the minimum contribution
25:         // target. It is now ready to finalize.
26:         Won,
27:         // A won crowdfund has been finalized, with funds transferred to the
28:         // party and voting power successfully updated.
29:         Finalized
30:     }
```

- *PartyGovernance.sol* ( [#L36-L66](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L36-L66) ):

```solidity
36:     enum ProposalStatus {
37:         // The proposal does not exist.
38:         Invalid,
39:         // The proposal has been proposed (via `propose()`), has not been vetoed
40:         // by a party host, and is within the voting window. Members can vote on
41:         // the proposal and party hosts can veto the proposal.
42:         Voting,
43:         // The proposal has either exceeded its voting window without reaching
44:         // `passThresholdBps` of votes or was vetoed by a party host.
45:         Defeated,
46:         // The proposal reached at least `passThresholdBps` of votes but is still
47:         // waiting for `executionDelay` to pass before it can be executed. Members
48:         // can continue to vote on the proposal and party hosts can veto at this time.
49:         Passed,
50:         // Same as `Passed` but now `executionDelay` has been satisfied. Any member
51:         // may execute the proposal via `execute()`, unless `maxExecutableTime`
52:         // has arrived.
53:         Ready,
54:         // The proposal has been executed at least once but has further steps to
55:         // complete so it needs to be executed again. No other proposals may be
56:         // executed while a proposal is in the `InProgress` state. No voting or
57:         // vetoing of the proposal is allowed, however it may be forcibly cancelled
58:         // via `cancel()` if the `cancelDelay` has passed since being first executed.
59:         InProgress,
60:         // The proposal was executed and completed all its steps. No voting or
61:         // vetoing can occur and it cannot be cancelled nor executed again.
62:         Complete,
63:         // The proposal was executed at least once but did not complete before
64:         // `cancelDelay` seconds passed since the first execute and was forcibly cancelled.
65:         Cancelled
66:     }
```

- *ProposalExecutionEngine.sol* ( [#L48-L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L48-L61) ):

```solidity
48:     enum ProposalType {
49:         Invalid,
50:         ListOnOpensea,
51:         ListOnZora,
52:         Fractionalize,
53:         ArbitraryCalls,
54:         UpgradeProposalEngineImpl,
55:         ListOnOpenseaAdvanced,
56:         Distribute,
57:         AddAuthority,
58:         Operator,
59:         SetSignatureValidatorProposal,
60:         SetGovernanceParameterProposal
61:     }
```

</details>

### [G&#x2011;42] Use assembly to emit events

To efficiently emit events, it's possible to utilize assembly by making use of scratch space and the free memory pointer. This approach has the advantage of potentially avoiding the costs associated with memory expansion.

However, it's important to note that in order to safely optimize this process, it is preferable to cache and restore the free memory pointer.

A good example of such practice can be seen in [Solady's](https://github.com/Vectorized/solady/blob/main/src/tokens/ERC1155.sol#L167) codebase.

<details>
<summary>There are 31 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L210](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L210), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L335), [#L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L358), [#L397](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L397) ):

```solidity
210:         emit Contributed(msg.sender, contributor, amount, delegate);

335:         emit Finalized();

358:         emit FundingSplitSent(fundingSplitRecipient_, splitAmount);

397:         emit EmergencyExecuteDisabled();
```

- *InitialETHCrowdfund.sol* ( [#L341](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L341) ):

```solidity
341:             emit Refunded(contributor, tokenId, amount);
```

- *PartyGovernance.sol* ( [#L471](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L471), [#L520](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L520), [#L581](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L581), [#L652](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L652), [#L655](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L655), [#L685](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L685), [#L688](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L688), [#L830](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L830), [#L833](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L833), [#L857](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L857), [#L894](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L894), [#L897](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L897), [#L964](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L964) ):

```solidity
471:         emit HostStatusTransferred(msg.sender, newPartyHost);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

652:             emit ProposalPassed(proposalId);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

685:         emit ProposalVetoed(proposalId, msg.sender);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

830:         emit ProposalCancelled(proposalId);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

857:         emit EmergencyExecuteDisabled();

894:         emit ProposalExecuted(proposalId, msg.sender, nextProgressData);

897:         emit BatchMetadataUpdate(0, type(uint256).max);

964:         emit PartyDelegateUpdated(voter, delegate);
```

- *PartyGovernanceNFT.sol* ( [#L192](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L192), [#L227](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L227), [#L294](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L294), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L335), [#L482](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L482), [#L490](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L490) ):

```solidity
192:         emit PartyCardIntrinsicVotingPowerSet(tokenId, votingPower_);

227:         emit PartyCardIntrinsicVotingPowerSet(tokenId, newIntrinsicVotingPower);

294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);

482:         emit AuthorityAdded(authority);

490:         emit AuthorityRemoved(msg.sender);
```

- *ProposalExecutionEngine.sol* ( [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L331) ):

```solidity
331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);
```

- *SetGovernanceParameterProposal.sol* ( [#L36-L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L36-L39), [#L46-L49](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L46-L49), [#L57-L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L57-L60) ):

```solidity
36:             emit VoteDurationSet(
37:                 _getSharedProposalStorage().governanceValues.voteDuration,
38:                 proposalData.voteDuration
39:             );

46:             emit ExecutionDelaySet(
47:                 _getSharedProposalStorage().governanceValues.executionDelay,
48:                 proposalData.executionDelay
49:             );

57:             emit PassThresholdBpsSet(
58:                 _getSharedProposalStorage().governanceValues.passThresholdBps,
59:                 proposalData.passThresholdBps
60:             );
```

- *SetSignatureValidatorProposal.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L39) ):

```solidity
39:         emit SignatureValidatorSet(data.signatureHash, data.signatureValidator);
```

- *OffChainSignatureValidator.sol* ( [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L86) ):

```solidity
86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);
```

- *Implementation.sol* ( [#L33](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L33) ):

```solidity
33:         emit Initialized();
```

</details>

### [G&#x2011;43] Use `calldata` instead of `memory` for immutable arguments

Mark data types as `calldata` instead of `memory` where possible. This makes it so that the data is not automatically loaded into memory. If the data passed into the function does not need to be changed (like updating values in an array), it can be passed in as `calldata`. The one exception to this is if the argument must later be passed into another function that takes an argument that specifies `memory` storage.

<details>
<summary>There are 15 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L108-L113](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L108-L113), [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L235-L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L235-L240) ):

```solidity
/// @audit crowdfundOpts
/// @audit partyOpts
/// @audit customMetadata
108:     function initialize(
109:         InitialETHCrowdfundOptions memory crowdfundOpts,
110:         ETHPartyOptions memory partyOpts,
111:         MetadataProvider customMetadataProvider,
112:         bytes memory customMetadata
113:     ) external payable onlyInitialize {

/// @audit gateData
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit gateData
185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit gateData
235:     function contributeFor(
236:         uint256 tokenId,
237:         address payable recipient,
238:         address initialDelegate,
239:         bytes memory gateData
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L399](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L399), [#L553-L556](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L553-L556), [#L706-L713](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706-L713) ):

```solidity
/// @audit proposal
399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

/// @audit proposal
553:     function propose(
554:         Proposal memory proposal,
555:         uint256 latestSnapIndex
556:     ) external returns (uint256 proposalId) {

/// @audit proposal
/// @audit preciousTokens
/// @audit preciousTokenIds
706:     function execute(
707:         uint256 proposalId,
708:         Proposal memory proposal,
709:         IERC721[] memory preciousTokens,
710:         uint256[] memory preciousTokenIds,
711:         bytes calldata progressData,
712:         bytes calldata extraData
713:     ) external payable {
```

- *PartyGovernanceNFT.sol* ( [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L263) ):

```solidity
/// @audit tokenIds
263:     function burn(uint256[] memory tokenIds) public {
```

- *ProposalExecutionEngine.sol* ( [#L146-L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L146-L148), [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L225) ):

```solidity
/// @audit params
146:     function executeProposal(
147:         ExecuteProposalParams memory params
148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {

/// @audit signature
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

- *OffChainSignatureValidator.sol* ( [#L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L28) ):

```solidity
/// @audit signature
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

</details>

### [G&#x2011;44] Consider activating via-ir for deploying

By using `--via-ir` or `{"viaIR": true}`, the compiler is able to use more advanced [multi-function optimizations](https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html#solidity-ir-based-codegen-changes), for extra gas savings.

There is 1 instance:

- Global finding

### [G&#x2011;45] Using `bool`s for storage incurs overhead

[Booleans are more expensive than uint256](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/58f635312aa21f947cae5f8578638a85aa2519f5/contracts/security/ReentrancyGuard.sol#L23-L27) or any type that takes up a full word because each write operation emits an extra SLOAD to first read the slot's contents, replace the bits taken up by the boolean, and then write back. This is the compiler's defense against contract upgrades and pointer aliasing, and it cannot be disabled.
Use `uint256(0)` and `uint256(1)` for true/false to avoid a Gwarmaccess (**[100 gas](https://gist.github.com/IllIllI000/1b70014db712f8572a72378321250058)**) for the extra SLOAD.

There are 7 instances:

- *ETHCrowdfundBase.sol* ( [#L101](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L101), [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L104), [#L106](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L106) ):

```solidity
101:     bool public disableContributingForExistingCard;

104:     bool public fundingSplitPaid;

106:     bool public emergencyExecuteDisabled;
```

- *PartyGovernance.sol* ( [#L194](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L194), [#L206](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L206) ):

```solidity
194:     bool public emergencyExecuteDisabled;

206:     mapping(address => bool) public isHost;
```

- *PartyGovernanceNFT.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L59) ):

```solidity
59:     mapping(address => bool) public isAuthority;
```

- *Implementation.sol* ( [#L15](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L15) ):

```solidity
15:     bool public initialized;
```

### [G&#x2011;46] The result of a function call should be cached rather than re-calling the function

The function calls in solidity are expensive. If the same result of the same function calls are to be used several times, the result should be cached to reduce the gas consumption of repeated calls.

There are 7 instances:

- *PartyGovernance.sol* ( [#L487](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487) ):

```solidity
/// @audit `_getSharedProposalStorage()` called on lines: 500, 510
487:     function distribute(
```

- *ProposalExecutionEngine.sol* ( [#L225](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L225) ):

```solidity
/// @audit `validator.isValidSignature(hash,signature)` called on lines: 232, 242
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
```

- *SetGovernanceParameterProposal.sol* ( [#L25](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L25) ):

```solidity
/// @audit `_getSharedProposalStorage()` called on lines: 37, 40, 47, 50, 58, 61
25:     function _executeSetGovernanceParameter(
```

### [G&#x2011;47] Multiple accesses of the same mapping/array key/index should be cached

The instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mapping's value in a local `storage` or `calldata` variable when the value is accessed [multiple times](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0), saves **~42 gas per access** due to not having to recalculate the key's keccak256 hash (Gkeccak256 - **30 gas**) and that calculation's associated stack operations. Caching an array's struct avoids recalculating the array offsets into memory/calldata

<details>
<summary>There are 6 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L201](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L201) ):

```solidity
/// @audit `delegationsByContributor[contributor]` is also accessed on line 204
201:         address oldDelegate = delegationsByContributor[contributor];
```

- *PartyGovernance.sol* ( [#L462](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L462), [#L561](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L561), [#L946](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L946) ):

```solidity
/// @audit `isHost[newPartyHost]` is also accessed on line 465
462:             if (isHost[newPartyHost]) {

/// @audit `_proposalStateByProposalId[proposalId]` is also accessed on line 562
561:             _proposalStateByProposalId[proposalId].values,

/// @audit `delegationsByVoter[voter]` is also accessed on line 961
946:         address oldDelegate = delegationsByVoter[voter];
```

- *PartyGovernanceNFT.sol* ( [#L224](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L224) ):

```solidity
/// @audit `votingPowerByTokenId[tokenId]` is also accessed on line 225
224:         uint256 newIntrinsicVotingPower = votingPowerByTokenId[tokenId] + votingPower;
```

- *OffChainSignatureValidator.sol* ( [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L86) ):

```solidity
/// @audit `signingThersholdBps[party]` is also accessed on line 87
86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);
```

</details>

### [G&#x2011;48] Multiple mappings can be replaced with a single struct mapping

Saves a storage slot for the mapping. Depending on the circumstances and sizes of types, can avoid a Gsset (**20000 gas**) per mapping combined. Reads and subsequent writes can also be cheaper when a function requires both values and they both fit in the same storage slot. Finally, if both fields are accessed in the same function, can save **~42 gas per access** due to [not having to recalculate the key's keccak256 hash](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0) (Gkeccak256 - 30 gas) and that calculation's associated stack operations.

There are 2 instances:

- *PartyGovernance.sol* ( [#L208](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L208), [#L214](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L214) ):

```solidity
208:     mapping(address => address) public delegationsByVoter;

214:     mapping(address => VotingPowerSnapshot[]) private _votingPowerSnapshotsByVoter;
```

### [G&#x2011;49] State variable access within a loop

State variable reads and writes are more expensive than local variable reads and writes. Therefore, it is recommended to replace state variable reads and writes within loops with a local variable. Gas savings should be multiplied by the average loop length.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L422](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L422) ):

```solidity
/// @audit Access `feeRecipient` within for loop.
422:                         token.compatTransfer(feeRecipient, fee);
```

## Disputed Issues

### [D&#x2011;01] ~~Visibility should be set explicitly rather than defaulting to `internal`~~

The rule is valid, but the following findings are invalid.

There are 2 instances:

- *ProposalStorage.sol* ( [#L40-L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L40-L41) ):

```solidity
40:     uint256 private constant SHARED_STORAGE_SLOT =
41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));
```

- *SetSignatureValidatorProposal.sol* ( [#L13-L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L13-L14) ):

```solidity
13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =
14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));
```

### [D&#x2011;02] ~~Event names should use CamelCase~~

The instances below are already CamelCase (events are supposed to use CamelCase, not lowerCamelCase).

<details>
<summary>There are 31 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L75](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L75), [#L81](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L81), [#L82](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L82), [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L83), [#L84](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L84) ):

```solidity
75:     event Contributed(

81:     event Finalized();

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

83:     event EmergencyExecuteDisabled();

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);
```

- *InitialETHCrowdfund.sol* ( [#L96](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L96) ):

```solidity
96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);
```

- *PartyGovernance.sol* ( [#L144](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L144), [#L145](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L145), [#L146](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L146), [#L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L148), [#L149](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L149), [#L150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L150), [#L151](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L151), [#L152](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L152), [#L157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L157), [#L158](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L158), [#L159](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L159), [#L160](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L160) ):

```solidity
144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

148:     event ProposalPassed(uint256 indexed proposalId);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

151:     event ProposalCancelled(uint256 indexed proposalId);

152:     event DistributionCreated(

157:     event PartyDelegateUpdated(address indexed owner, address indexed delegate);

158:     event HostStatusTransferred(address oldHost, address newHost);

159:     event EmergencyExecuteDisabled();

160:     event PartyVotingSnapshotCreated(
```

- *PartyGovernanceNFT.sol* ( [#L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L27), [#L28](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L28), [#L29](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L29), [#L30](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L30), [#L31](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L31), [#L32](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L32) ):

```solidity
27:     event AuthorityAdded(address indexed authority);

28:     event AuthorityRemoved(address indexed authority);

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);
```

- *ProposalExecutionEngine.sol* ( [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L83) ):

```solidity
83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);
```

- *SetGovernanceParameterProposal.sol* ( [#L11](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L11), [#L13](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L13), [#L15](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L15) ):

```solidity
11:     event VoteDurationSet(uint256 oldValue, uint256 newValue);

13:     event ExecutionDelaySet(uint256 oldValue, uint256 newValue);

15:     event PassThresholdBpsSet(uint256 oldValue, uint256 newValue);
```

- *SetSignatureValidatorProposal.sol* ( [#L25](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L25) ):

```solidity
25:     event SignatureValidatorSet(bytes32 indexed hash, IERC1271 indexed signatureValidator);
```

- *OffChainSignatureValidator.sol* ( [#L15](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L15) ):

```solidity
15:     event SigningThresholdBpsSet(
```

- *Implementation.sol* ( [#L6](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L6) ):

```solidity
6:     event Initialized();
```

</details>

### [D&#x2011;03] ~~Use of `override` is unnecessary~~

Removing the following overrides will cause compile errors.

There are 4 instances:

- *PartyGovernanceNFT.sol* ( [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L451), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470) ):

```solidity
123:     function tokenURI(uint256) public view override returns (string memory) {

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {
```

### [D&#x2011;04] ~~Assembly blocks should have extensive comments~~

Assembly blocks take a lot more time to audit than normal Solidity code, and often have gotchas and side-effects that the Solidity versions of the same code do not. Consider adding more comments explaining what is being done in every step of the assembly code, and describe why assembly is being used instead of Solidity.

<details>
<summary>There are 4 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L407-L416](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L407-L416) ):

```solidity
407:         assembly {
408:             // Overwrite the data field with the hash of its contents and then
409:             // hash the struct.
410:             let dataPos := add(proposal, 0x40)
411:             let t := mload(dataPos)
412:             mstore(dataPos, dataHash)
413:             proposalHash := keccak256(proposal, 0x60)
414:             // Restore the data field.
415:             mstore(dataPos, t)
416:         }
```

- *ProposalExecutionEngine.sol* ( [#L306-L312](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L306-L312) ):

```solidity
306:         assembly {
307:             // By reading 4 bytes into the length prefix, the leading 4 bytes
308:             // of the data will be in the lower bits of the read word.
309:             proposalType := and(mload(add(proposalData, 4)), 0xffffffff)
310:             mstore(add(proposalData, 4), sub(mload(proposalData), 4))
311:             offsetProposalData := add(proposalData, 4)
312:         }
```

- *OffChainSignatureValidator.sol* ( [#L32-L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L32-L38), [#L41-L45](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L41-L45) ):

```solidity
32:         assembly {
33:             // First word of signature after size contains r
34:             r := mload(add(signature, 0x20))
35:             s := mload(add(signature, 0x40))
36:             // v is one byte which starts after s. type is uint8 so extra data will be ignored
37:             v := mload(add(signature, 0x41))
38:         }

41:         assembly {
42:             // Raw message data begins after v. Overwriting part of s and v with size of `message`
43:             message := add(signature, 0x41)
44:             mstore(message, sub(mload(signature), 0x41))
45:         }
```

</details>

### [D&#x2011;05] ~~Cast to `bytes` or `bytes32` for clearer semantic meaning~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *OffChainSignatureValidator.sol* ( [#L48-L52](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L48-L52) ):

```solidity
48:         bytes memory encodedPacket = abi.encodePacked(
49:             "\x19Ethereum Signed Message:\n",
50:             Strings.toString(message.length),
51:             message
52:         );
```

### [D&#x2011;06] ~~Avoid double casting~~

The rule is valid, but the following findings are invalid.

There are 6 instances:

- *ETHCrowdfundBase.sol* ( [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L333) ):

```solidity
333:         payable(address(party)).transferEth(totalContributions_);
```

- *InitialETHCrowdfund.sol* ( [#L289](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L289) ):

```solidity
289:         if (_gateKeeper != IGateKeeper(address(0))) {
```

- *PartyGovernance.sol* ( [#L527](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L527), [#L538](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L538) ):

```solidity
527:                     Party(payable(address(this))),

538:                 Party(payable(address(this))),
```

- *OffChainSignatureValidator.sol* ( [#L57](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L57), [#L85](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L85) ):

```solidity
57:         Party party = Party(payable(msg.sender));

85:         Party party = Party(payable(msg.sender));
```

### [D&#x2011;07] ~~Don't emit events inside a loop~~

The following findings are invalid.

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L294](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L294), [#L300](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L300) ):

```solidity
294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

300:             emit Burn(msg.sender, tokenId, votingPower);
```

### [D&#x2011;08] ~~Function can return unassigned variable~~

Make sure that functions with a return value always return a valid and assigned value. Even if the default value is as expected, it should be assigned with the default value for code clarity and to reduce confusion.

<details>
<summary>There is 1 instance (click to show):</summary>

- *OffChainSignatureValidator.sol* ( [#L28-L80](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L28-L80) ):

```solidity
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
29:         uint8 v;
30:         bytes32 r;
31:         bytes32 s;
32:         assembly {
33:             // First word of signature after size contains r
34:             r := mload(add(signature, 0x20))
35:             s := mload(add(signature, 0x40))
36:             // v is one byte which starts after s. type is uint8 so extra data will be ignored
37:             v := mload(add(signature, 0x41))
38:         }
39: 
40:         bytes memory message;
41:         assembly {
42:             // Raw message data begins after v. Overwriting part of s and v with size of `message`
43:             message := add(signature, 0x41)
44:             mstore(message, sub(mload(signature), 0x41))
45:         }
46: 
47:         // Recreate the message pre-hash from the raw data
48:         bytes memory encodedPacket = abi.encodePacked(
49:             "\x19Ethereum Signed Message:\n",
50:             Strings.toString(message.length),
51:             message
52:         );
...... OMITTED ......
56: 
57:         Party party = Party(payable(msg.sender));
58:         address signer = ecrecover(hash, v, r, s);
59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *
60:             10000;
61: 
62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {
63:             // Must own a party card or be delegatated voting power
64:             revert NotMemberOfParty();
65:         }
66: 
67:         uint96 totalVotingPower = party.getGovernanceValues().totalVotingPower;
68:         uint96 thresholdBps = signingThersholdBps[party];
69: 
70:         // Either threshold is 0 or signer votes above threshold
71:         if (
72:             thresholdBps == 0 ||
73:             (signerVotingPowerBps > totalVotingPower &&
74:                 signerVotingPowerBps / totalVotingPower >= thresholdBps)
75:         ) {
76:             return IERC1271.isValidSignature.selector;
77:         }
78: 
79:         revert InsufficientVotingPower();
80:     }
```

</details>

### [D&#x2011;09] ~~`internal` functions only called once can be inlined to save gas~~

The rule is valid, but the following findings are invalid.

<details>
<summary>There are 7 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L140](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L140), [#L196-L200](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L196-L200) ):

```solidity
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

196:     function _processContribution(
197:         address payable contributor,
198:         address delegate,
199:         uint96 amount
200:     ) internal returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L904-L908](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L904-L908) ):

```solidity
904:     function _getVotingPowerSnapshotAt(
905:         address voter,
906:         uint40 timestamp,
907:         uint256 hintIndex
908:     ) internal view returns (VotingPowerSnapshot memory snap) {
```

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91) ):

```solidity
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {
```

- *ProposalStorage.sol* ( [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L43), [#L55-L58](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55-L58) ):

```solidity
/// @audit Called in sub contracts
43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

/// @audit Called in sub contracts
55:     function _getSharedProposalStorage()
56:         internal
57:         pure
58:         returns (SharedProposalStorage storage stor)
```

- *SetGovernanceParameterProposal.sol* ( [#L25-L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L25-L27) ):

```solidity
25:     function _executeSetGovernanceParameter(
26:         IProposalExecutionEngine.ExecuteProposalParams memory params
27:     ) internal returns (bytes memory) {
```

</details>

### [D&#x2011;10] ~~Inline `modifier`s that are only used once, to save gas~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *Implementation.sol* ( [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L22) ):

```solidity
/// @audit Called in sub contracts
22:     modifier onlyDelegateCall() virtual {
```

### [D&#x2011;11] ~~Private functions only used once can be inlined to save gas~~

The rule is valid, but the following findings are invalid.

<details>
<summary>There are 4 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L372-L376](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L372-L376) ):

```solidity
372:     function _createParty(
373:         ETHPartyOptions memory opts,
374:         MetadataProvider customMetadataProvider,
375:         bytes memory customMetadata
376:     ) private returns (Party) {
```

- *PartyGovernance.sol* ( [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L972-L978](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L972-L978) ):

```solidity
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

972:     function _rebalanceDelegates(
973:         address voter,
974:         address oldDelegate,
975:         address newDelegate,
976:         VotingPowerSnapshot memory oldSnap,
977:         VotingPowerSnapshot memory newSnap
978:     ) private {
```

- *ProposalExecutionEngine.sol* ( [#L297-L299](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297-L299) ):

```solidity
297:     function _extractProposalType(
298:         bytes memory proposalData
299:     ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {
```

</details>

### [D&#x2011;12] ~~External call recipient can consume all remaining gas~~

There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas(`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L358-L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358-L360) ):

```solidity
358:             (bool s, bytes memory r) = address(this).call(
359:                 abi.encodeCall(this.refund, (tokenIds[i]))
360:             );
```

### [D&#x2011;13] ~~Magic numbers should be replaced with constants~~

Magic numbers are hard-coded values in code that can make it difficult for developers and maintainers to understand the code, and can also cause confusion or errors. To improve the readability and maintainability of code, it is recommended to replace magic numbers with constants that have good readability.

There are 5 instances:

- *PartyGovernance.sol* ( [#L186](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L186) ):

```solidity
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;
```

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38) ):

```solidity
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;
```

- *ProposalStorage.sol* ( [#L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L39) ):

```solidity
39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;
```

### [D&#x2011;14] ~~Change `public` function visibility to `external` to save gas~~

After Solidity version 0.6.9 both `public` and `external` functions save the [same amount of gas](https://ethereum.stackexchange.com/a/107939), and since these files are >0.6.9, these findings are invalid.

<details>
<summary>There are 8 instances (click to show):</summary>

- *InitialETHCrowdfund.sol* ( [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189) ):

```solidity
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L333) ):

```solidity
333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {
```

- *PartyGovernanceNFT.sol* ( [#L113-L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L113-L115), [#L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L123), [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L451), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470) ):

```solidity
113:     function supportsInterface(
114:         bytes4 interfaceId
115:     ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

123:     function tokenURI(uint256) public view override returns (string memory) {

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {
```

</details>

### [D&#x2011;15] ~~NatSpec: Contract declarations should have `@notice` tags~~

The `@notice` is used to explain to users what the contract does. The compiler interprets `///` or `/**` comments [as this tag](https://docs.soliditylang.org/en/latest/natspec-format.html#tags) if one wasn't explicitly provided.

There are 5 instances:

- *InitialETHCrowdfund.sol* ( [#L20](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L20) ):

```solidity
20: contract InitialETHCrowdfund is ETHCrowdfundBase {
```

- *PartyGovernance.sol* ( [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23) ):

```solidity
23: abstract contract PartyGovernance is
```

- *PartyGovernanceNFT.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L14) ):

```solidity
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {
```

- *ProposalExecutionEngine.sol* ( [#L24](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L24) ):

```solidity
24: contract ProposalExecutionEngine is
```

- *OffChainSignatureValidator.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L9) ):

```solidity
9: contract OffChainSignatureValidator is IERC1271 {
```

### [D&#x2011;16] ~~Functions missing NatSpec `@param` tag~~

<details>
<summary>There are 6 instances (click to show):</summary>

- *PartyGovernanceNFT.sol* ( [#L112-L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L112-L115), [#L450-L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L450-L451), [#L457-L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L457-L458), [#L464-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L464-L470) ):

```solidity
112:     /// @inheritdoc EIP165
113:     function supportsInterface(
114:         bytes4 interfaceId
115:     ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

450:     /// @inheritdoc ERC721
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

457:     /// @inheritdoc ERC721
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

464:     /// @inheritdoc ERC721
465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {
```

- *ProposalExecutionEngine.sol* ( [#L145-L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L145-L148), [#L206-L207](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L206-L207) ):

```solidity
145:     /// @inheritdoc IProposalExecutionEngine
146:     function executeProposal(
147:         ExecuteProposalParams memory params
148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {

206:     /// @inheritdoc IProposalExecutionEngine
207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {
```

</details>

### [D&#x2011;17] ~~NatSpec: Function `@return` is missing ~~

The rule is valid, but the following findings are invalid.

There are 3 instances:

- *PartyGovernanceNFT.sol* ( [#L112-L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L112-L115), [#L122-L123](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L122-L123) ):

```solidity
112:     /// @inheritdoc EIP165
113:     function supportsInterface(
114:         bytes4 interfaceId
115:     ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

122:     /// @inheritdoc ERC721
123:     function tokenURI(uint256) public view override returns (string memory) {
```

- *ProposalExecutionEngine.sol* ( [#L145-L148](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L145-L148) ):

```solidity
145:     /// @inheritdoc IProposalExecutionEngine
146:     function executeProposal(
147:         ExecuteProposalParams memory params
148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {
```

### [D&#x2011;18] ~~Variables should be named in mixedCase style~~

The rule is valid, but the following findings are invalid.

<details>
<summary>There are 27 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L180](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L180), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L222), [#L228](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L228), [#L255](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L255), [#L261](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L261), [#L262](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L262), [#L284](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L284), [#L285](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L285), [#L292](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L292), [#L301](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L301), [#L317](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L317), [#L322](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L322), [#L323](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L323), [#L346](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L346), [#L347](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L347) ):

```solidity
/// @audit expiry_
180:         uint256 expiry_ = expiry;

/// @audit maxContribution_
222:         uint96 maxContribution_ = maxContribution;

/// @audit maxTotalContributions_
228:         uint96 maxTotalContributions_ = maxTotalContributions;

/// @audit minContribution_
255:         uint96 minContribution_ = minContribution;

/// @audit fundingSplitRecipient_
261:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
262:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit fundingSplitRecipient_
284:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
285:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit totalContributions_
292:         uint96 totalContributions_ = totalContributions;

/// @audit minTotalContributions_
301:             uint96 minTotalContributions_ = minTotalContributions;

/// @audit totalContributions_
317:     function _finalize(uint96 totalContributions_) internal {

/// @audit fundingSplitRecipient_
322:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
323:         uint16 fundingSplitBps_ = fundingSplitBps;

/// @audit fundingSplitRecipient_
346:         address payable fundingSplitRecipient_ = fundingSplitRecipient;

/// @audit fundingSplitBps_
347:         uint16 fundingSplitBps_ = fundingSplitBps;
```

- *InitialETHCrowdfund.sol* ( [#L115](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L115) ):

```solidity
/// @audit party_
115:         Party party_ = _createParty(partyOpts, customMetadataProvider, customMetadata);
```

- *PartyGovernance.sol* ( [#L522](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L522), [#L523](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L523) ):

```solidity
/// @audit feeRecipient_
522:         address payable feeRecipient_ = feeRecipient;

/// @audit feeBps_
523:         uint16 feeBps_ = feeBps;
```

- *PartyGovernanceNFT.sol* ( [#L82](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L82), [#L83](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L83), [#L90](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L90), [#L172](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L172), [#L176](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L176), [#L195](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L195), [#L210](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L210), [#L353](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L353), [#L407](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L407) ):

```solidity
/// @audit name_
82:         string memory name_,

/// @audit symbol_
83:         string memory symbol_,

/// @audit rageQuitTimestamp_
90:         uint40 rageQuitTimestamp_

/// @audit mintedVotingPower_
172:         uint96 mintedVotingPower_ = mintedVotingPower;

/// @audit votingPower_
176:         uint96 votingPower_ = votingPower.safeCastUint256ToUint96();

/// @audit delegate_
195:         address delegate_ = delegationsByVoter[owner];

/// @audit mintedVotingPower_
210:         uint96 mintedVotingPower_ = mintedVotingPower;

/// @audit isAuthority_
353:         bool isAuthority_ = isAuthority[msg.sender];

/// @audit feeBps_
407:             uint16 feeBps_ = feeBps;
```

</details>

### [D&#x2011;19] ~~Not initializing local variables to zero saves gas~~

This is only true for state variables, and does not save gas for [local variables](https://gist.github.com/IllIllI000/e075d189c1b23dce256cd166e28f3397). The examples below are for local variables and therefore do not save gas, and are invalid.

There are 4 instances:

- *InitialETHCrowdfund.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L379) ):

```solidity
379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {
```

- *PartyGovernance.sol* ( [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L305), [#L432](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L432), [#L1054](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1054) ):

```solidity
305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

432:         uint256 low = 0;

1054:         uint256 flags = 0;
```

### [D&#x2011;20] ~~safeMint should be used in place of mint~~

The following are not `ERC721.mint()` calls.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L302](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L302) ):

```solidity
302:             party.mint(contributor, votingPower, delegate);
```

### [D&#x2011;21] ~~`x += y` is more expensive than `x = x + y` for state variables~~

It is not applicable to complex state variables.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L239](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L239) ):

```solidity
239:         votingPowerByTokenId[tokenId] -= votingPower;
```

### [D&#x2011;22] ~~Empty `receive()`/`fallback()` function~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *PartyGovernance.sol* ( [#L312](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L312) ):

```solidity
312:     fallback() external {
```

### [D&#x2011;23] ~~Remove empty functions to save gas~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99) ):

```solidity
/// @audit Constructor calls base
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}
```

### [D&#x2011;24] ~~Unused non-constant state variables waste gas~~

Removing unused state variables does not save gas

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L127](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L127), [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L129) ):

```solidity
/// @audit Used in sub contracts
127:     IGateKeeper public gateKeeper;

/// @audit Used in sub contracts
129:     bytes12 public gateKeeperId;
```

### [D&#x2011;25] ~~`SafeTransferLib` does not ensure that the token contract exists~~

There is a subtle difference between the implementation of solady/solmate's `SafeTransferLib` and OZ's SafeERC20. OZ's SafeERC20 checks if the token is a contract or not, while [`SafeTransferLib` does not](https://github.com/transmissions11/solmate/blob/fadb2e2778adbf01c80275bfb99e5c14969d964b/src/utils/SafeTransferLib.sol#L9):

`@dev Note that none of the functions in this library check that a token has code at all! That responsibility is delegated to the caller.`

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L461](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L461), [#L473](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L473) ):

```solidity
461:         super.safeTransferFrom(owner, to, tokenId);

473:         super.safeTransferFrom(owner, to, tokenId, data);
```

### [D&#x2011;26] ~~File allows a version of solidity that is susceptible to an assembly storage bug~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *PartyGovernance.sol* ( [#L319-L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L319-L324) ):

```solidity
319:             assembly {
320:                 let freeMem := mload(0x40)
321:                 mstore(freeMem, functionSelector)
322:                 mstore(0x40, add(freeMem, 0x20))
323:                 return(freeMem, 0x20)
324:             }
```

### [D&#x2011;27] ~~Solidity version 0.8.20 or above may not work on other chains due to PUSH0~~

The rule is invalid for this project

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *InitialETHCrowdfund.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *PartyGovernance.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *PartyGovernanceNFT.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *ProposalExecutionEngine.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *ProposalStorage.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *SetGovernanceParameterProposal.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *SetSignatureValidatorProposal.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *OffChainSignatureValidator.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

- *Implementation.sol* ( [#L2](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L2) ):

```solidity
2: pragma solidity 0.8.20;
```

</details>

### [D&#x2011;28] ~~SPDX identifier should be the in the first line of a solidity file~~

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *InitialETHCrowdfund.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *PartyGovernance.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *PartyGovernanceNFT.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *ProposalExecutionEngine.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *ProposalStorage.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *SetGovernanceParameterProposal.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *SetSignatureValidatorProposal.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *OffChainSignatureValidator.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

- *Implementation.sol* ( [#L1](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L1) ):

```solidity
1: // SPDX-License-Identifier: GPL-3.0
```

</details>

### [D&#x2011;29] ~~Timestamp may be manipulation~~

Use of `block.timestamp`, in and of itself, is not evidence of an issue; there must be an incorrect usage in the code in order for there to be a vulnerability. There should also be a corresponding suggested fix.

<details>
<summary>There are 19 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L163](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L163), [#L185](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L185) ):

```solidity
163:         expiry = uint40(block.timestamp + opts.duration);

185:         if (block.timestamp >= expiry_) {
```

- *PartyGovernance.sol* ( [#L565](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L565), [#L622](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L622), [#L651](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L651), [#L731](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L731), [#L734](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L734), [#L737](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L737), [#L745](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L745), [#L811](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L811), [#L813](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L813), [#L820](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L820), [#L954](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L954), [#L988](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L988), [#L1011](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1011), [#L1086](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1086) ):

```solidity
565:                 proposedTime: uint40(block.timestamp),

622:         if (lastRageQuitTimestamp == block.timestamp) {

651:             info.values.passedTime = uint40(block.timestamp);

731:             if (proposal.maxExecutableTime < block.timestamp) {

734:                     uint40(block.timestamp)

737:             proposalState.values.executedTime = uint40(block.timestamp);

745:         proposalState.values.completedTime = uint40(block.timestamp);

811:             if (block.timestamp < cancelTime) {

813:                     uint40(block.timestamp),

820:         proposalState.values.completedTime = uint40(block.timestamp | UINT40_HIGH_BIT);

954:             timestamp: uint40(block.timestamp),

988:                 timestamp: uint40(block.timestamp),

1011:                 timestamp: uint40(block.timestamp),

1086:         uint40 t = uint40(block.timestamp);
```

- *PartyGovernanceNFT.sol* ( [#L361](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L361), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L372) ):

```solidity
361:                     currentRageQuitTimestamp < block.timestamp

372:         lastRageQuitTimestamp = uint40(block.timestamp);
```

- *OffChainSignatureValidator.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L59) ):

```solidity
59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *
```

</details>

### [D&#x2011;30] ~~Numbers downcast to `address`es may result in collisions~~

The rule is valid, but the following findings are invalid.

<details>
<summary>There are 65 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L202](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L202), [#L241](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L241), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L263), [#L286](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L286), [#L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L324), [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L333), [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L333), [#L348](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L348), [#L356](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L356) ):

```solidity
202:         if (msg.sender == contributor || oldDelegate == address(0)) {

241:                 payable(msg.sender).transferEth(refundAmount);

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

333:         payable(address(party)).transferEth(totalContributions_);

333:         payable(address(party)).transferEth(totalContributions_);

348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {

356:         payable(fundingSplitRecipient_).transferEth(splitAmount);
```

- *InitialETHCrowdfund.sol* ( [#L170](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L170), [#L192](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L192), [#L215](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L215), [#L224](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L224), [#L283](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L283), [#L289](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L289), [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L333), [#L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358), [#L382](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L382), [#L384](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L384), [#L384](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L384) ):

```solidity
170:                 payable(msg.sender),

192:                 payable(msg.sender),

215:                 payable(msg.sender),

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

283:         if (delegate == address(0)) {

289:         if (_gateKeeper != IGateKeeper(address(0))) {

333:             address payable contributor = payable(party.ownerOf(tokenId));

358:             (bool s, bytes memory r) = address(this).call(

382:         authorities[authoritiesLength - 1] = address(this);

384:         if (address(customMetadataProvider) == address(0)) {

384:         if (address(customMetadataProvider) == address(0)) {
```

- *PartyGovernance.sol* ( [#L326](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L326), [#L460](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L460), [#L496](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L496), [#L527](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L527), [#L527](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L527), [#L534](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L534), [#L538](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L538), [#L538](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L538), [#L824](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L824), [#L884-L886](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L884-L886), [#L939](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L939), [#L940](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L940), [#L949](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L949), [#L951](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L951), [#L979](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L979), [#L979](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L979) ):

```solidity
326:         _readOnlyDelegateCall(address(_getSharedProposalStorage().engineImpl), msg.data);

460:         if (newPartyHost != address(0)) {

496:         if (msg.sender != address(this)) {

527:                     Party(payable(address(this))),

527:                     Party(payable(address(this))),

534:         IERC20(token).compatTransfer(address(distributor), amount);

538:                 Party(payable(address(this))),

538:                 Party(payable(address(this))),

824:                 address(_getSharedProposalStorage().engineImpl)

884:             (bool success, bytes memory resultData) = address(
885:                 _getSharedProposalStorage().engineImpl
886:             ).delegatecall(

939:         _adjustVotingPower(from, -powerI192, address(0));

940:         _adjustVotingPower(to, powerI192, address(0));

949:         oldDelegate = oldDelegate == address(0) ? voter : oldDelegate;

951:         delegate = delegate == address(0) ? oldDelegate : delegate;

979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

979:         if (newDelegate == address(0) || oldDelegate == address(0)) {
```

- *PartyGovernanceNFT.sol* ( [#L68](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L68), [#L138](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L138), [#L196](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L196), [#L229](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L229), [#L241](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L241), [#L295](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L295), [#L386](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L386), [#L387](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L387), [#L388](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L388), [#L419](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L419), [#L420](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L420), [#L435](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L435), [#L436](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L436) ):

```solidity
68:         if (msg.sender != address(this)) {

138:         return (address(0), 0); // Just to make the compiler happy.

196:         if (delegate_ != address(0)) {

229:         _adjustVotingPower(ownerOf(tokenId), votingPower.safeCastUint96ToInt192(), address(0));

241:         _adjustVotingPower(ownerOf(tokenId), -votingPower.safeCastUint96ToInt192(), address(0));

295:             _adjustVotingPower(owner, -votingPower.safeCastUint96ToInt192(), address(0));

386:                 uint256 balance = address(withdrawTokens[i]) == ETH_ADDRESS

387:                     ? address(this).balance

388:                     : withdrawTokens[i].balanceOf(address(this));

419:                     if (address(token) == ETH_ADDRESS) {

420:                         payable(feeRecipient).transferEth(fee);

435:                     if (address(token) == ETH_ADDRESS) {

436:                         payable(receiver).transferEth(amount);
```

- *ProposalExecutionEngine.sol* ( [#L128](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L128), [#L227](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L227), [#L227](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L227), [#L231](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L231), [#L231](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L231), [#L234](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L234), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L236), [#L236](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L236), [#L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L324), [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L331) ):

```solidity
128:         if (oldImpl != address(0)) return;

227:         if (address(validator) == address(1)) {

227:         if (address(validator) == address(1)) {

231:         if (address(validator) != address(0)) {

231:         if (address(validator) != address(0)) {

234:         if (tx.origin == address(0)) {

236:             if (address(validator) == address(0)) {

236:             if (address(validator) == address(0)) {

324:         if (expectedImpl != address(newImpl)) {

331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);
```

- *ProposalStorage.sol* ( [#L47](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L47), [#L48](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L48) ):

```solidity
47:         (bool s, bytes memory r) = address(impl).delegatecall(

48:             abi.encodeCall(IProposalExecutionEngine.initialize, (address(oldImpl), initData))
```

- *OffChainSignatureValidator.sol* ( [#L57](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L57), [#L85](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L85) ):

```solidity
57:         Party party = Party(payable(msg.sender));

85:         Party party = Party(payable(msg.sender));
```

- *Implementation.sol* ( [#L18](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L18), [#L23](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L23) ):

```solidity
18:         implementation = address(this);

23:         if (address(this) == implementation) {
```

</details>

### [D&#x2011;31] ~~Unused contract variables~~

The rule is valid, but the following findings are invalid.

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L127](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L127), [#L129](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L129) ):

```solidity
/// @audit Used in contract InitialETHCrowdfund
127:     IGateKeeper public gateKeeper;

/// @audit Used in contract InitialETHCrowdfund
129:     bytes12 public gateKeeperId;
```

### [D&#x2011;32] ~~Unused named return~~

The rule is valid, but the following findings are invalid.

<details>
<summary>There are 6 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L399](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L399), [#L1154-L1157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154-L1157) ):

```solidity
/// @audit proposalHash is used in assembly
399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

/// @audit h is used in assembly
1154:     function _hashPreciousList(
1155:         IERC721[] memory preciousTokens,
1156:         uint256[] memory preciousTokenIds
1157:     ) internal pure returns (bytes32 h) {
```

- *ProposalExecutionEngine.sol* ( [#L297-L299](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297-L299), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L335) ):

```solidity
/// @audit offsetProposalData is used in assembly
297:     function _extractProposalType(
298:         bytes memory proposalData
299:     ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {

/// @audit stor is used in assembly
335:     function _getStorage() internal pure returns (Storage storage stor) {
```

- *ProposalStorage.sol* ( [#L55-L58](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55-L58) ):

```solidity
/// @audit stor is used in assembly
55:     function _getSharedProposalStorage()
56:         internal
57:         pure
58:         returns (SharedProposalStorage storage stor)
```

- *SetSignatureValidatorProposal.sol* ( [#L47-L50](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L47-L50) ):

```solidity
/// @audit stor is used in assembly
47:     function _getSetSignatureValidatorProposalStorage()
48:         private
49:         pure
50:         returns (SetSignatureValidatorProposalStorage storage stor)
```

</details>

### [D&#x2011;33] ~~Unused named return variables without optimizer waste gas~~

Suggestions that only apply when the optimizer is _off_ are not useful to sponsors. Why would they pay for gas optimizations if they don't have the optimizer on, and don't plan to turn it on? Only a [small minority](https://github.com/search?q=org%3Acode-423n4+%22optimizer+%3D+false%22&type=code) have the optimizer off; the majority have it set to more than [200](https://github.com/search?q=org%3Acode-423n4+optimizer_runs&type=code) runs

<details>
<summary>There are 18 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L175](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L175) ):

```solidity
/// @audit lifecycle
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {
```

- *InitialETHCrowdfund.sol* ( [#L164-L167](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L164-L167), [#L185-L189](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L185-L189), [#L235-L240](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L235-L240) ):

```solidity
/// @audit votingPower
164:     function contribute(
165:         address delegate,
166:         bytes memory gateData
167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit votingPower
185:     function contribute(
186:         uint256 tokenId,
187:         address delegate,
188:         bytes memory gateData
189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit votingPower
235:     function contributeFor(
236:         uint256 tokenId,
237:         address payable recipient,
238:         address initialDelegate,
239:         bytes memory gateData
240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {
```

- *PartyGovernance.sol* ( [#L355-L358](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L355-L358), [#L368-L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L368-L372), [#L399](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L399), [#L423-L426](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L423-L426), [#L487-L492](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L487-L492), [#L595](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L595), [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L1064-L1066](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1064-L1066), [#L1154-L1157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154-L1157) ):

```solidity
/// @audit votingPower
355:     function getVotingPowerAt(
356:         address voter,
357:         uint40 timestamp
358:     ) external view returns (uint96 votingPower) {

/// @audit votingPower
368:     function getVotingPowerAt(
369:         address voter,
370:         uint40 timestamp,
371:         uint256 snapIndex
372:     ) public view returns (uint96 votingPower) {

/// @audit proposalHash is used in assembly
399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

/// @audit index
423:     function findVotingPowerSnapshotIndex(
424:         address voter,
425:         uint40 timestamp
426:     ) public view returns (uint256 index) {

/// @audit distInfo
487:     function distribute(
488:         uint256 amount,
489:         ITokenDistributor.TokenType tokenType,
490:         address token,
491:         uint256 tokenId
492:     ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {

/// @audit totalVotes
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

/// @audit completed
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

/// @audit status
1064:     function _getProposalStatus(
1065:         ProposalStateValues memory pv
1066:     ) private view returns (ProposalStatus status) {

/// @audit h is used in assembly
1154:     function _hashPreciousList(
1155:         IERC721[] memory preciousTokens,
1156:         uint256[] memory preciousTokenIds
1157:     ) internal pure returns (bytes32 h) {
```

- *ProposalExecutionEngine.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L141), [#L297-L299](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L297-L299), [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L335) ):

```solidity
/// @audit id
141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {

/// @audit offsetProposalData is used in assembly
297:     function _extractProposalType(
298:         bytes memory proposalData
299:     ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {

/// @audit stor is used in assembly
335:     function _getStorage() internal pure returns (Storage storage stor) {
```

- *ProposalStorage.sol* ( [#L55-L58](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L55-L58) ):

```solidity
/// @audit stor is used in assembly
55:     function _getSharedProposalStorage()
56:         internal
57:         pure
58:         returns (SharedProposalStorage storage stor)
```

- *SetSignatureValidatorProposal.sol* ( [#L47-L50](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L47-L50) ):

```solidity
/// @audit stor is used in assembly
47:     function _getSetSignatureValidatorProposalStorage()
48:         private
49:         pure
50:         returns (SetSignatureValidatorProposalStorage storage stor)
```

</details>

### [D&#x2011;34] ~~Low level `call` can be optimized with assembly~~

When using low-level calls, the `returnData` is copied to memory even if the variable is not utilized. The proper way to handle this is through a low level assembly call.
For example:
```solidity
(bool success,) = payable(receiver).call{gas: gas, value: value}("");
```
can be optimized to:
```solidity
bool success;
assembly {
    success := call(gas, receiver, value, 0, 0, 0, 0)
}
```


<details>
<summary>There are 6 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379) ):

```solidity
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *InitialETHCrowdfund.sol* ( [#L358-L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358-L360) ):

```solidity
358:             (bool s, bytes memory r) = address(this).call(
359:                 abi.encodeCall(this.refund, (tokenIds[i]))
360:             );
```

- *PartyGovernance.sol* ( [#L823-L825](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L823-L825), [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846), [#L884-L888](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L884-L888) ):

```solidity
823:             (bool success, bytes memory resultData) = (
824:                 address(_getSharedProposalStorage().engineImpl)
825:             ).delegatecall(abi.encodeCall(IProposalExecutionEngine.cancelProposal, (proposalId)));

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

884:             (bool success, bytes memory resultData) = address(
885:                 _getSharedProposalStorage().engineImpl
886:             ).delegatecall(
887:                     abi.encodeCall(IProposalExecutionEngine.executeProposal, (executeParams))
888:                 );
```

- *ProposalStorage.sol* ( [#L47-L49](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L47-L49) ):

```solidity
47:         (bool s, bytes memory r) = address(impl).delegatecall(
48:             abi.encodeCall(IProposalExecutionEngine.initialize, (address(oldImpl), initData))
49:         );
```

</details>

### [D&#x2011;35] ~~Use `assembly` to write address/contract type storage values~~

Using `assembly { sstore(state.slot, addr)` instead of `state = addr` can save gas.

**It is not safe to do this: it will stomp over any value packed into the same slot as the address.

There are 4 instances:

- *ETHCrowdfundBase.sol* ( [#L161](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L161), [#L169](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L169) ):

```solidity
161:         party = opts.party;

169:         fundingSplitRecipient = opts.fundingSplitRecipient;
```

- *InitialETHCrowdfund.sol* ( [#L154](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L154) ):

```solidity
154:         gateKeeper = crowdfundOpts.gateKeeper;
```

- *PartyGovernance.sol* ( [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L298) ):

```solidity
298:         feeRecipient = govOpts.feeRecipient;
```

### [D&#x2011;36] ~~Using bitmap to store bool states can save gas~~

None of these are examples where bitmaps can be used

There are 2 instances:

- *PartyGovernance.sol* ( [#L206](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L206) ):

```solidity
206:     mapping(address => bool) public isHost;
```

- *PartyGovernanceNFT.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L59) ):

```solidity
59:     mapping(address => bool) public isAuthority;
```

### [D&#x2011;37] ~~Using `delete` statement can save gas~~

Using delete instead of assigning zero to state variables does not save any extra gas with the optimizer [on](https://gist.github.com/IllIllI000/ef8ec3a70aede7f12433fe63dc418515#with-the-optimizer-set-at-200-runs) (saves 5-8 gas with optimizer completely off), so this finding is invalid, especially since if they were interested in gas savings, they'd have the optimizer enabled.

There are 6 instances:

- *PartyGovernance.sol* ( [#L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L470), [#L758](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L758) ):

```solidity
470:         isHost[msg.sender] = false;

758:             proposalState.values.completedTime = 0;
```

- *ProposalExecutionEngine.sol* ( [#L198](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L198), [#L199](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L199), [#L221](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L221), [#L222](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L222) ):

```solidity
198:             stor.currentInProgressProposalId = 0;

199:             stor.nextProgressDataHash = 0;

221:         stor.currentInProgressProposalId = 0;

222:         stor.nextProgressDataHash = 0;
```

### [D&#x2011;38] ~~Use `!= 0` or `== 0` for unsigned integer comparison~~

Only valid prior to solidity version 0.8.13, and only for require() statements, and at least one of those is not true for the examples below.

<details>
<summary>There are 10 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L239](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L239), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L263), [#L286](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L286), [#L324](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L324) ):

```solidity
239:             if (refundAmount > 0) {

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {
```

- *InitialETHCrowdfund.sol* ( [#L141](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L141), [#L224](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L224), [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L331) ):

```solidity
141:         if (initialContribution > 0) {

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

331:         if (amount > 0) {
```

- *PartyGovernance.sol* ( [#L1126](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1126) ):

```solidity
1126:         return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;
```

- *PartyGovernanceNFT.sol* ( [#L415](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L415), [#L426](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L426) ):

```solidity
415:                 if (fee > 0) {

426:                 if (amount > 0) {
```

</details>

### [D&#x2011;39] ~~Avoid contract existence checks by using low level calls~~

Prior to 0.8.10 the compiler inserted extra code, including EXTCODESIZE (100 gas), to check for contract existence for external function calls. In more recent solidity versions, the compiler will not insert these checks if the external call has a return value. Similar behavior can be achieved in earlier versions by using low-level calls, since low level calls never check for contract existence.

<details>
<summary>There are 34 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L298](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L298), [#L330](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L330), [#L372](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L372), [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379), [#L391](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L391), [#L392](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L392) ):

```solidity
/// @audit Invalid for solidity version >= 0.8.10
298:             if (!party.isHost(msg.sender)) revert OnlyPartyHostError();

/// @audit Return value not used.
330:         party.increaseTotalVotingPower(newVotingPower);

/// @audit Invalid for solidity version >= 0.8.10
372:         if (_GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender) {

/// @audit Invalid for solidity version >= 0.8.10
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

/// @audit Invalid for solidity version >= 0.8.10
391:             !party.isHost(msg.sender) &&

/// @audit Invalid for solidity version >= 0.8.10
392:             _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender
```

- *InitialETHCrowdfund.sol* ( [#L290](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L290), [#L302](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L302), [#L305](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L305), [#L307](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L307), [#L328](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L328), [#L333](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L333), [#L336](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L336), [#L386-L407](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L386-L407), [#L410-L433](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L410-L433) ):

```solidity
/// @audit Invalid for solidity version >= 0.8.10
290:             if (!_gateKeeper.isAllowed(msg.sender, gateKeeperId, gateData)) {

/// @audit Return value not used.
302:             party.mint(contributor, votingPower, delegate);

/// @audit Invalid for solidity version >= 0.8.10
305:         } else if (party.ownerOf(tokenId) == contributor) {

/// @audit Return value not used.
307:             party.increaseVotingPower(tokenId, votingPower);

/// @audit Invalid for solidity version >= 0.8.10
328:         uint96 votingPower = party.votingPowerByTokenId(tokenId).safeCastUint256ToUint96();

/// @audit Invalid for solidity version >= 0.8.10
333:             address payable contributor = payable(party.ownerOf(tokenId));

/// @audit Return value not used.
336:             party.burn(tokenId);

/// @audit Invalid for solidity version >= 0.8.10
386:                 opts.governanceOpts.partyFactory.createParty(
387:                     opts.governanceOpts.partyImpl,
388:                     authorities,
389:                     Party.PartyOptions({
390:                         name: opts.name,
391:                         symbol: opts.symbol,
392:                         customizationPresetId: opts.customizationPresetId,
393:                         governance: PartyGovernance.GovernanceOpts({
394:                             hosts: opts.governanceOpts.hosts,
395:                             voteDuration: opts.governanceOpts.voteDuration,
396:                             executionDelay: opts.governanceOpts.executionDelay,
397:                             passThresholdBps: opts.governanceOpts.passThresholdBps,
398:                             totalVotingPower: 0,
399:                             feeBps: opts.governanceOpts.feeBps,
400:                             feeRecipient: opts.governanceOpts.feeRecipient
401:                         }),
402:                         proposalEngine: opts.proposalEngineOpts
403:                     }),
404:                     opts.preciousTokens,
405:                     opts.preciousTokenIds,
406:                     opts.rageQuitTimestamp
407:                 );

/// @audit Invalid for solidity version >= 0.8.10
410:                 opts.governanceOpts.partyFactory.createPartyWithMetadata(
411:                     opts.governanceOpts.partyImpl,
412:                     authorities,
413:                     Party.PartyOptions({
414:                         name: opts.name,
415:                         symbol: opts.symbol,
416:                         customizationPresetId: opts.customizationPresetId,
417:                         governance: PartyGovernance.GovernanceOpts({
418:                             hosts: opts.governanceOpts.hosts,
419:                             voteDuration: opts.governanceOpts.voteDuration,
420:                             executionDelay: opts.governanceOpts.executionDelay,
421:                             passThresholdBps: opts.governanceOpts.passThresholdBps,
422:                             totalVotingPower: 0,
423:                             feeBps: opts.governanceOpts.feeBps,
424:                             feeRecipient: opts.governanceOpts.feeRecipient
425:                         }),
426:                         proposalEngine: opts.proposalEngineOpts
427:                     }),
428:                     opts.preciousTokens,
429:                     opts.preciousTokenIds,
430:                     opts.rageQuitTimestamp,
431:                     customMetadataProvider,
432:                     customMetadata
433:                 );
```

- *PartyGovernance.sol* ( [#L259](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L259), [#L285](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L285), [#L515](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L515), [#L526-L530](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L526-L530), [#L536-L541](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L536-L541), [#L791-L793](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L791-L793), [#L794-L796](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L794-L796), [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846) ):

```solidity
/// @audit Invalid for solidity version >= 0.8.10
259:         if (_GLOBALS.getBool(LibGlobals.GLOBAL_DISABLE_PARTY_ACTIONS)) {

/// @audit Invalid for solidity version >= 0.8.10
285:             IProposalExecutionEngine(_GLOBALS.getAddress(LibGlobals.GLOBAL_PROPOSAL_ENGINE_IMPL)),

/// @audit Invalid for solidity version >= 0.8.10
515:             _GLOBALS.getAddress(LibGlobals.GLOBAL_TOKEN_DISTRIBUTOR)

/// @audit Invalid for solidity version >= 0.8.10
526:                 distributor.createNativeDistribution{ value: amount }(
527:                     Party(payable(address(this))),
528:                     feeRecipient_,
529:                     feeBps_
530:                 );

/// @audit Invalid for solidity version >= 0.8.10
536:             distributor.createErc20Distribution(
537:                 IERC20(token),
538:                 Party(payable(address(this))),
539:                 feeRecipient_,
540:                 feeBps_
541:             );

/// @audit Invalid for solidity version >= 0.8.10
791:             uint256 globalMaxCancelDelay = _GLOBALS.getUint256(
792:                 LibGlobals.GLOBAL_PROPOSAL_MAX_CANCEL_DURATION
793:             );

/// @audit Invalid for solidity version >= 0.8.10
794:             uint256 globalMinCancelDelay = _GLOBALS.getUint256(
795:                 LibGlobals.GLOBAL_PROPOSAL_MIN_CANCEL_DURATION
796:             );

/// @audit Invalid for solidity version >= 0.8.10
846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *PartyGovernanceNFT.sol* ( [#L107](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L107), [#L107-L108](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L107-L108), [#L388](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L388), [#L496](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L496) ):

```solidity
/// @audit Invalid for solidity version >= 0.8.10
107:             RendererStorage(_GLOBALS.getAddress(LibGlobals.GLOBAL_RENDERER_STORAGE))

/// @audit Return value not used.
107:             RendererStorage(_GLOBALS.getAddress(LibGlobals.GLOBAL_RENDERER_STORAGE))
108:                 .useCustomizationPreset(customizationPresetId);

/// @audit Invalid for solidity version >= 0.8.10
388:                     : withdrawTokens[i].balanceOf(address(this));

/// @audit Invalid for solidity version >= 0.8.10
496:             _GLOBALS.getAddress(LibGlobals.GLOBAL_GOVERNANCE_NFT_RENDER_IMPL),
```

- *ProposalExecutionEngine.sol* ( [#L232](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L232), [#L239](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L239), [#L242](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L242), [#L322](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L322) ):

```solidity
/// @audit Invalid for solidity version >= 0.8.10
232:             return validator.isValidSignature(hash, signature);

/// @audit Invalid for solidity version >= 0.8.10
239:                     _GLOBALS.getAddress(LibGlobals.GLOBAL_OFF_CHAIN_SIGNATURE_VALIDATOR)

/// @audit Invalid for solidity version >= 0.8.10
242:             return validator.isValidSignature(hash, signature);

/// @audit Invalid for solidity version >= 0.8.10
322:             _GLOBALS.getAddress(LibGlobals.GLOBAL_PROPOSAL_ENGINE_IMPL)
```

- *OffChainSignatureValidator.sol* ( [#L59](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L59), [#L62](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L62), [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L67) ):

```solidity
/// @audit Invalid for solidity version >= 0.8.10
59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *

/// @audit Invalid for solidity version >= 0.8.10
62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {

/// @audit Invalid for solidity version >= 0.8.10
67:         uint96 totalVotingPower = party.getGovernanceValues().totalVotingPower;
```

</details>

### [D&#x2011;40] ~~Consider using named mappings~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *OffChainSignatureValidator.sol* ( [#L22](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L22) ):

```solidity
22:     mapping(Party party => uint96 thresholdBps) public signingThersholdBps;
```

### [D&#x2011;41] ~~Functions with array parameters should have length checks in place~~

The rule is valid, but the following findings are invalid.

<details>
<summary>There are 13 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L270-L275](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L270-L275), [#L706-L713](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L706-L713), [#L860-L868](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L860-L868), [#L1147-L1150](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1147-L1150), [#L1154-L1157](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1154-L1157) ):

```solidity
/// @audit No index access of preciousTokens
/// @audit No index access of preciousTokenIds
270:     function _initialize(
271:         GovernanceOpts memory govOpts,
272:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
273:         IERC721[] memory preciousTokens,
274:         uint256[] memory preciousTokenIds
275:     ) internal virtual {

/// @audit No index access of preciousTokens
/// @audit No index access of preciousTokenIds
706:     function execute(
707:         uint256 proposalId,
708:         Proposal memory proposal,
709:         IERC721[] memory preciousTokens,
710:         uint256[] memory preciousTokenIds,
711:         bytes calldata progressData,
712:         bytes calldata extraData
713:     ) external payable {

/// @audit No index access of preciousTokens
/// @audit No index access of preciousTokenIds
860:     function _executeProposal(
861:         uint256 proposalId,
862:         Proposal memory proposal,
863:         IERC721[] memory preciousTokens,
864:         uint256[] memory preciousTokenIds,
865:         uint256 flags,
866:         bytes memory progressData,
867:         bytes memory extraData
868:     ) private returns (bool completed) {

/// @audit No index access of preciousTokens
/// @audit No index access of preciousTokenIds
1147:     function _isPreciousListCorrect(
1148:         IERC721[] memory preciousTokens,
1149:         uint256[] memory preciousTokenIds
1150:     ) private view returns (bool) {

/// @audit No index access of preciousTokens
/// @audit No index access of preciousTokenIds
1154:     function _hashPreciousList(
1155:         IERC721[] memory preciousTokens,
1156:         uint256[] memory preciousTokenIds
1157:     ) internal pure returns (bytes32 h) {
```

- *PartyGovernanceNFT.sol* ( [#L81-L91](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L81-L91), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L263) ):

```solidity
/// @audit No index access of preciousTokens
/// @audit No index access of preciousTokenIds
81:     function _initialize(
82:         string memory name_,
83:         string memory symbol_,
84:         uint256 customizationPresetId,
85:         PartyGovernance.GovernanceOpts memory governanceOpts,
86:         ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
87:         IERC721[] memory preciousTokens,
88:         uint256[] memory preciousTokenIds,
89:         address[] memory authorities,
90:         uint40 rageQuitTimestamp_
91:     ) internal {

/// @audit No index access of tokenIds
263:     function burn(uint256[] memory tokenIds) public {
```

</details>

### [D&#x2011;42] ~~Events that mark critical parameter changes should contain both the old and the new value~~

This should especially be done if the new value is not required to be different from the old value.

<details>
<summary>There are 7 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L471](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L471) ):

```solidity
471:         emit HostStatusTransferred(msg.sender, newPartyHost);
```

- *PartyGovernanceNFT.sol* ( [#L335](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L335) ):

```solidity
335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);
```

- *ProposalExecutionEngine.sol* ( [#L331](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L331) ):

```solidity
331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);
```

- *SetGovernanceParameterProposal.sol* ( [#L36-L39](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L36-L39), [#L46-L49](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L46-L49), [#L57-L60](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L57-L60) ):

```solidity
36:             emit VoteDurationSet(
37:                 _getSharedProposalStorage().governanceValues.voteDuration,
38:                 proposalData.voteDuration
39:             );

46:             emit ExecutionDelaySet(
47:                 _getSharedProposalStorage().governanceValues.executionDelay,
48:                 proposalData.executionDelay
49:             );

57:             emit PassThresholdBpsSet(
58:                 _getSharedProposalStorage().governanceValues.passThresholdBps,
59:                 proposalData.passThresholdBps
60:             );
```

- *OffChainSignatureValidator.sol* ( [#L86](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L86) ):

```solidity
86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);
```

</details>

### [D&#x2011;43] ~~Unsafe solidity low-level call can cause gas grief attack~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L358-L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358-L360) ):

```solidity
358:             (bool s, bytes memory r) = address(this).call(
359:                 abi.encodeCall(this.refund, (tokenIds[i]))
360:             );
```

### [D&#x2011;44] ~~Unlimited gas consumption risk due to external call recipients~~

When calling an external function without specifying a gas limit , the called contract may consume all the remaining gas, causing the tx to be reverted. To mitigate this, it is recommended to explicitly set a gas limit when making low level external calls.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L358-L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358-L360) ):

```solidity
358:             (bool s, bytes memory r) = address(this).call(
359:                 abi.encodeCall(this.refund, (tokenIds[i]))
360:             );
```

### [D&#x2011;45] ~~State variables should include comments~~

There are comments for the following state variables.

<details>
<summary>There are 8 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L88](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L88) ):

```solidity
88:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernance.sol* ( [#L191](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L191) ):

```solidity
191:     IGlobals private immutable _GLOBALS;
```

- *PartyGovernanceNFT.sol* ( [#L34](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L34), [#L35](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L35), [#L38](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L38), [#L42](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L42) ):

```solidity
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

42:     IGlobals private immutable _GLOBALS;
```

- *ProposalExecutionEngine.sol* ( [#L101](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L101), [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L104) ):

```solidity
101:     IGlobals private immutable _GLOBALS;

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));
```

</details>

### [D&#x2011;46] ~~`safeTransfer` function does not check for contract existence~~

The examples below are either not token transfers, or are making high-level `transfer()`/`transferFrom()` calls (which check for contract existence), or are from a library that checks for contract existence.

<details>
<summary>There are 9 instances (click to show):</summary>

- *ETHCrowdfundBase.sol* ( [#L134](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L134) ):

```solidity
134:     constructor(IGlobals globals) {
```

- *InitialETHCrowdfund.sol* ( [#L99](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L99) ):

```solidity
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}
```

- *PartyGovernance.sol* ( [#L265](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L265), [#L312](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L312) ):

```solidity
265:     constructor(IGlobals globals) {

312:     fallback() external {
```

- *PartyGovernanceNFT.sol* ( [#L76](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L76), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465) ):

```solidity
76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(
```

- *ProposalExecutionEngine.sol* ( [#L107](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L107) ):

```solidity
107:     constructor(
```

- *Implementation.sol* ( [#L17](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L17) ):

```solidity
17:     constructor() {
```

</details>

### [D&#x2011;47] ~~Functions calling contracts/addresses with transfer hooks should be protected by reentrancy guard~~

The rule is valid, but the following findings are invalid.

There are 3 instances:

- *PartyGovernanceNFT.sol* ( [#L454](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L454), [#L461](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L461), [#L473](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L473) ):

```solidity
454:         super.transferFrom(owner, to, tokenId);

461:         super.safeTransferFrom(owner, to, tokenId);

473:         super.safeTransferFrom(owner, to, tokenId, data);
```

### [D&#x2011;48] ~~Assembly block creates dirty bits~~

Writing data to the free memory pointer without later updating the free memory pointer will cause there to be dirty bits at that memory location. Not updating the free memory pointer will make it [harder](https://docs.soliditylang.org/en/latest/ir-breaking-changes.html#cleanup) for the optimizer to reason about whether the memory needs to be cleaned before use, which will lead to worse optimizations. Update the free memory pointer and annotate the block (`assembly ("memory-safe") { ... }`) to avoid this issue.

<details>
<summary>There are 7 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L407](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L407), [#L1158](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1158) ):

```solidity
407:         assembly {

1158:         assembly {
```

- *ProposalExecutionEngine.sol* ( [#L306](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L306), [#L337](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L337) ):

```solidity
306:         assembly {

337:         assembly {
```

- *ProposalStorage.sol* ( [#L61](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L61) ):

```solidity
61:         assembly {
```

- *SetSignatureValidatorProposal.sol* ( [#L53](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L53) ):

```solidity
53:         assembly {
```

- *OffChainSignatureValidator.sol* ( [#L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L41) ):

```solidity
41:         assembly {
```

</details>

### [D&#x2011;49] ~~Avoid updating storage when the value hasn't changed~~

Manipulating storage in solidity is gas-intensive. It can be optimized by avoiding unnecessary storage updates when the new value equals the existing value.
If the old value is equal to the new value, not re-storing the value will avoid a Gsreset (**2900 gas**), potentially at the expense of a Gcoldsload (**2100 gas**) or a Gwarmaccess (**100 gas**).

There is 1 instance:

- *ETHCrowdfundBase.sol* ( [#L244](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L244) ):

```solidity
244:             totalContributions = newTotalContributions;
```

### [D&#x2011;50] ~~Missing contract existence checks before low-level calls~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *InitialETHCrowdfund.sol* ( [#L358-L360](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/InitialETHCrowdfund.sol#L358-L360) ):

```solidity
/// @audit No need to check
358:             (bool s, bytes memory r) = address(this).call(
359:                 abi.encodeCall(this.refund, (tokenIds[i]))
360:             );
```

### [D&#x2011;51] ~~`require()` or `revert()` statements that check input arguments should be at the top of the function~~

The rule is valid, but the following findings are invalid.

There is 1 instance:

- *ProposalExecutionEngine.sol* ( [#L314](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L314) ):

```solidity
/// @audit should check before line 304
314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));
```

### [D&#x2011;52] ~~Inconsistent spacing in comments~~

The comments below are in the `//x` format, which differs from the commonly used idiomatic comment syntax of `//<space>x`. It is recommended to use a consistent comment syntax throughout.

There are 3 instances:

- *PartyGovernance.sol* ( [#L430](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L430) ):

```solidity
/// @audit It is an URL
430:         // ref: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Checkpoints.sol#L39
```

- *ProposalExecutionEngine.sol* ( [#L67](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L67) ):

```solidity
/// @audit It is an URL
67:     // https://github.com/dragonfly-xyz/useful-solidity-patterns/tree/main/patterns/explicit-storage-buckets
```

- *ProposalStorage.sol* ( [#L9](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L9) ):

```solidity
/// @audit It is an URL
9: // https://github.com/dragonfly-xyz/useful-solidity-patterns/tree/main/patterns/explicit-storage-buckets
```

### [D&#x2011;53] ~~`keccak256()` should only need to be called on a specific string literal once~~

The rule is valid, but the following findings are invalid.

There are 3 instances:

- *ProposalExecutionEngine.sol* ( [#L104](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L104) ):

```solidity
/// @audit Assigned to constant
104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));
```

- *ProposalStorage.sol* ( [#L41](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L41) ):

```solidity
/// @audit Assigned to constant
41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));
```

- *SetSignatureValidatorProposal.sol* ( [#L14](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L14) ):

```solidity
/// @audit Assigned to constant
14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));
```

### [D&#x2011;54] ~~Use `SafeCast` to downcast safely~~

The rule is valid, but the following findings are invalid.

There are 3 instances:

- *ProposalExecutionEngine.sol* ( [#L290](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L290), [#L314](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L314), [#L314](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L314) ):

```solidity
/// @audit uint32(pt)
290:             revert UnsupportedProposalTypeError(uint32(pt));

/// @audit uint8(proposalType)
314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));

/// @audit uint8(type(ProposalType).max)
314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));
```

### [D&#x2011;55] ~~Use assembly to compute hashes to save gas~~

The rule is valid, but the following findings are invalid.

There are 5 instances:

- *PartyGovernance.sol* ( [#L406](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L406) ):

```solidity
406:         bytes32 dataHash = keccak256(proposal.proposalData);
```

- *ProposalExecutionEngine.sol* ( [#L171](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L171), [#L177](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L177), [#L202](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L202) ):

```solidity
171:                         keccak256(params.progressData),

177:                 bytes32 progressDataHash = keccak256(params.progressData);

202:             stor.nextProgressDataHash = keccak256(nextProgressData);
```

- *OffChainSignatureValidator.sol* ( [#L53](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/signature-validators/OffChainSignatureValidator.sol#L53) ):

```solidity
53:         if (keccak256(encodedPacket) != hash) {
```

### [D&#x2011;56] ~~Consider adding emergency-stop functionality~~

The rule is valid, but the following findings are invalid.

There are 4 instances:

- *PartyGovernance.sol* ( [#L23-L27](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L23-L27) ):

```solidity
23: abstract contract PartyGovernance is
24:     ProposalStorage,
25:     Implementation,
26:     IERC4906,
27:     ReadOnlyDelegateCall
```

- *ProposalStorage.sol* ( [#L10](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalStorage.sol#L10) ):

```solidity
10: abstract contract ProposalStorage {
```

- *SetSignatureValidatorProposal.sol* ( [#L7](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetSignatureValidatorProposal.sol#L7) ):

```solidity
7: abstract contract SetSignatureValidatorProposal {
```

- *Implementation.sol* ( [#L5](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/utils/Implementation.sol#L5) ):

```solidity
5: abstract contract Implementation {
```

### [D&#x2011;57] ~~Use descriptive constant instead of 0 as a parameter~~

Passing `0` or `0x0` as a function argument can sometimes result in a security issue(e.g. passing zero as the slippage parameter). A historical example is the infamous `0x0` address bug where numerous tokens were lost. This happens because `0` can be interpreted as an uninitialized `address`, leading to transfers to the `0x0` `address`, effectively burning tokens. Moreover, `0` as a denominator in division operations would cause a runtime exception. It's also often indicative of a logical error in the caller's code.

Consider using a constant variable with a descriptive name, so it's clear that the argument is intentionally being used, and for the right reasons.

There are 7 instances:

- *PartyGovernance.sol* ( [#L520](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L520), [#L581](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L581), [#L655](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L655), [#L688](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L688), [#L833](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L833), [#L897](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L897) ):

```solidity
520:         emit BatchMetadataUpdate(0, type(uint256).max);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

897:         emit BatchMetadataUpdate(0, type(uint256).max);
```

- *PartyGovernanceNFT.sol* ( [#L294](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L294) ):

```solidity
294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);
```

### [D&#x2011;58] ~~Prevent re-setting a state variable with the same value~~

This especially problematic when the setter also emits the same value, which may be confusing to offline parsers.

There is 1 instance:

- *ETHCrowdfundBase.sol* ( [#L244](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L244) ):

```solidity
244:             totalContributions = newTotalContributions;
```

### [D&#x2011;59] ~~Calculations should be memoized rather than re-calculating them~~

The function calls in solidity are expensive. If the same result of the same function calls are to be used several times, the result should be cached to reduce the gas consumption of repeated calls.

<details>
<summary>There are 16 instances (click to show):</summary>

- *PartyGovernance.sol* ( [#L791](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L791), [#L794](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L794), [#L939](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L939), [#L940](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L940), [#L984](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L984), [#L994](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L994), [#L999](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L999), [#L1016](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L1016) ):

```solidity
/// @audit _GLOBALS.getUint256(LibGlobals.GLOBAL_PROPOSAL_MAX_CANCEL_DURATION)
791:             uint256 globalMaxCancelDelay = _GLOBALS.getUint256(

/// @audit _GLOBALS.getUint256(LibGlobals.GLOBAL_PROPOSAL_MIN_CANCEL_DURATION)
794:             uint256 globalMinCancelDelay = _GLOBALS.getUint256(

/// @audit _adjustVotingPower(from,-powerI192,address(0))
939:         _adjustVotingPower(from, -powerI192, address(0));

/// @audit _adjustVotingPower(to,powerI192,address(0))
940:         _adjustVotingPower(to, powerI192, address(0));

/// @audit _getLastVotingPowerSnapshotForVoter(oldDelegate)
984:             VotingPowerSnapshot memory oldDelegateSnap = _getLastVotingPowerSnapshotForVoter(

/// @audit _insertVotingPowerSnapshot(oldDelegate,updatedOldDelegateSnap)
994:             _insertVotingPowerSnapshot(oldDelegate, updatedOldDelegateSnap);

/// @audit _getLastVotingPowerSnapshotForVoter(newDelegate)
999:             VotingPowerSnapshot memory newDelegateSnap = _getLastVotingPowerSnapshotForVoter(

/// @audit _insertVotingPowerSnapshot(newDelegate,updatedNewDelegateSnap)
1016:             _insertVotingPowerSnapshot(newDelegate, updatedNewDelegateSnap);
```

- *PartyGovernanceNFT.sol* ( [#L422](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L422), [#L438](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L438) ):

```solidity
/// @audit token.compatTransfer(feeRecipient,fee)
422:                         token.compatTransfer(feeRecipient, fee);

/// @audit token.compatTransfer(receiver,amount)
438:                         token.compatTransfer(receiver, amount);
```

- *ProposalExecutionEngine.sol* ( [#L226](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L226), [#L235](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L235), [#L263](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L263), [#L266](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L266), [#L272](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L272), [#L278](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/ProposalExecutionEngine.sol#L278) ):

```solidity
/// @audit getSignatureValidatorForHash(hash)
226:         IERC1271 validator = getSignatureValidatorForHash(hash);

/// @audit getSignatureValidatorForHash(0)
235:             validator = getSignatureValidatorForHash(0);

/// @audit _getSharedProposalStorage()
263:                 _getSharedProposalStorage().opts.allowArbCallsToSpendPartyEth

/// @audit _getSharedProposalStorage()
266:             if (!_getSharedProposalStorage().opts.distributionsRequireVote) {

/// @audit _getSharedProposalStorage()
272:             if (!_getSharedProposalStorage().opts.enableAddAuthorityProposal) {

/// @audit _getSharedProposalStorage()
278:             if (!_getSharedProposalStorage().opts.allowOperators) {
```

</details>

### [D&#x2011;60] ~~State variable access within a loop~~

State variable reads and writes are more expensive than local variable reads and writes. Therefore, it is recommended to replace state variable reads and writes within loops with a local variable. Gas savings should be multiplied by the average loop length.

There are 2 instances:

- *PartyGovernanceNFT.sol* ( [#L288](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L288), [#L420](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L420) ):

```solidity
288:             uint96 votingPower = votingPowerByTokenId[tokenId].safeCastUint256ToUint96();

420:                         payable(feeRecipient).transferEth(fee);
```

### [D&#x2011;61] ~~Loss of precision in divisions~~

Division by large numbers may result in the result being zero, due to solidity not supporting fractions. Consider requiring a minimum amount for the numerator to ensure that it is always larger than the denominator.

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L287](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L287) ):

```solidity
287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);
```

- *PartyGovernance.sol* ( [#L434](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L434) ):

```solidity
434:             uint256 mid = (low + high) / 2;
```

### [D&#x2011;62] ~~The remaining ETH may be locked in the contract after call~~

After calling an external contract and forwards some ETH value, the contract balance should be checked. If there is excess eth left over due to a failed call, or more eth being delivered than needed, or any other reason, this eth must be refunded to the user or handled appropriately, otherwise the eth may be frozen in the contract forever.

There are 2 instances:

- *ETHCrowdfundBase.sol* ( [#L379](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/crowdfund/ETHCrowdfundBase.sol#L379) ):

```solidity
/// @audit emergencyExecute()
379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

- *PartyGovernance.sol* ( [#L846](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernance.sol#L846) ):

```solidity
/// @audit emergencyExecute()
846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
```

### [D&#x2011;63] ~~`unchecked` blocks with additions/multiplications may overflow~~

There aren't any checks to avoid an overflow which can happen inside an `unchecked` block, so the following subtractions may overflow silently.

There is 1 instance:

- *PartyGovernanceNFT.sol* ( [#L187](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L187) ):

```solidity
187:             tokenId = ++tokenCount;
```

### [D&#x2011;64] ~~Numeric values having to do with time should use time units for readability~~

The rule is valid, but the following findings are invalid.

There are 2 instances:

- *SetGovernanceParameterProposal.sol* ( [#L33](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L33), [#L43](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/proposals/SetGovernanceParameterProposal.sol#L43) ):

```solidity
/// @audit 1 hours
33:             if (proposalData.voteDuration < 1 hours) {

/// @audit 30 days
43:             if (proposalData.executionDelay > 30 days) {
```

### [D&#x2011;65] ~~Contracts are vulnerable to rebasing accounting-related issues~~

The rule is invalid for this project

There are 3 instances:

- *PartyGovernanceNFT.sol* ( [#L451](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L451), [#L458](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L458), [#L465-L470](https://github.com/code-423n4/2023-10-party/blob/053fb9345b0739b3c26d12e1eae1eefbfd70b223/contracts/party/PartyGovernanceNFT.sol#L465-L470) ):

```solidity
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(
466:         address owner,
467:         address to,
468:         uint256 tokenId,
469:         bytes calldata data
470:     ) public override {
```
